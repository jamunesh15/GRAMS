<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GRAMS - Governance Portal</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet" />

  <style>
    :root {
      --primary: #138808;
      --primary-dark: #0f6e06;
      --secondary: #ff9933;
      --dark: #0f172a;
      --light: #f8fafc;
    }
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background-color: #f1f5f9;
      color: #334155;
      overflow-x: hidden;
    }

    .glass-nav {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(240, 253, 250, 0.95) 100%);
      backdrop-filter: blur(20px);
      border-bottom: 2px solid rgba(22, 163, 74, 0.15);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    }

    .top-nav-link {
      position: relative;
      color: #475569;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 0.875rem;
    }

    .top-nav-link:hover {
      color: #138808;
      background: rgba(22, 163, 74, 0.1);
    }

    .top-nav-link.active {
      color: #138808;
      font-weight: 700;
      background: linear-gradient(135deg, rgba(22, 163, 74, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%);
      border: none;
      padding-bottom: 6px;
    }

    .top-nav-link.active::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 10px;
      right: 10px;
      height: 2px;
      background: linear-gradient(90deg, #138808 0%, #16a34a 100%);
      border-radius: 2px;
    }

    /* Navbar Container Styles */
    nav#mainNav {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 50;
    }

    nav#mainNav .max-w-7xl {
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    /* Logo Styles */
    nav#mainNav > div > button:first-child {
      transition: all 0.3s;
    }

    nav#mainNav > div > button:first-child:hover {
      transform: scale(1.05);
    }

    nav#mainNav h1 {
      font-size: 1.25rem;
      letter-spacing: -0.02em;
    }

    /* Navigation Groups */
    .hidden.lg\:flex {
      gap: 0.5rem;
    }

    /* Divider in Nav */
    nav .w-px.h-6.bg-slate-300 {
      opacity: 0.5;
    }

    /* Icons in nav links */
    .top-nav-link .material-symbols-rounded {
      font-size: 1rem;
    }

    /* Profile Dropdown Animation */
    #userProfile {
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* New Complaint Button Glow */
    .bg-gradient-to-r.from-green-600.to-green-700 {
      position: relative;
      overflow: hidden;
    }

    .bg-gradient-to-r.from-green-600.to-green-700::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .bg-gradient-to-r.from-green-600.to-green-700:hover::before {
      left: 100%;
    }

    .settings-tab.active {
      border-b: 2px solid #16a34a;
      color: #166534;
      font-weight: 700;
    }

    .settings-tab {
      color: #64748b;
      font-weight: 500;
      cursor: pointer;
      padding-bottom: 12px;
      transition: all 0.3s;
      border-b: 2px solid transparent;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .settings-tab:hover {
      color: #166534;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 28px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #cbd5e1;
      transition: 0.3s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: #16a34a;
    }

    input:checked + .toggle-slider:before {
      transform: translateX(20px);
    }

    .settings-card {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 24px;
      transition: all 0.3s ease;
    }

    .settings-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .btn-primary {
      background: linear-gradient(135deg, #138808 0%, #0f6e06 100%);
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(19, 136, 8, 0.3);
    }

    .btn-secondary {
      background: white;
      color: #334155;
      padding: 10px 20px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-secondary:hover {
      background: #f8fafc;
      border-color: #cbd5e1;
    }

    .input-field {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 14px;
      transition: all 0.3s;
    }

    .input-field:focus {
      outline: none;
      border-color: #16a34a;
      box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
    }

    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .badge-success {
      background: #dcfce7;
      color: #166534;
    }

    .badge-warning {
      background: #fef3c7;
      color: #92400e;
    }

    .badge-danger {
      background: #fee2e2;
      color: #991b1b;
    }

    /* Dark Mode Styles */
    body.dark-mode {
      background-color: #0f172a;
      color: #e2e8f0;
    }

    /* Dark Mode Navbar */
    body.dark-mode .glass-nav {
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%);
      border-bottom-color: rgba(22, 163, 74, 0.25);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    body.dark-mode .top-nav-link {
      color: #cbd5e1;
    }

    body.dark-mode .top-nav-link:hover {
      color: #86efac;
      background: rgba(22, 163, 74, 0.2);
    }

    body.dark-mode .top-nav-link.active {
      color: #86efac;
      background: linear-gradient(135deg, rgba(22, 163, 74, 0.25) 0%, rgba(16, 185, 129, 0.15) 100%);
    }

    body.dark-mode #userProfile {
      color: #e2e8f0;
    }

    body.dark-mode #userProfile > div:first-child {
      background: rgba(51, 65, 85, 0.8);
      border: 1px solid rgba(22, 163, 74, 0.2);
    }

    body.dark-mode #userProfile > div:first-child:hover {
      background: rgba(51, 65, 85, 1);
      border-color: rgba(22, 163, 74, 0.4);
    }

    body.dark-mode #userProfile .group-hover\:block {
      background: rgba(30, 41, 59, 0.95);
      border: 1px solid rgba(22, 163, 74, 0.2);
      backdrop-filter: blur(10px);
    }

    body.dark-mode .w-px.h-6.bg-slate-300 {
      background-color: rgba(22, 163, 74, 0.3);
    }

    body.dark-mode nav#mainNav h1 {
      color: #e2e8f0;
    }

    body.dark-mode .material-symbols-rounded {
      color: #cbd5e1;
    }

    body.dark-mode .top-nav-link:hover .material-symbols-rounded {
      color: #86efac;
    }

    body.dark-mode .glass-nav {
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%);
      border-bottom-color: rgba(22, 163, 74, 0.25);
    }

    /* Hamburger Menu */
    .hamburger-btn {
      display: none;
      flex-direction: column;
      gap: 6px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 6px;
    }

    .hamburger-btn span {
      width: 24px;
      height: 2.5px;
      background: #334155;
      border-radius: 2px;
      transition: all 0.3s;
    }

    body.dark-mode .hamburger-btn span {
      background: #cbd5e1;
    }

    @media (max-width: 1024px) {
      .hamburger-btn {
        display: flex;
      }

      .nav-menu {
        position: absolute;
        top: 70px;
        left: 0;
        right: 0;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(240, 253, 250, 0.98) 100%);
        border-bottom: 2px solid rgba(22, 163, 74, 0.15);
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        z-index: 999;
      }

      body.dark-mode .nav-menu {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%);
        border-bottom-color: rgba(22, 163, 74, 0.25);
      }

      .nav-menu.active {
        max-height: 600px;
        padding: 12px 0;
      }

      .nav-menu .flex {
        flex-direction: column;
        gap: 0;
      }

      .nav-menu .top-nav-link {
        width: 100%;
        justify-content: flex-start;
        padding: 12px 20px;
        border-radius: 0;
        border-bottom: 1px solid rgba(22, 163, 74, 0.1);
      }

      .nav-menu .w-px.h-6.bg-slate-300 {
        width: 100%;
        height: 1px;
        margin: 6px 0;
      }
    }

    body.dark-mode .settings-card {
      background: #1e293b;
      border-color: #334155;
      color: #e2e8f0;
    }

    body.dark-mode .input-field {
      background: #1e293b;
      border-color: #334155;
      color: #e2e8f0;
    }

    body.dark-mode .input-field:focus {
      border-color: #16a34a;
    }

    body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4 {
      color: #f1f5f9;
    }

    body.dark-mode .bg-white {
      background: #1e293b;
    }

    /* Dark Mode - Login Page */
    body.dark-mode #login {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    }

    body.dark-mode #login .absolute.inset-0 {
      background: linear-gradient(135deg, #0f172a 0%, #1a2332 100%) !important;
    }

    /* Login Card Styling in Dark Mode */
    body.dark-mode #login .bg-white.rounded-3xl {
      background: #1e293b !important;
      border-color: rgba(22, 163, 74, 0.25) !important;
    }

    body.dark-mode #login .bg-gradient-to-br.from-green-600 {
      background: linear-gradient(to bottom right, #0d5e2d, #0a4a24) !important;
    }

    body.dark-mode #login .bg-gradient-to-br.from-white {
      background: #1a2b3d !important;
    }

    body.dark-mode #login .bg-gradient-to-br.from-white.to-green-50 {
      background: #1a2b3d !important;
    }

    /* Text Colors for Dark Mode Login */
    body.dark-mode #login h2,
    body.dark-mode #login h3 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #login .text-slate-600,
    body.dark-mode #login .text-slate-700,
    body.dark-mode #login .text-slate-800,
    body.dark-mode #login .text-slate-900 {
      color: #e2e8f0 !important;
    }

    body.dark-mode #login .text-slate-500 {
      color: #cbd5e1 !important;
    }

    body.dark-mode #login .text-slate-400 {
      color: #94a3b8 !important;
    }

    body.dark-mode #login .text-green-600 {
      color: #86efac !important;
    }

    body.dark-mode #login .text-green-100 {
      color: #c6f6d5 !important;
    }

    body.dark-mode #login .text-green-200 {
      color: #a6f3a6 !important;
    }

    /* Border Colors */
    body.dark-mode #login .border-slate-200 {
      border-color: #334155 !important;
    }

    body.dark-mode #login .border-slate-300 {
      border-color: #475569 !important;
    }

    body.dark-mode #login .border-green-100 {
      border-color: rgba(134, 239, 172, 0.25) !important;
    }

    body.dark-mode #login .border-green-200 {
      border-color: rgba(134, 239, 172, 0.3) !important;
    }

    /* Background Colors */
    body.dark-mode #login .bg-slate-50,
    body.dark-mode #login .bg-slate-100 {
      background: #0f172a !important;
    }

    body.dark-mode #login .bg-green-50 {
      background: #0f172a !important;
    }

    body.dark-mode #login .hover\:bg-green-50:hover {
      background: rgba(134, 239, 172, 0.1) !important;
    }

    body.dark-mode #login .hover\:bg-slate-50:hover {
      background: #334155 !important;
    }

    body.dark-mode #login .hover\:border-green-400 {
      border-color: #86efac !important;
    }

    /* Image Overlay */
    body.dark-mode #login .absolute.inset-0.bg-gradient-to-t {
      background: linear-gradient(to top, rgba(5, 50, 30, 0.6), transparent) !important;
    }

    body.dark-mode #login img {
      opacity: 0.85;
    }

    /* Input Fields Dark Mode */
    body.dark-mode #login input,
    body.dark-mode #login textarea,
    body.dark-mode #login select,
    body.dark-mode #login .input-field {
      background: #0f172a !important;
      color: #f1f5f9 !important;
      border-color: #334155 !important;
    }

    body.dark-mode #login input:focus,
    body.dark-mode #login textarea:focus,
    body.dark-mode #login select:focus {
      border-color: #86efac !important;
      box-shadow: 0 0 10px rgba(134, 239, 172, 0.2) !important;
    }

    body.dark-mode #login input::placeholder {
      color: #64748b !important;
    }

    /* Button Styling Dark Mode */
    body.dark-mode #login button {
      color: #f1f5f9 !important;
    }

    body.dark-mode #login .bg-gradient-to-r.from-green-600 {
      background: linear-gradient(to right, #22c55e, #16a34a) !important;
    }

    body.dark-mode #login .bg-gradient-to-r.from-green-600:hover {
      background: linear-gradient(to right, #16a34a, #15803d) !important;
    }

    /* Tab Styling */
    body.dark-mode #login .login-tab {
      color: #cbd5e1 !important;
    }

    body.dark-mode #login .login-tab.active {
      color: #86efac !important;
      border-color: #86efac !important;
    }

    body.dark-mode #login .flex.gap-6.border-b-2 {
      border-color: rgba(134, 239, 172, 0.2) !important;
    }

    /* Engineer Form - Orange Theme Dark Mode */
    body.dark-mode #form-engineer .text-orange-600 {
      color: #fb923c !important;
    }

    body.dark-mode #form-engineer .border-orange-200 {
      border-color: rgba(251, 146, 60, 0.3) !important;
    }

    body.dark-mode #form-engineer input {
      border-color: rgba(251, 146, 60, 0.3) !important;
    }

    body.dark-mode #form-engineer input:focus {
      border-color: #fb923c !important;
      box-shadow: 0 0 10px rgba(251, 146, 60, 0.2) !important;
    }

    body.dark-mode #form-engineer .bg-gradient-to-r.from-orange-600 {
      background: linear-gradient(to right, #f97316, #ea580c) !important;
    }

    body.dark-mode #form-engineer .bg-gradient-to-r.from-orange-600:hover {
      background: linear-gradient(to right, #ea580c, #c2410c) !important;
    }

    /* Citizen & Admin Form - Green Theme Dark Mode */
    body.dark-mode #form-citizen .text-green-600,
    body.dark-mode #form-admin .text-green-600 {
      color: #86efac !important;
    }

    body.dark-mode #form-citizen .border-green-200,
    body.dark-mode #form-admin .border-green-200 {
      border-color: rgba(134, 239, 172, 0.3) !important;
    }

    body.dark-mode #form-citizen input,
    body.dark-mode #form-admin input {
      border-color: rgba(134, 239, 172, 0.3) !important;
    }

    body.dark-mode #form-citizen input:focus,
    body.dark-mode #form-admin input:focus {
      border-color: #86efac !important;
      box-shadow: 0 0 10px rgba(134, 239, 172, 0.2) !important;
    }

    body.dark-mode #form-citizen label,
    body.dark-mode #form-admin label {
      color: #cbd5e1 !important;
    }

    body.dark-mode #form-citizen p,
    body.dark-mode #form-admin p {
      color: #94a3b8 !important;
    }

    body.dark-mode #form-citizen a,
    body.dark-mode #form-admin a {
      color: #86efac !important;
    }

    body.dark-mode #form-citizen a:hover,
    body.dark-mode #form-admin a:hover {
      color: #4ade80 !important;
    }

    /* Dark Mode - All Pages - Background Gradients */
    body.dark-mode #landing,
    body.dark-mode #grievance,
    body.dark-mode #track,
    body.dark-mode #community,
    body.dark-mode #impact {
      background: #0f172a;
    }

    body.dark-mode .bg-gradient-to-br.from-lime-50,
    body.dark-mode .bg-gradient-to-br.from-orange-50,
    body.dark-mode .bg-gradient-to-br.from-green-50 {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%) !important;
    }

    /* Dark Mode - All White Backgrounds */
    body.dark-mode .bg-white {
      background: #1e293b !important;
      color: #e2e8f0 !important;
    }

    /* Dark Mode - Cards and Containers */
    body.dark-mode .bg-white.p-6.rounded-2xl,
    body.dark-mode .bg-white.p-4.rounded-xl,
    body.dark-mode .bg-white.rounded-lg,
    body.dark-mode .bg-white.rounded-3xl {
      background: #1e293b !important;
      border-color: #334155 !important;
    }

    /* Dark Mode - All Text Colors */
    body.dark-mode .text-slate-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode .text-slate-800 {
      color: #e2e8f0 !important;
    }

    body.dark-mode .text-slate-700,
    body.dark-mode .text-slate-600 {
      color: #cbd5e1 !important;
    }

    body.dark-mode .text-slate-500 {
      color: #94a3b8 !important;
    }

    body.dark-mode .text-slate-400 {
      color: #64748b !important;
    }

    /* Dark Mode - All Borders */
    body.dark-mode .border-slate-200 {
      border-color: #334155 !important;
    }

    body.dark-mode .border-slate-300 {
      border-color: #475569 !important;
    }

    body.dark-mode .border-slate-100 {
      border-color: #1e293b !important;
    }

    body.dark-mode .border-green-100,
    body.dark-mode .border-blue-100,
    body.dark-mode .border-orange-100 {
      border-color: rgba(22, 163, 74, 0.2) !important;
    }

    /* Dark Mode - All Input Fields and Forms */
    body.dark-mode input,
    body.dark-mode textarea,
    body.dark-mode select,
    body.dark-mode .input-field {
      background: #0f172a !important;
      color: #e2e8f0 !important;
      border-color: #334155 !important;
    }

    body.dark-mode input::placeholder,
    body.dark-mode textarea::placeholder,
    body.dark-mode select::placeholder {
      color: #64748b !important;
    }

    /* Dark Mode - Light Colored Backgrounds */
    body.dark-mode .bg-slate-50,
    body.dark-mode .bg-slate-100,
    body.dark-mode .bg-green-50,
    body.dark-mode .bg-blue-50,
    body.dark-mode .bg-orange-50,
    body.dark-mode .bg-yellow-50,
    body.dark-mode .bg-red-50,
    body.dark-mode .bg-amber-50,
    body.dark-mode .bg-lime-50 {
      background: #0f172a !important;
      border-color: #334155 !important;
    }

    /* Dark Mode - Image Overlays */
    body.dark-mode .absolute.inset-0.bg-gradient-to-t {
      background: linear-gradient(to top, rgba(5, 50, 30, 0.3), transparent) !important;
    }

    body.dark-mode .absolute.inset-0.bg-gradient-to-b {
      background: linear-gradient(to bottom, rgba(5, 50, 30, 0.3), transparent) !important;
    }

    /* Dark Mode - Badges */
    body.dark-mode .badge-success,
    body.dark-mode .bg-green-100 {
      background: rgba(22, 163, 74, 0.2) !important;
      color: #86efac !important;
    }

    body.dark-mode .badge-warning,
    body.dark-mode .bg-yellow-100,
    body.dark-mode .bg-orange-100 {
      background: rgba(217, 119, 6, 0.2) !important;
      color: #fbbf24 !important;
    }

    body.dark-mode .badge-danger,
    body.dark-mode .bg-red-100 {
      background: rgba(220, 38, 38, 0.2) !important;
      color: #fca5a5 !important;
    }

    body.dark-mode .bg-blue-100 {
      background: rgba(59, 130, 246, 0.2) !important;
    }

    /* Dark Mode - Hover States */
    body.dark-mode .hover\:bg-slate-50:hover {
      background: #0f172a !important;
    }

    body.dark-mode .hover\:bg-slate-100:hover {
      background: #1e293b !important;
    }

    /* Dark Mode - Admin Dashboard */
    body.dark-mode #dash-admin .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #dash-admin .text-slate-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #dash-admin .text-slate-600 {
      color: #cbd5e1 !important;
    }

    /* Dark Mode - Engineer Dashboard */
    body.dark-mode #dash-engineer .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #dash-engineer .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Citizen Dashboard */
    body.dark-mode #dash-citizen .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #dash-citizen .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Grievance Form */
    body.dark-mode #grievance .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #grievance .text-slate-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #grievance .text-slate-600 {
      color: #cbd5e1 !important;
    }

    /* Dark Mode - Track Page */
    body.dark-mode #track .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #track .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Community Page */
    body.dark-mode #community .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #community .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Impact/Transparency Page */
    body.dark-mode #impact .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #impact .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Profile Page */
    body.dark-mode #profile .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #profile .text-slate-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #profile .sticky.top-24 {
      background: #1e293b !important;
    }

    /* Dark Mode - Admin Settings */
    body.dark-mode #admin-settings .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #admin-settings .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Notifications */
    body.dark-mode #notifications .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #notifications .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Knowledge Base */
    body.dark-mode #knowledge-base .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #knowledge-base .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Performance Dashboard */
    body.dark-mode #performance-dashboard .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #performance-dashboard .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - System Status */
    body.dark-mode #system-status .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #system-status .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Performance Dashboard Cards */
    body.dark-mode #performance-dashboard .bg-gradient-to-br.from-green-50,
    body.dark-mode #performance-dashboard .bg-gradient-to-br.from-blue-50,
    body.dark-mode #performance-dashboard .bg-gradient-to-br.from-orange-50,
    body.dark-mode #performance-dashboard .bg-gradient-to-br.from-purple-50 {
      background: #1e293b !important;
      border-color: #334155 !important;
    }

    body.dark-mode #performance-dashboard .text-green-700,
    body.dark-mode #performance-dashboard .text-blue-700,
    body.dark-mode #performance-dashboard .text-orange-700,
    body.dark-mode #performance-dashboard .text-purple-700 {
      color: #86efac !important;
    }

    body.dark-mode #performance-dashboard .text-green-900,
    body.dark-mode #performance-dashboard .text-blue-900,
    body.dark-mode #performance-dashboard .text-orange-900,
    body.dark-mode #performance-dashboard .text-purple-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #performance-dashboard .text-slate-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #performance-dashboard .text-slate-600 {
      color: #cbd5e1 !important;
    }

    body.dark-mode #performance-dashboard .bg-green-100,
    body.dark-mode #performance-dashboard .bg-blue-100,
    body.dark-mode #performance-dashboard .bg-orange-100,
    body.dark-mode #performance-dashboard .bg-purple-100 {
      background: rgba(34, 197, 94, 0.1) !important;
    }

    body.dark-mode #performance-dashboard .text-green-300,
    body.dark-mode #performance-dashboard .text-blue-300,
    body.dark-mode #performance-dashboard .text-orange-300,
    body.dark-mode #performance-dashboard .text-purple-300 {
      color: #86efac !important;
    }

    /* Dark Mode - System Status Cards */
    body.dark-mode #system-status .bg-gradient-to-r.from-green-50 {
      background: #1e293b !important;
      border-color: rgba(22, 163, 74, 0.3) !important;
    }

    body.dark-mode #system-status .text-green-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #system-status .text-green-700 {
      color: #86efac !important;
    }

    body.dark-mode #system-status .bg-green-100 {
      background: rgba(34, 197, 94, 0.15) !important;
    }

    body.dark-mode #system-status .text-green-600 {
      color: #86efac !important;
    }

    body.dark-mode #system-status .bg-white.border.border-slate-200 {
      background: #1e293b !important;
      border-color: #334155 !important;
    }

    body.dark-mode #system-status .bg-white.border.border-yellow-200 {
      background: #1e293b !important;
      border-color: rgba(217, 119, 6, 0.3) !important;
    }

    body.dark-mode #system-status .bg-yellow-50 {
      background: #1e293b !important;
    }

    body.dark-mode #system-status .bg-slate-200 {
      background: #334155 !important;
    }

    /* Dark Mode - Audit Logs */
    body.dark-mode #audit-logs .bg-white {
      background: #1e293b !important;
    }

    body.dark-mode #audit-logs .text-slate-900 {
      color: #f1f5f9 !important;
    }

    /* Dark Mode - Admin Dashboard */
    body.dark-mode .flex.h-\[calc\(100vh-64px\)\].bg-slate-50 {
      background: #0f172a !important;
    }

    body.dark-mode aside.w-72.bg-slate-900 {
      background: #0f172a !important;
      border-color: #1e293b !important;
    }

    body.dark-mode aside.w-72.bg-slate-900 .border-slate-800 {
      border-color: #1e293b !important;
    }

    body.dark-mode aside.w-72.bg-slate-900 .bg-slate-800 {
      background: #1e293b !important;
    }

    body.dark-mode aside.w-72.bg-slate-900 .hover\:bg-slate-800:hover {
      background: #1e293b !important;
    }

    body.dark-mode aside.w-72.bg-slate-900 .text-slate-500 {
      color: #94a3b8 !important;
    }

    body.dark-mode main.flex-1 {
      background: #0f172a !important;
    }

    body.dark-mode main.flex-1.overflow-y-auto {
      background: linear-gradient(135deg, #0f172a 0%, #1a2b3d 100%) !important;
    }

    body.dark-mode main.flex-1 h2 {
      color: #f1f5f9 !important;
    }

    body.dark-mode main.flex-1 p {
      color: #cbd5e1 !important;
    }

    /* Admin Dashboard - Stat Cards */
    body.dark-mode .bg-gradient-to-br.from-blue-500,
    body.dark-mode .bg-gradient-to-br.from-green-600,
    body.dark-mode .bg-gradient-to-br.from-orange-500,
    body.dark-mode .bg-gradient-to-br.from-red-500,
    body.dark-mode .bg-gradient-to-br.from-purple-500 {
      opacity: 0.9;
      filter: brightness(0.95);
    }

    body.dark-mode .bg-blue-500 {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
    }

    body.dark-mode .bg-blue-600 {
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%) !important;
    }

    body.dark-mode .bg-green-600 {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%) !important;
    }

    body.dark-mode .bg-orange-500 {
      background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important;
    }

    body.dark-mode .bg-orange-600 {
      background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%) !important;
    }

    body.dark-mode .bg-red-500 {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
    }

    body.dark-mode .bg-purple-500 {
      background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%) !important;
    }

    /* Admin Dashboard - Tables */
    body.dark-mode table {
      background: #1e293b !important;
    }

    body.dark-mode table thead {
      background: #0f172a !important;
    }

    body.dark-mode table th {
      color: #f1f5f9 !important;
      border-color: #334155 !important;
    }

    body.dark-mode table td {
      color: #e2e8f0 !important;
      border-color: #334155 !important;
    }

    body.dark-mode table tr:hover {
      background: #334155 !important;
    }

    /* Admin Dashboard - Badges and Pills */
    body.dark-mode .inline-block.px-3.py-1.rounded-full.text-xs.font-semibold {
      background: #334155 !important;
      color: #e2e8f0 !important;
    }

    body.dark-mode .bg-green-100 {
      background: rgba(34, 197, 94, 0.15) !important;
      color: #86efac !important;
    }

    body.dark-mode .bg-yellow-100 {
      background: rgba(234, 179, 8, 0.15) !important;
      color: #fcd34d !important;
    }

    body.dark-mode .bg-red-100 {
      background: rgba(239, 68, 68, 0.15) !important;
      color: #fca5a5 !important;
    }

    body.dark-mode .bg-blue-100 {
      background: rgba(59, 130, 246, 0.15) !important;
      color: #93c5fd !important;
    }

    /* Admin Dashboard - Charts Container */
    body.dark-mode canvas {
      filter: brightness(1.1) contrast(1.1);
    }

    /* Admin Dashboard - Buttons */
    body.dark-mode button.bg-green-600 {
      background: #22c55e !important;
    }

    body.dark-mode button.bg-green-600:hover {
      background: #16a34a !important;
    }

    body.dark-mode button.hover\:bg-green-700:hover {
      background: #16a34a !important;
    }

    /* Admin Dashboard - Form Elements */
    body.dark-mode input[type="search"],
    body.dark-mode input[type="text"],
    body.dark-mode select {
      background: #1e293b !important;
      color: #e2e8f0 !important;
      border-color: #334155 !important;
    }

    body.dark-mode input[type="search"]:focus,
    body.dark-mode input[type="text"]:focus,
    body.dark-mode select:focus {
      border-color: #86efac !important;
      box-shadow: 0 0 10px rgba(134, 239, 172, 0.2) !important;
    }

    /* Admin Dashboard - Dropdown Lists */
    body.dark-mode .absolute.top-full.right-0.mt-2.bg-white.rounded-lg.shadow-lg {
      background: #1e293b !important;
      border-color: #334155 !important;
    }

    body.dark-mode .absolute.top-full.right-0.mt-2 a,
    body.dark-mode .absolute.top-full.right-0.mt-2 button {
      color: #e2e8f0 !important;
    }

    body.dark-mode .absolute.top-full.right-0.mt-2 a:hover,
    body.dark-mode .absolute.top-full.right-0.mt-2 button:hover {
      background: #334155 !important;
    }

    /* Dark Mode - Engineer Dashboard */
    body.dark-mode #dash-engineer {
      background: linear-gradient(135deg, #0f172a 0%, #1a2b3d 100%) !important;
    }

    body.dark-mode #dash-engineer .bg-white.rounded-2xl {
      background: #1e293b !important;
      border-color: #334155 !important;
    }

    body.dark-mode #dash-engineer .bg-gradient-to-r.from-red-50,
    body.dark-mode #dash-engineer .bg-gradient-to-r.from-green-50 {
      background: #1a2b3d !important;
    }

    body.dark-mode #dash-engineer .text-slate-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #dash-engineer .text-slate-600 {
      color: #cbd5e1 !important;
    }

    body.dark-mode #dash-engineer .text-slate-400 {
      color: #94a3b8 !important;
    }

    body.dark-mode #dash-engineer .text-slate-500 {
      color: #cbd5e1 !important;
    }

    body.dark-mode #dash-engineer .text-xs.font-bold.text-orange-600.bg-orange-100 {
      background: rgba(249, 115, 22, 0.2) !important;
      color: #fb923c !important;
    }

    body.dark-mode #dash-engineer h2 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #dash-engineer h3 {
      color: #f1f5f9 !important;
    }

    /* Engineer Task Cards */
    body.dark-mode #dash-engineer .border-red-200,
    body.dark-mode #dash-engineer .border-green-200 {
      border-color: rgba(34, 197, 94, 0.2) !important;
    }

    body.dark-mode #dash-engineer .border-red-100,
    body.dark-mode #dash-engineer .border-green-100 {
      border-color: rgba(34, 197, 94, 0.15) !important;
    }

    body.dark-mode #dash-engineer .bg-red-100,
    body.dark-mode #dash-engineer .bg-green-100 {
      background: rgba(34, 197, 94, 0.15) !important;
    }

    body.dark-mode #dash-engineer .text-red-600,
    body.dark-mode #dash-engineer .text-green-600 {
      color: #86efac !important;
    }

    body.dark-mode #dash-engineer .text-red-700,
    body.dark-mode #dash-engineer .text-green-700 {
      color: #86efac !important;
    }

    body.dark-mode #dash-engineer .text-red-900 {
      color: #f1f5f9 !important;
    }

    body.dark-mode #dash-engineer .text-green-900 {
      color: #f1f5f9 !important;
    }

    /* Engineer Task Status Display */
    body.dark-mode #dash-engineer #engTask1Resolution {
      background: rgba(34, 197, 94, 0.1) !important;
      border-color: rgba(34, 197, 94, 0.2) !important;
    }

    /* Engineer Task Badge Status */
    body.dark-mode #dash-engineer .bg-red-100.text-red-700,
    body.dark-mode #dash-engineer .bg-green-100.text-green-700 {
      background: rgba(34, 197, 94, 0.15) !important;
      color: #86efac !important;
      border-color: rgba(34, 197, 94, 0.3) !important;
    }

    /* Engineer Task Deadline Info Box */
    body.dark-mode #dash-engineer .grid.grid-cols-1.sm\:grid-cols-2.gap-4.bg-white.p-4 {
      background: #1e293b !important;
      border-color: #334155 !important;
    }

    body.dark-mode #dash-engineer .text-xs.font-bold.text-slate-400.uppercase {
      color: #94a3b8 !important;
    }

    /* Engineer Task Buttons */
    body.dark-mode #dash-engineer .bg-gradient-to-r.from-slate-900.to-slate-800 {
      background: linear-gradient(to right, #1e293b, #0f172a) !important;
      border-color: #334155 !important;
    }

    body.dark-mode #dash-engineer .bg-gradient-to-r.from-slate-900.to-slate-800:hover {
      background: linear-gradient(to right, #334155, #1e293b) !important;
    }

    body.dark-mode #dash-engineer .border-2.border-slate-300 {
      border-color: #334155 !important;
      background: #1a2b3d !important;
    }

    body.dark-mode #dash-engineer .border-2.border-slate-300:hover {
      background: #334155 !important;
    }

    body.dark-mode #dash-engineer .text-slate-600.border-2.border-slate-300 {
      color: #cbd5e1 !important;
    }

    /* Engineer Support Box */
    body.dark-mode #dash-engineer .bg-gradient-to-r.from-green-900.to-emerald-900 {
      background: linear-gradient(to right, #0f4c3a, #0a3a2e) !important;
    }

    body.dark-mode #dash-engineer .text-green-100 {
      color: #c6f6d5 !important;
    }

    body.dark-mode #dash-engineer .bg-white.text-green-700 {
      background: #e2e8f0 !important;
      color: #0a3a2e !important;
    }

    body.dark-mode #dash-engineer .bg-white.text-green-700:hover {
      background: #f1f5f9 !important;
    }

    /* Engineer Page - Task spacing */
    body.dark-mode #dash-engineer .space-y-4 > div {
      background: #1e293b !important;
    }

    /* Engineer Page - Opacity adjustment */
    body.dark-mode #dash-engineer .opacity-90 {
      opacity: 0.85 !important;
      background: #1e293b !important;
    }

    /* Dark Mode - Modals and Dropdowns */
    body.dark-mode .fixed.inset-0.bg-black\/40,
    body.dark-mode .absolute.top-full.right-0.mt-2.bg-white {
      background: #1e293b !important;
      border-color: #334155 !important;
    }

    body.dark-mode .absolute.top-full.right-0.mt-2.bg-white button {
      color: #cbd5e1 !important;
    }

    body.dark-mode .absolute.top-full.right-0.mt-2.bg-white button:hover {
      background: #0f172a !important;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .top-nav-link {
        font-size: 12px;
      }
      
      .settings-tab {
        font-size: 12px;
        padding-bottom: 8px;
      }

      .max-w-6xl, .max-w-5xl {
        padding-left: 12px;
        padding-right: 12px;
      }

      .grid {
        grid-template-columns: 1fr !important;
      }

      .md\:grid-cols-2 {
        grid-template-columns: 1fr !important;
      }

      .md\:grid-cols-3 {
        grid-template-columns: 1fr !important;
      }

      .md\:grid-cols-4 {
        grid-template-columns: 1fr !important;
      }

      .hidden.sm\:inline {
        display: none !important;
      }
    }

    /* Advanced Filters */
    .filter-chip {
      display: inline-block;
      padding: 6px 12px;
      background: #f1f5f9;
      border: 1px solid #cbd5e1;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .filter-chip.active {
      background: #138808;
      color: white;
      border-color: #138808;
    }

    .filter-chip:hover {
      border-color: #138808;
    }

    /* Star Rating */
    .star-rating {
      display: inline-flex;
      gap: 4px;
    }

    .star {
      cursor: pointer;
      font-size: 24px;
      color: #cbd5e1;
      transition: color 0.2s;
    }

    .star:hover, .star.active {
      color: #fbbf24;
    }

    /* Performance Card */
    .performance-card {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }

    .performance-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .progress-ring {
      width: 120px;
      height: 120px;
      margin: 0 auto 16px;
    }

    /* Status Badge */
    .status-online {
      width: 10px;
      height: 10px;
      background: #22c55e;
      border-radius: 50%;
      display: inline-block;
      margin-right: 6px;
    }

    .status-offline {
      width: 10px;
      height: 10px;
      background: #ef4444;
      border-radius: 50%;
      display: inline-block;
      margin-right: 6px;
    }

    /* Audit Log */
    .audit-item {
      padding: 12px 16px;
      border-left: 3px solid #16a34a;
      background: #f0fdf4;
      border-radius: 4px;
      margin-bottom: 12px;
    }

    .audit-item.warning {
      border-left-color: #ff9933;
      background: #fef3c7;
    }

    .audit-item.error {
      border-left-color: #ef4444;
      background: #fee2e2;
    }
  </style>
</head>
<body class="antialiased">

  <!-- NAVBAR -->
  <!-- NAVBAR -->
<!-- NAVBAR -->
<nav id="mainNav" class="fixed top-0 w-full z-50 glass-nav">
  <div class="w-full px-4 sm:px-6 h-16 flex items-center justify-between">
    
    <!-- Left: Logo -->
    <button onclick="showSection('landing')" class="flex items-center gap-2 group shrink-0 hover:opacity-80 transition">
      <div class="bg-gradient-to-tr from-green-700 to-green-600 text-white p-1.5 rounded-lg shadow-lg group-hover:scale-105 transition">
        <span class="material-symbols-rounded text-lg" aria-hidden="true">shield_person</span>
      </div>
      <div class="hidden sm:block">
        <h1 class="font-bold text-base text-slate-900 leading-none">GRAMS</h1>
        <p class="text-[8px] font-bold text-green-600 uppercase mt-0.5">Portal</p>
      </div>
    </button>

    <!-- Center: Navigation Links -->
    <div class="nav-menu hidden lg:flex items-center gap-1 text-xs">
      
      <!-- Main Navigation -->
      <div class="flex items-center gap-0.5">
        <button 
          data-section="landing" 
          onclick="showSection('landing'); document.querySelector('.nav-menu').classList.remove('active');" 
          class="top-nav-link active"
        >
          <span class="material-symbols-rounded text-sm">home</span>
          <span class="hidden lg:inline text-xs">Home</span>
        </button>
        <button 
          data-section="impact" 
          onclick="showSection('impact'); document.querySelector('.nav-menu').classList.remove('active');" 
          class="top-nav-link"
        >
          <span class="material-symbols-rounded text-sm">visibility</span>
          <span class="hidden lg:inline text-xs">Transparency</span>
        </button>
        <button 
          data-section="community" 
          onclick="showSection('community'); document.querySelector('.nav-menu').classList.remove('active');" 
          class="top-nav-link"
        >
          <span class="material-symbols-rounded text-sm">groups</span>
          <span class="hidden lg:inline text-xs">Community</span>
        </button>
        <button 
          data-section="track" 
          onclick="showSection('track'); document.querySelector('.nav-menu').classList.remove('active');" 
          class="top-nav-link"
        >
          <span class="material-symbols-rounded text-sm"></span>
          <span class="hidden lg:inline text-xs">Track</span>
        </button>
      </div>

      <!-- Divider -->
      <div class="w-px h-4 bg-slate-300 mx-1"></div>

      <!-- Info & Resources -->
      <div class="flex items-center gap-0.5">
        <button 
          data-section="knowledge-base" 
          onclick="showSection('knowledge-base'); document.querySelector('.nav-menu').classList.remove('active');" 
          class="top-nav-link"
        >
          <span class="material-symbols-rounded text-sm">help</span>
          <span class="hidden lg:inline text-xs">Help</span>
        </button>
        <button 
          data-section="performance-dashboard" 
          onclick="showSection('performance-dashboard'); document.querySelector('.nav-menu').classList.remove('active');" 
          class="top-nav-link"
        >
          <span class="material-symbols-rounded text-sm">trending_up</span>
          <span class="hidden lg:inline text-xs">Performance</span>
        </button>
        <button 
          data-section="system-status" 
          onclick="showSection('system-status'); document.querySelector('.nav-menu').classList.remove('active');" 
          class="top-nav-link"
        >
          <span class="material-symbols-rounded text-sm">checklist</span>
          <span class="hidden lg:inline text-xs">Status</span>
        </button>
      </div>
    </div>

    <!-- Right: User Profile + Actions -->
    <div class="flex items-center gap-1 lg:gap-2">
  
      <!-- Notifications Icon (shown when logged in) -->
      <button 
        id="notificationsBtn"
        onclick="showSection('notifications')" 
        class="hidden p-1.5 rounded-lg bg-slate-100 hover:bg-slate-200 transition text-slate-700 relative"
        title="Notifications"
      >
        <span class="material-symbols-rounded text-sm" aria-hidden="true">notifications</span>
        <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
      </button>

      <!-- Profile Dropdown (shown when logged in) -->
      <div id="userProfile" class="hidden flex items-center gap-1 bg-gradient-to-r from-green-50 to-emerald-50 px-1.5 py-1 rounded-lg border border-green-200 hover:border-green-400 transition cursor-pointer group relative text-xs">
        <div class="w-7 h-7 rounded-full bg-gradient-to-br from-green-300 to-emerald-300 flex items-center justify-center text-[10px] font-bold text-green-900 border-2 border-white shadow">
          PK
        </div>
        
        <div class="text-left leading-tight hidden sm:block">
          <span id="userNameDisplay" class="text-[10px] font-bold text-slate-800 block">Pradeep</span>
          <span id="userRoleDisplay" class="text-[7px] text-green-700 uppercase font-semibold">Admin</span>
        </div>

        <!-- Dropdown Menu -->
        <div class="absolute top-full right-0 mt-2 bg-white border border-slate-200 rounded-lg shadow-lg p-2 hidden group-hover:block z-50 min-w-max">
          <button class="block w-full text-left px-3 py-2 hover:bg-slate-100 rounded text-xs text-slate-700 font-semibold" onclick="showSection('profile')">
            <span class="material-symbols-rounded text-sm align-middle">person</span> My Profile
          </button>
          <button class="block w-full text-left px-3 py-2 hover:bg-slate-100 rounded text-xs text-slate-700 font-semibold" onclick="showSection('admin-settings')">
            <span class="material-symbols-rounded text-sm align-middle">settings</span> Settings
          </button>
          <hr class="my-1" />
          <button class="block w-full text-left px-3 py-2 hover:bg-red-100 rounded text-xs text-red-600 font-semibold" onclick="logout()">
            <span class="material-symbols-rounded text-sm align-middle">logout</span> Logout
          </button>
        </div>
      </div>

      <!-- Login Button (shown when logged out) -->
      <button 
        id="loginBtn" 
        onclick="showSection('login')" 
        class="px-2 py-1.5 text-xs font-bold bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 hover:border-green-500 transition flex items-center gap-1 shadow-sm"
      >
        <span class="material-symbols-rounded text-sm" aria-hidden="true">login</span>
        <span class="hidden sm:inline">Login</span>
      </button>

      <!-- New Complaint Button -->
      <button 
        onclick="showSection('grievance')" 
        class="bg-gradient-to-r from-green-600 to-green-700 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-lg shadow-green-600/30 hover:shadow-xl hover:from-green-700 hover:to-green-800 transition-all flex items-center gap-1"
      >
        <span class="material-symbols-rounded text-sm" aria-hidden="true">edit_note</span>
        <span class="hidden sm:inline">Complaint</span>
      </button>

      <!-- Dark Mode Toggle -->
      <button 
        onclick="toggleDarkMode()" 
        class="p-1.5 rounded-lg bg-slate-100 hover:bg-slate-200 transition text-slate-700"
        title="Toggle Dark Mode"
      >
        <span class="material-symbols-rounded text-sm" aria-hidden="true">dark_mode</span>
      </button>

      <!-- Hamburger Menu Button -->
      <button 
        class="hamburger-btn" 
        onclick="document.querySelector('.nav-menu').classList.toggle('active')"
        title="Toggle Menu"
      >
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

  </div>
</nav>



  <main class="pt-16 min-h-screen relative">

    <!-- LANDING -->
<!-- LANDING -->
<section id="landing" class="page-enter block">
  <!-- Hero Section -->
  <div class="max-w-7xl mx-auto px-6 py-20 grid lg:grid-cols-2 gap-12 items-center">
    <div class="space-y-6">
      <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide inline-flex items-center gap-2">
        <span class="relative flex h-2.5 w-2.5">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-green-600"></span>
        </span>
        Official Portal
      </span>
      <h1 class="text-5xl lg:text-6xl font-extrabold text-slate-900 leading-tight">
        Smarter Governance,<br />
        <span class="text-green-600">Faster Resolution.</span>
      </h1>
      <p class="text-lg text-slate-500 max-w-lg">
        A unified platform for Citizens, Engineers, and Administrators to report, track, and resolve civic issues efficiently.
      </p>
      <div class="flex flex-wrap gap-4 pt-4">
        <button onclick="showSection('login')" class="bg-slate-900 text-white px-8 py-3.5 rounded-xl font-bold hover:bg-slate-800 transition flex items-center gap-2">
          <span class="material-symbols-rounded" aria-hidden="true">login</span> Get Started
        </button>
        <button onclick="showSection('track')" class="bg-white text-slate-700 border border-slate-200 px-8 py-3.5 rounded-xl font-bold hover:bg-slate-50 transition flex items-center gap-2">
          <span class="material-symbols-rounded" aria-hidden="true">search</span> Track Ticket
        </button>
      </div>
      <div class="grid grid-cols-3 gap-6 pt-6 border-t border-slate-200">
        <div>
          <p class="text-3xl font-extrabold text-slate-900">12k+</p>
          <p class="text-xs font-bold text-slate-400 uppercase mt-1">Resolved</p>
        </div>
        <div>
          <p class="text-3xl font-extrabold text-slate-900">48h</p>
          <p class="text-xs font-bold text-slate-400 uppercase mt-1">Avg Time</p>
        </div>
        <div>
          <p class="text-3xl font-extrabold text-slate-900">500+</p>
          <p class="text-xs font-bold text-slate-400 uppercase mt-1">Villages</p>
        </div>
      </div>
    </div>

    <div class="relative hidden lg:block">
      <div class="absolute inset-0 bg-green-200 rounded-full blur-3xl opacity-30"></div>
      <div class="relative bg-white/60 backdrop-blur-xl border border-white p-2 rounded-2xl shadow-2xl">
        <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&w=900&q=80" class="rounded-xl w-full opacity-90" alt="Village" />
      </div>
    </div>
  </div>

  <!-- What is GRAMS Section -->
  <div class="bg-white py-20">
    <div class="max-w-7xl mx-auto px-6">
      <div class="text-center mb-12">
        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-bold uppercase">About GRAMS</span>
        <h2 class="text-4xl font-extrabold text-slate-900 mt-4">Centralized Grievance Redressal System</h2>
        <p class="text-lg text-slate-500 mt-4 max-w-3xl mx-auto">
          GRAMS is a transparent, accountable platform that connects citizens with local authorities to resolve civic issues efficiently. Built on the principle of public pressure and timely action.
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-2xl border border-green-200 hover:shadow-lg transition">
          <div class="w-14 h-14 bg-green-600 rounded-xl flex items-center justify-center text-white mb-4">
            <span class="material-symbols-rounded text-3xl" aria-hidden="true">report</span>
          </div>
          <h3 class="font-bold text-xl text-slate-900 mb-3">File Complaint</h3>
          <p class="text-slate-600">Citizens can report civic issues like water supply, road damage, streetlights, waste management with photo evidence and location details.</p>
        </div>

        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-8 rounded-2xl border border-blue-200 hover:shadow-lg transition">
          <div class="w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-white mb-4">
            <span class="material-symbols-rounded text-3xl" aria-hidden="true">engineering</span>
          </div>
          <h3 class="font-bold text-xl text-slate-900 mb-3">Assign & Track</h3>
          <p class="text-slate-600">Administrators assign complaints to field engineers who work on-ground to resolve issues. Real-time status updates are visible to all.</p>
        </div>

        <div class="bg-gradient-to-br from-orange-50 to-amber-50 p-8 rounded-2xl border border-orange-200 hover:shadow-lg transition">
          <div class="w-14 h-14 bg-orange-600 rounded-xl flex items-center justify-center text-white mb-4">
            <span class="material-symbols-rounded text-3xl" aria-hidden="true">public</span>
          </div>
          <h3 class="font-bold text-xl text-slate-900 mb-3">Public Transparency</h3>
          <p class="text-slate-600">Unresolved issues escalate to public view after 7 days, creating accountability pressure on authorities to take timely action.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 7-Day Escalation Policy -->
  <div class="bg-gradient-to-br from-slate-900 via-green-900 to-slate-900 py-20 relative overflow-hidden">
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 left-1/4 w-96 h-96 bg-green-500 rounded-full blur-3xl"></div>
      <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-orange-500 rounded-full blur-3xl"></div>
    </div>
    
    <div class="max-w-7xl mx-auto px-6 relative z-10">
      <div class="text-center mb-16">
        <span class="bg-orange-500 text-white px-4 py-1.5 rounded-full text-xs font-bold uppercase">Core Policy</span>
        <h2 class="text-4xl font-extrabold text-white mt-4">7-Day Accountability Rule</h2>
        <p class="text-lg text-slate-300 mt-4 max-w-3xl mx-auto">
          Every grievance must be resolved within 7 days. If authorities fail to act, the complaint automatically escalates to the public domain, putting pressure on responsible officials.
        </p>
      </div>

      <div class="grid md:grid-cols-4 gap-6">
        <!-- Day 0-2 -->
        <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 hover:bg-white/15 transition">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold">1</div>
            <div>
              <p class="text-xs font-bold text-green-400 uppercase">Day 0-2</p>
              <h4 class="font-bold text-white">Filing & Review</h4>
            </div>
          </div>
          <p class="text-sm text-slate-300">Citizen files complaint. Admin reviews and assigns to field engineer within 24 hours.</p>
        </div>

        <!-- Day 3-5 -->
        <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 hover:bg-white/15 transition">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold">2</div>
            <div>
              <p class="text-xs font-bold text-blue-400 uppercase">Day 3-5</p>
              <h4 class="font-bold text-white">Active Work</h4>
            </div>
          </div>
          <p class="text-sm text-slate-300">Engineer inspects site and performs resolution work. Updates status with photos as proof of action.</p>
        </div>

        <!-- Day 6-7 -->
        <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 hover:bg-white/15 transition">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold">3</div>
            <div>
              <p class="text-xs font-bold text-yellow-400 uppercase">Day 6-7</p>
              <h4 class="font-bold text-white">Final Deadline</h4>
            </div>
          </div>
          <p class="text-sm text-slate-300">Issue must be resolved and closed. Admin verifies completion and marks status as "Resolved" with citizen feedback.</p>
        </div>

        <!-- Day 7+ -->
        <div class="bg-gradient-to-br from-red-500/20 to-orange-500/20 backdrop-blur-lg border-2 border-red-400/50 rounded-2xl p-6 hover:border-red-400 transition">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white font-bold">!</div>
            <div>
              <p class="text-xs font-bold text-red-400 uppercase">Day 7+</p>
              <h4 class="font-bold text-white">Public Escalation</h4>
            </div>
          </div>
          <p class="text-sm text-slate-300">Unresolved complaints go public. Citizens can view and upvote, creating pressure on higher authorities to intervene.</p>
        </div>
      </div>

      <div class="mt-12 bg-orange-500/20 border border-orange-400/30 rounded-2xl p-6 backdrop-blur-lg">
        <div class="flex items-start gap-4">
          <span class="material-symbols-rounded text-4xl text-orange-400" aria-hidden="true">campaign</span>
          <div>
            <h3 class="font-bold text-xl text-white mb-2">Why 7 Days Matter</h3>
            <p class="text-slate-200">
              Public visibility creates accountability. When delayed issues become visible to the entire community, authorities face pressure from citizens, media, and higher officials. This transparency forces faster action and prevents complaints from being ignored or buried in bureaucracy.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- How It Works -->
  <div class="py-20 bg-slate-50">
    <div class="max-w-7xl mx-auto px-6">
      <div class="text-center mb-12">
        <span class="bg-slate-200 text-slate-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Process</span>
        <h2 class="text-4xl font-extrabold text-slate-900 mt-4">How GRAMS Works</h2>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 relative">
          <div class="absolute -top-4 -left-4 w-12 h-12 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg">1</div>
          <div class="mt-4">
            <h4 class="font-bold text-lg text-slate-900 mb-2">Report Issue</h4>
            <p class="text-sm text-slate-600">Citizens file complaints via mobile or web with photos, location, and category selection.</p>
          </div>
        </div>

        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 relative">
          <div class="absolute -top-4 -left-4 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg">2</div>
          <div class="mt-4">
            <h4 class="font-bold text-lg text-slate-900 mb-2">Auto-Assignment</h4>
            <p class="text-sm text-slate-600">System assigns ticket to ward engineer based on location and category. SMS sent to all parties.</p>
          </div>
        </div>

        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 relative">
          <div class="absolute -top-4 -left-4 w-12 h-12 bg-orange-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg">3</div>
          <div class="mt-4">
            <h4 class="font-bold text-lg text-slate-900 mb-2">Resolution Work</h4>
            <p class="text-sm text-slate-600">Engineer visits site, performs work, uploads proof photos, and marks status as resolved.</p>
          </div>
        </div>

        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 relative">
          <div class="absolute -top-4 -left-4 w-12 h-12 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg">4</div>
          <div class="mt-4">
            <h4 class="font-bold text-lg text-slate-900 mb-2">Citizen Feedback</h4>
            <p class="text-sm text-slate-600">Citizen verifies resolution and rates service. Ticket closed. If unsatisfied, can reopen complaint.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Benefits Section -->
  <div class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-6">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div>
          <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-bold uppercase">Benefits</span>
          <h2 class="text-4xl font-extrabold text-slate-900 mt-4 mb-6">Why GRAMS is Different</h2>
          
          <div class="space-y-6">
            <div class="flex gap-4">
              <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center shrink-0">
                <span class="material-symbols-rounded text-green-700" aria-hidden="true">visibility</span>
              </div>
              <div>
                <h4 class="font-bold text-slate-900 mb-1">Full Transparency</h4>
                <p class="text-slate-600 text-sm">Every complaint status is visible to citizens. No hidden processes or lost tickets in bureaucracy.</p>
              </div>
            </div>

            <div class="flex gap-4">
              <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center shrink-0">
                <span class="material-symbols-rounded text-blue-700" aria-hidden="true">timer</span>
              </div>
              <div>
                <h4 class="font-bold text-slate-900 mb-1">Time-Bound Action</h4>
                <p class="text-slate-600 text-sm">7-day deadline ensures issues don't linger for months. Automatic escalation creates urgency.</p>
              </div>
            </div>

            <div class="flex gap-4">
              <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center shrink-0">
                <span class="material-symbols-rounded text-orange-700" aria-hidden="true">groups</span>
              </div>
              <div>
                <h4 class="font-bold text-slate-900 mb-1">Community Pressure</h4>
                <p class="text-slate-600 text-sm">Delayed complaints become public. Citizens can upvote to prioritize critical issues.</p>
              </div>
            </div>

            <div class="flex gap-4">
              <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center shrink-0">
                <span class="material-symbols-rounded text-purple-700" aria-hidden="true">verified</span>
              </div>
              <div>
                <h4 class="font-bold text-slate-900 mb-1">Proof-Based Resolution</h4>
                <p class="text-slate-600 text-sm">Engineers must upload photos of completed work. Citizens verify before closure.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="relative">
          <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-3xl p-8 border-2 border-white shadow-2xl">
            <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=600&h=400&fit=crop&auto=format" alt="Citizens using GRAMS" class="rounded-2xl shadow-lg mb-6" />
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-white p-4 rounded-xl shadow-sm">
                <p class="text-2xl font-bold text-green-600">92%</p>
                <p class="text-xs text-slate-600 font-semibold">Resolution Rate</p>
              </div>
              <div class="bg-white p-4 rounded-xl shadow-sm">
                <p class="text-2xl font-bold text-blue-600">3.2d</p>
                <p class="text-xs text-slate-600 font-semibold">Avg Resolution</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CTA Section -->
  <div class="bg-gradient-to-r from-green-600 to-emerald-600 py-16">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <h2 class="text-4xl font-extrabold text-white mb-4">Ready to Make Your Voice Heard?</h2>
      <p class="text-lg text-green-100 mb-8">Join thousands of citizens using GRAMS to improve their communities. Report issues, track progress, and hold authorities accountable.</p>
      <div class="flex flex-wrap gap-4 justify-center">
        <button onclick="showSection('login')" class="bg-white text-green-700 px-8 py-4 rounded-xl font-bold hover:bg-green-50 transition shadow-lg">
          Sign Up Now
        </button>
        <button onclick="showSection('track')" class="bg-green-800 text-white px-8 py-4 rounded-xl font-bold hover:bg-green-900 transition border-2 border-green-700">
          Track Existing Complaint
        </button>
      </div>
    </div>
  </div>

</section>


    <!-- LOGIN -->
    <!-- LOGIN -->
<section id="login" class="page-enter hidden min-h-[calc(100vh-64px)] relative overflow-hidden">
  
  <!-- Background with Nature Theme -->
  <div class="absolute inset-0 bg-gradient-to-br from-lime-50 via-green-50 to-yellow-50">
    <div class="absolute top-20 left-10 w-96 h-96 bg-green-300 rounded-full blur-3xl opacity-30"></div>
    <div class="absolute bottom-20 right-10 w-96 h-96 bg-yellow-300 rounded-full blur-3xl opacity-30"></div>
  </div>

  <div class="relative z-10 flex items-center justify-center p-6 min-h-[calc(100vh-64px)]">
    <div class="w-full max-w-5xl bg-white rounded-3xl shadow-2xl overflow-hidden border-2 border-green-100">
      <div class="flex flex-col lg:flex-row">
        
        <!-- Left Side - Welcome Section -->
        <div class="lg:w-1/2 bg-gradient-to-br from-green-600 via-emerald-600 to-green-700 p-10 text-white flex flex-col justify-between relative overflow-hidden">
          
          <!-- Decorative Blurs -->
          <div class="absolute -top-20 -left-20 w-64 h-64 bg-yellow-400 rounded-full blur-3xl opacity-20"></div>
          <div class="absolute -bottom-20 -right-20 w-64 h-64 bg-lime-400 rounded-full blur-3xl opacity-20"></div>
          
          <div class="relative z-10">
            <!-- Logo -->
            <div class="flex items-center gap-3 mb-8">
              <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/30">
                <span class="material-symbols-rounded text-4xl" aria-hidden="true">eco</span>
              </div>
              <div>
                <h1 class="font-bold text-2xl tracking-tight">GRAMS</h1>
                <p class="text-xs text-green-100 uppercase tracking-wider">Nexus TechSol</p>
              </div>
            </div>

            <!-- Welcome Text -->
            <div class="mb-8">
              <h2 class="text-4xl font-extrabold mb-4 leading-tight">Welcome back</h2>
              <p class="text-green-100 text-base leading-relaxed">
                Secure access for Citizens, Engineers, and Administrators to manage grievances and track real-time progress.
              </p>
            </div>

            <!-- Image with better alignment -->
            <div class="relative">
              <div class="absolute inset-0 bg-gradient-to-t from-green-600/80 to-transparent rounded-2xl z-10"></div>
              <img 
                src="https://images.unsplash.com/photo-1551836022-d5d88e9218df?w=500&h=350&fit=crop&auto=format" 
                alt="Digital Governance" 
                class="rounded-2xl w-full h-64 object-cover shadow-2xl border-4 border-white/20"
              />
              <div class="absolute bottom-4 left-4 right-4 z-20 text-white">
                <div class="flex items-center gap-2 mb-2">
                  <span class="material-symbols-rounded text-xl" aria-hidden="true">verified</span>
                  <span class="text-sm font-bold">Trusted by 12,000+ Citizens</span>
                </div>
                <div class="flex gap-2">
                  <div class="bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold border border-white/30">
                    Fast Resolution
                  </div>
                  <div class="bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold border border-white/30">
                    100% Transparent
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Footer -->
          <div class="relative z-10 mt-8">
            <div class="flex items-center gap-4 text-xs text-green-200">
              <div class="flex items-center gap-1">
                <span class="material-symbols-rounded text-sm" aria-hidden="true">shield</span>
                <span>Secure</span>
              </div>
              <div class="w-1 h-1 rounded-full bg-green-300"></div>
              <div class="flex items-center gap-1">
                <span class="material-symbols-rounded text-sm" aria-hidden="true">lock</span>
                <span>Encrypted</span>
              </div>
              <div class="w-1 h-1 rounded-full bg-green-300"></div>
              <span>© 2025 Nexus TechSol</span>
            </div>
          </div>
        </div>

        <!-- Right Side - Login Forms -->
        <div class="lg:w-1/2 bg-gradient-to-br from-white to-green-50/30 p-10 lg:p-12">
          
          <!-- Tabs -->
          <div class="flex gap-6 border-b-2 border-green-100 mb-8">
            <div 
              onclick="switchLoginTab('citizen')" 
              id="tab-citizen" 
              class="login-tab active pb-3 cursor-pointer transition-all"
            >
              <div class="flex items-center gap-2">
                <span class="material-symbols-rounded text-lg" aria-hidden="true">person</span>
                <span class="font-bold">Citizen</span>
              </div>
            </div>
            <div 
              onclick="switchLoginTab('admin')" 
              id="tab-admin" 
              class="login-tab pb-3 cursor-pointer transition-all"
            >
              <div class="flex items-center gap-2">
                <span class="material-symbols-rounded text-lg" aria-hidden="true">admin_panel_settings</span>
                <span class="font-bold">Official</span>
              </div>
            </div>
            <div 
              onclick="switchLoginTab('engineer')" 
              id="tab-engineer" 
              class="login-tab pb-3 cursor-pointer transition-all"
            >
              <div class="flex items-center gap-2">
                <span class="material-symbols-rounded text-lg" aria-hidden="true">engineering</span>
                <span class="font-bold">Engineer</span>
              </div>
            </div>
          </div>

          <!-- CITIZEN LOGIN FORM -->
          <div id="form-citizen" class="login-form block">
            <h3 class="text-2xl font-bold text-slate-900 mb-6">Citizen Login</h3>
            
            <!-- Social Login -->
            <div class="grid grid-cols-2 gap-3 mb-6">
              <button class="flex items-center justify-center gap-2 py-3 border-2 border-green-200 rounded-xl hover:bg-green-50 transition text-sm font-semibold text-slate-700 hover:border-green-400">
                <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" alt="Google" />
                Google
              </button>
              <button class="flex items-center justify-center gap-2 py-3 border-2 border-green-200 rounded-xl hover:bg-green-50 transition text-sm font-semibold text-slate-700 hover:border-green-400">
                <img src="https://www.svgrepo.com/show/355117/microsoft.svg" class="w-5 h-5" alt="Microsoft" />
                Microsoft
              </button>
            </div>

            <!-- Divider -->
            <div class="relative flex py-3 items-center mb-6">
              <div class="flex-grow border-t border-green-200"></div>
              <span class="flex-shrink mx-4 text-slate-400 text-xs font-semibold">OR LOGIN WITH PHONE</span>
              <div class="flex-grow border-t border-green-200"></div>
            </div>

            <!-- Phone Form -->
            <form onsubmit="event.preventDefault(); handleAuth('citizen')">
              <div class="mb-5">
                <label for="citizenPhone" class="block text-xs font-bold text-slate-600 uppercase mb-2">Mobile Number</label>
                <div class="relative">
                  <span class="material-symbols-rounded absolute left-4 top-3.5 text-green-600" aria-hidden="true">call</span>
                  <input 
                    id="citizenPhone" 
                    type="tel" 
                    class="w-full pl-12 pr-4 py-3.5 bg-white border-2 border-green-200 rounded-xl outline-none focus:border-green-500 transition font-medium text-slate-800" 
                    placeholder="+91 98765 43210" 
                    required 
                  />
                </div>
              </div>
              
              <button 
                type="submit" 
                class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 rounded-xl font-bold hover:from-green-700 hover:to-emerald-700 transition shadow-lg shadow-green-600/20 flex items-center justify-center gap-2"
              >
                <span class="material-symbols-rounded" aria-hidden="true">login</span>
                Get OTP
              </button>
            </form>

            <p class="mt-4 text-xs text-slate-400 text-center">
              By continuing you agree to our <a href="#" class="text-green-600 hover:underline">Terms & Privacy Policy</a>
            </p>
          </div>

          <!-- ADMIN LOGIN FORM -->
          <div id="form-admin" class="login-form hidden">
            <h3 class="text-2xl font-bold text-slate-900 mb-6">Administrative Login</h3>
            <form onsubmit="event.preventDefault(); handleAuth('admin')">
              <div class="mb-5">
                <label for="adminEmail" class="block text-xs font-bold text-slate-600 uppercase mb-2">Official Email</label>
                <div class="relative">
                  <span class="material-symbols-rounded absolute left-4 top-3.5 text-green-600" aria-hidden="true">mail</span>
                  <input 
                    id="adminEmail" 
                    type="email" 
                    class="w-full pl-12 pr-4 py-3.5 bg-white border-2 border-green-200 rounded-xl outline-none focus:border-green-500 transition font-medium" 
                    placeholder="admin@grams.gov.in" 
                    required 
                  />
                </div>
              </div>
              
              <div class="mb-6">
                <label for="adminPassword" class="block text-xs font-bold text-slate-600 uppercase mb-2">Password</label>
                <div class="relative">
                  <span class="material-symbols-rounded absolute left-4 top-3.5 text-green-600" aria-hidden="true">lock</span>
                  <input 
                    id="adminPassword" 
                    type="password" 
                    class="w-full pl-12 pr-4 py-3.5 bg-white border-2 border-green-200 rounded-xl outline-none focus:border-green-500 transition font-medium" 
                    required 
                  />
                </div>
              </div>
              
              <button 
                type="submit" 
                class="w-full bg-gradient-to-r from-green-700 to-green-600 text-white py-4 rounded-xl font-bold hover:from-green-800 hover:to-green-700 transition shadow-lg shadow-green-700/30"
              >
                <span class="material-symbols-rounded inline-block mr-2" aria-hidden="true">shield</span>
                Secure Login
              </button>
            </form>
          </div>

          <!-- ENGINEER LOGIN FORM -->
          <div id="form-engineer" class="login-form hidden">
            <h3 class="text-2xl font-bold text-slate-900 mb-6">Field Engineer Login</h3>
            <form onsubmit="event.preventDefault(); handleAuth('engineer')">
              <div class="mb-5">
                <label for="engId" class="block text-xs font-bold text-slate-600 uppercase mb-2">Engineer ID</label>
                <div class="relative">
                  <span class="material-symbols-rounded absolute left-4 top-3.5 text-orange-600" aria-hidden="true">badge</span>
                  <input 
                    id="engId" 
                    type="text" 
                    class="w-full pl-12 pr-4 py-3.5 bg-white border-2 border-orange-200 rounded-xl outline-none focus:border-orange-500 transition font-medium" 
                    placeholder="ENG-1022" 
                    required 
                  />
                </div>
              </div>
              
              <div class="mb-6">
                <label for="engPasscode" class="block text-xs font-bold text-slate-600 uppercase mb-2">Passcode</label>
                <div class="relative">
                  <span class="material-symbols-rounded absolute left-4 top-3.5 text-orange-600" aria-hidden="true">lock</span>
                  <input 
                    id="engPasscode" 
                    type="password" 
                    class="w-full pl-12 pr-4 py-3.5 bg-white border-2 border-orange-200 rounded-xl outline-none focus:border-orange-500 transition font-medium" 
                    required 
                  />
                </div>
              </div>
              
              <button 
                type="submit" 
                class="w-full bg-gradient-to-r from-orange-600 to-orange-500 text-white py-4 rounded-xl font-bold hover:from-orange-700 hover:to-orange-600 transition shadow-lg shadow-orange-600/30"
              >
                <span class="material-symbols-rounded inline-block mr-2" aria-hidden="true">construction</span>
                Access Dashboard
              </button>
            </form>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>

    <!-- ADMIN DASHBOARD -->
    <section id="dash-admin" class="page-enter hidden">
      <div class="flex h-[calc(100vh-64px)] bg-slate-50">

        <!-- Sidebar -->
        <aside class="w-72 bg-slate-900 text-slate-100 flex flex-col">
          <div class="px-6 py-5 flex items-center justify-between border-b border-slate-800">
            <div class="flex items-center gap-3">
              <div class="w-9 h-9 rounded-xl bg-green-500 flex items-center justify-center">
                <span class="material-symbols-rounded text-2xl text-white" aria-hidden="true">shield_person</span>
              </div>
              <div>
                <p class="text-[11px] uppercase tracking-[0.15em] text-slate-400 font-semibold">Admin</p>
                <p class="text-sm font-bold">District Control Room</p>
              </div>
            </div>
            <button class="w-9 h-9 rounded-full bg-slate-800 flex items-center justify-center" onclick="showSection('admin-settings')">
              <span class="material-symbols-rounded text-xl" aria-hidden="true">settings</span>
            </button>
          </div>

          <nav class="flex-1 overflow-y-auto px-3 py-4 space-y-2 text-sm">
            <p class="px-3 text-[11px] uppercase tracking-[0.2em] text-slate-500 font-semibold mb-2">Overview</p>

            <button class="nav-link active w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-slate-800" onclick="switchAdminView('overview', this)">
              <span class="material-symbols-rounded text-lg" aria-hidden="true">dashboard</span>
              <span>Dashboard</span>
            </button>
            <button class="nav-link w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-slate-800" onclick="switchAdminView('alltickets', this)">
              <span class="material-symbols-rounded text-lg" aria-hidden="true">assignment_turned_in</span>
              <span>All Tickets</span>
            </button>
            <button class="nav-link w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-slate-800" onclick="switchAdminView('escalations', this)">
              <span class="material-symbols-rounded text-lg" aria-hidden="true">bolt</span>
              <span>Escalations</span>
            </button>
            <button class="nav-link w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-slate-800" onclick="switchAdminView('engineers', this)">
              <span class="material-symbols-rounded text-lg" aria-hidden="true">group</span>
              <span>Engineers</span>
            </button>
            <button class="nav-link w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-slate-800" onclick="switchAdminView('wardmap', this)">
              <span class="material-symbols-rounded text-lg" aria-hidden="true">map</span>
              <span>Ward Map</span>
            </button>

            <p class="px-3 pt-4 text-[11px] uppercase tracking-[0.2em] text-slate-500 font-semibold">Insights</p>
            <button class="nav-link w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-slate-800" onclick="switchAdminView('analytics', this)">
              <span class="material-symbols-rounded text-lg" aria-hidden="true">analytics</span>
              <span>Analytics</span>
            </button>
            <button class="nav-link w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-slate-800" onclick="switchAdminView('reports', this)">
              <span class="material-symbols-rounded text-lg" aria-hidden="true">article</span>
              <span>Reports</span>
            </button>
          </nav>

          <div class="px-4 py-4 border-t border-slate-800 flex items-center justify-between text-xs">
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-[11px] font-semibold">DA</div>
              <div>
                <p class="font-semibold">District Admin</p>
                <p class="text-slate-500 text-[11px]">Superuser</p>
              </div>
            </div>
            <button onclick="logout()" class="px-2 py-1 rounded-md bg-slate-800 hover:bg-slate-700 flex items-center gap-1">
              <span class="material-symbols-rounded text-base" aria-hidden="true">logout</span>
            </button>
          </div>
        </aside>

        <!-- ADMIN MAIN -->
       <main class="flex-1 overflow-y-auto p-8 space-y-6 bg-gradient-to-br from-slate-50 via-green-50 to-blue-50">


          <!-- Overview -->
          <div id="admin-view-overview">
            <div class="flex items-center justify-between mb-4">
              <div>
                <h2 class="text-2xl font-bold text-slate-900">District Overview</h2>
                <p class="text-slate-500 text-sm">Live snapshot of all grievances across wards.</p>
              </div>
              <button class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow hover:bg-green-700 flex items-center gap-2">
                <span class="material-symbols-rounded text-base" aria-hidden="true">download</span> Export Report
              </button>
            </div>

          <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
  <!-- Total Tickets -->
  <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-5 rounded-xl shadow-lg hover:shadow-xl transition">
    <p class="text-xs font-bold text-blue-100 uppercase">Total Tickets</p>
    <p class="text-2xl font-bold text-white mt-1">1,245</p>
  </div>
  
  <!-- Resolved -->
  <div class="bg-gradient-to-br from-green-500 to-emerald-600 p-5 rounded-xl shadow-lg hover:shadow-xl transition">
    <p class="text-xs font-bold text-green-100 uppercase">Resolved</p>
    <p class="text-2xl font-bold text-white mt-1">850</p>
  </div>
  
  <!-- Pending -->
  <div class="bg-gradient-to-br from-orange-500 to-amber-600 p-5 rounded-xl shadow-lg hover:shadow-xl transition">
    <p class="text-xs font-bold text-orange-100 uppercase">Pending</p>
    <p class="text-2xl font-bold text-white mt-1">345</p>
  </div>
  
  <!-- Critical -->
  <div class="bg-gradient-to-br from-red-500 to-rose-600 p-5 rounded-xl shadow-lg hover:shadow-xl transition">
    <p class="text-xs font-bold text-red-100 uppercase">Critical</p>
    <p class="text-2xl font-bold text-white mt-1">50</p>
  </div>
</div>


            <div class="grid grid-cols-1 mt-5 lg:grid-cols-3 gap-6">
           <div class="lg:col-span-2 bg-gradient-to-br from-white to-blue-50 p-6 rounded-xl border border-blue-100 shadow-lg">

                <h3 class="font-bold text-slate-800 mb-4">Grievance Trends</h3>
                <canvas id="adminChart" height="120"></canvas>
              </div>
              <div class="bg-gradient-to-br from-white to-red-50 p-6 rounded-xl border border-red-100 shadow-lg">

                <h3 class="font-bold text-slate-800 mb-4">Recent Escalations</h3>
                <div class="space-y-4 text-sm">
                  <div class="p-3 bg-red-50 rounded-lg border border-red-100">
                    <div class="flex justify-between items-center mb-1">
                      <span class="text-xs font-bold text-red-600 bg-red-100 px-2 py-0.5 rounded">HIGH</span>
                      <span class="text-xs text-slate-400">2h ago</span>
                    </div>
                    <p class="font-semibold text-slate-800">Pipeline Burst - Ward 4</p>
                    <p class="text-xs text-slate-500">Water logging reported on main road.</p>
                  </div>
                  <div class="p-3 bg-orange-50 rounded-lg border border-orange-100">
                    <div class="flex justify-between items-center mb-1">
                      <span class="text-xs font-bold text-orange-600 bg-orange-100 px-2 py-0.5 rounded">MED</span>
                      <span class="text-xs text-slate-400">4h ago</span>
                    </div>
                    <p class="font-semibold text-slate-800">Street Light Failure</p>
                    <p class="text-xs text-slate-500">Multiple lights not working in Ward 12.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- All Tickets -->
          <div id="admin-view-alltickets" class="hidden">
  <div class="flex items-center justify-between mb-4">
    <div>
      <h2 class="text-2xl font-bold text-slate-900">All Tickets</h2>
      <p class="text-slate-500 text-sm">List of all registered grievances.</p>
    </div>
    <div class="flex gap-3">
      <input id="ticketSearch" type="text" class="hidden md:block px-3 py-2 rounded-lg border border-slate-200 text-sm bg-white" placeholder="Search by ID or keyword" oninput="filterTickets()" />
      <select id="ticketStatusFilter" class="px-3 py-2 rounded-lg border border-slate-200 text-sm bg-white" onchange="filterTickets()">
        <option value="all">All Status</option>
        <option value="Open">Open</option>
        <option value="In Progress">In Progress</option>
        <option value="Resolved">Resolved</option>
        <option value="Escalated">Escalated</option>
      </select>
    </div>
  </div>

  <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl border-2 border-green-200 shadow-lg overflow-hidden">
    <table class="min-w-full text-sm">
      <thead class="bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xs uppercase">
        <tr>
          <th class="px-4 py-3 text-left font-semibold">Ticket ID</th>
          <th class="px-4 py-3 text-left font-semibold">Title</th>
          <th class="px-4 py-3 text-left font-semibold">Category</th>
          <th class="px-4 py-3 text-left font-semibold">Ward</th>
          <th class="px-4 py-3 text-left font-semibold">Assigned To</th>
          <th class="px-4 py-3 text-left font-semibold">Status</th>
          <th class="px-4 py-3 text-left font-semibold">Created</th>
        </tr>
      </thead>
      <tbody id="ticketTableBody" class="divide-y divide-green-100 bg-white">
        <tr id="ticket-row-1001"
            data-status="Escalated"
            data-id="G-2025-1001"
            data-title="Pipeline Burst on Main Road"
            data-category="Water"
            data-ward="Ward 4"
            data-assignee="Rajesh Sharma"
            data-created="Today, 08:30"
            data-summary="Major water pipeline burst on the main road causing waterlogging and traffic disruption."
            data-resolution=""
            onclick="openTicketDrawer(this)"
            class="cursor-pointer hover:bg-slate-50">
          <td class="px-4 py-3 font-mono text-xs text-slate-500">G-2025-1001</td>
          <td class="px-4 py-3 font-semibold text-slate-800">Pipeline Burst on Main Road</td>
          <td class="px-4 py-3">Water</td>
          <td class="px-4 py-3">Ward 4</td>
          <td class="px-4 py-3">Rajesh Sharma</td>
          <td class="px-4 py-3" data-cell="status">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-[11px] font-bold bg-red-50 text-red-600">Escalated</span>
          </td>
          <td class="px-4 py-3 text-slate-500">Today, 08:30</td>
        </tr>

        <tr data-status="In Progress"
            data-id="G-2025-1002"
            data-title="Garbage Not Collected"
            data-category="Waste"
            data-ward="Ward 7"
            data-assignee="Meena Verma"
            data-created="Today, 07:10"
            data-summary="Garbage collection vehicle has not come for the last two days in the lane."
            data-resolution=""
            onclick="openTicketDrawer(this)"
            class="cursor-pointer hover:bg-slate-50">
          <td class="px-4 py-3 font-mono text-xs text-slate-500">G-2025-1002</td>
          <td class="px-4 py-3 font-semibold text-slate-800">Garbage Not Collected</td>
          <td class="px-4 py-3">Waste</td>
          <td class="px-4 py-3">Ward 7</td>
          <td class="px-4 py-3">Meena Verma</td>
          <td class="px-4 py-3" data-cell="status">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-[11px] font-bold bg-orange-50 text-orange-600">In Progress</span>
          </td>
          <td class="px-4 py-3 text-slate-500">Today, 07:10</td>
        </tr>

        <tr data-status="Open"
            data-id="G-2025-1003"
            data-title="Streetlight Not Working"
            data-category="Electric"
            data-ward="Ward 12"
            data-assignee="Unassigned"
            data-created="Yesterday"
            data-summary="Several streetlights on the main lane are not working, leading to dark patches at night."
            data-resolution=""
            onclick="openTicketDrawer(this)"
            class="cursor-pointer hover:bg-slate-50">
          <td class="px-4 py-3 font-mono text-xs text-slate-500">G-2025-1003</td>
          <td class="px-4 py-3 font-semibold text-slate-800">Streetlight Not Working</td>
          <td class="px-4 py-3">Electric</td>
          <td class="px-4 py-3">Ward 12</td>
          <td class="px-4 py-3">—</td>
          <td class="px-4 py-3" data-cell="status">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-[11px] font-bold bg-slate-100 text-slate-600">Open</span>
          </td>
          <td class="px-4 py-3 text-slate-500">Yesterday</td>
        </tr>

        <tr data-status="Resolved"
            data-id="G-2025-0994"
            data-title="Pothole Filled Near Market"
            data-category="Roads"
            data-ward="Ward 2"
            data-assignee="Suresh Kumar"
            data-created="09 Dec"
            data-summary="Large pothole near the main market circle was filled with premix and compacted."
            data-resolution="Pothole was cut to shape, filled with premix and compacted using roller."
            onclick="openTicketDrawer(this)"
            class="cursor-pointer hover:bg-slate-50">
          <td class="px-4 py-3 font-mono text-xs text-slate-500">G-2025-0994</td>
          <td class="px-4 py-3 font-semibold text-slate-800">Pothole Filled Near Market</td>
          <td class="px-4 py-3">Roads</td>
          <td class="px-4 py-3">Ward 2</td>
          <td class="px-4 py-3">Suresh Kumar</td>
          <td class="px-4 py-3" data-cell="status">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-[11px] font-bold bg-green-50 text-green-600">Resolved</span>
          </td>
          <td class="px-4 py-3 text-slate-500">09 Dec</td>
        </tr>

        <tr data-status="In Progress"
            data-id="G-2025-0988"
            data-title="No Water Supply Since Morning"
            data-category="Water"
            data-ward="Ward 5"
            data-assignee="Rajesh Sharma"
            data-created="09 Dec"
            data-summary="Complete water cut in the lane since early morning, suspected valve issue."
            data-resolution=""
            onclick="openTicketDrawer(this)"
            class="cursor-pointer hover:bg-slate-50">
          <td class="px-4 py-3 font-mono text-xs text-slate-500">G-2025-0988</td>
          <td class="px-4 py-3 font-semibold text-slate-800">No Water Supply Since Morning</td>
          <td class="px-4 py-3">Water</td>
          <td class="px-4 py-3">Ward 5</td>
          <td class="px-4 py-3">Rajesh Sharma</td>
          <td class="px-4 py-3" data-cell="status">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-[11px] font-bold bg-orange-50 text-orange-600">In Progress</span>
          </td>
          <td class="px-4 py-3 text-slate-500">09 Dec</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


          <!-- Escalations -->
    <div id="admin-view-escalations" class="hidden">
  <div class="flex items-center justify-between mb-4">
    <div>
      <h2 class="text-2xl font-bold text-slate-900">Escalations</h2>
      <p class="text-slate-500 text-sm">Tickets that breached SLA or marked as critical.</p>
    </div>
    <button class="bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-red-700 flex items-center gap-2">
      <span class="material-symbols-rounded text-base" aria-hidden="true">priority_high</span>
      Escalation Rules
    </button>
  </div>

  <div class="space-y-4">
    <div class="bg-gradient-to-br from-red-50 to-rose-50 p-5 rounded-xl border-2 border-red-300 shadow-lg flex flex-col gap-3">
      <div class="flex justify-between items-start">
        <div class="flex items-center gap-3">
          <span class="bg-gradient-to-br from-red-500 to-red-600 text-white p-3 rounded-xl shadow-md">
            <span class="material-symbols-rounded" aria-hidden="true">warning</span>
          </span>
          <div>
            <p class="text-xs font-bold text-red-700 uppercase tracking-wide">CRITICAL · BREACHED SLA</p>
            <h3 class="font-bold text-slate-900 text-lg">Pipeline Burst on Main Road</h3>
            <p class="text-xs text-slate-600 mt-1">Ticket ID: G-2025-1001 · Ward 4 · Reported 6h ago</p>
          </div>
        </div>
        <div>
          <span class="text-xs text-red-700 font-bold bg-red-200 px-3 py-1 rounded-full" id="escalation1BadgeNote">6h overdue</span>
        </div>
      </div>
      
      <div class="grid sm:grid-cols-3 gap-4 text-xs bg-white p-3 rounded-lg border border-red-200">
        <div>
          <p class="font-semibold text-slate-500">Assigned Engineer</p>
          <p class="font-bold text-slate-900">Rajesh Sharma</p>
        </div>
        <div>
          <p class="font-semibold text-slate-500">Current Status</p>
          <p id="escalation1Status" class="font-bold text-orange-600">On-site inspection</p>
        </div>
        <div>
          <p class="font-semibold text-slate-500">Next Action</p>
          <p id="escalation1NextAction" class="font-bold text-slate-900">Approve emergency budget</p>
        </div>
      </div>
      
      <p id="escalation1Resolution" class="text-xs text-green-700 bg-green-50 border border-green-100 rounded-lg px-3 py-2 hidden">
        Engineer note will appear here after completion.
      </p>
      
      <div class="flex gap-2 mt-2">
        <button class="px-4 py-2 rounded-lg text-xs font-bold bg-slate-900 text-white hover:bg-slate-800">View Ticket</button>
        <button class="px-4 py-2 rounded-lg text-xs font-bold bg-white border-2 border-slate-300 text-slate-700 hover:bg-slate-50">Call Engineer</button>
      </div>
    </div>

    <div class="bg-gradient-to-br from-orange-50 to-amber-50 p-5 rounded-xl border-2 border-orange-300 shadow-lg flex flex-col gap-3">
      <div class="flex justify-between items-start">
        <div class="flex items-center gap-3">
          <span class="bg-gradient-to-br from-orange-500 to-amber-600 text-white p-3 rounded-xl shadow-md">
            <span class="material-symbols-rounded" aria-hidden="true">report_problem</span>
          </span>
          <div>
            <p class="text-xs font-bold text-orange-700 uppercase tracking-wide">MEDIUM · CITIZEN RE-OPENED</p>
            <h3 class="font-bold text-slate-900 text-lg">Streetlight Not Working</h3>
            <p class="text-xs text-slate-600 mt-1">Ticket ID: G-2025-0975 · Ward 9 · Re-opened 2h ago</p>
          </div>
        </div>
        <div>
          <span class="text-xs text-orange-700 font-bold bg-orange-200 px-3 py-1 rounded-full">Citizen unhappy</span>
        </div>
      </div>
      
      <p class="text-sm text-slate-700 bg-white p-3 rounded-lg border border-orange-200">
        <span class="font-semibold text-orange-700">Citizen comment:</span> "Light works for one day then stops again. Needs proper fix, not temporary."
      </p>
      
      <div class="flex gap-2 mt-2">
        <button class="px-4 py-2 rounded-lg text-xs font-bold bg-slate-900 text-white hover:bg-slate-800">Reassign</button>
        <button class="px-4 py-2 rounded-lg text-xs font-bold bg-white border-2 border-slate-300 text-slate-700 hover:bg-slate-50">View History</button>
      </div>
    </div>
  </div>
</div>


          <!-- Engineers -->
          <div id="admin-view-engineers" class="hidden">
  <div class="flex items-center justify-between mb-4">
    <div>
      <h2 class="text-2xl font-bold text-slate-900">Engineers</h2>
      <p class="text-slate-500 text-sm">Manage field engineers and their workloads.</p>
    </div>
    <button class="bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-slate-800 flex items-center gap-2">
      <span class="material-symbols-rounded text-base" aria-hidden="true">group_add</span>
      Add Engineer
    </button>
  </div>

  <div class="bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl border-2 border-orange-200 shadow-lg overflow-hidden">
    <table class="min-w-full text-sm">
      <thead class="bg-gradient-to-r from-orange-600 to-amber-600 text-white text-xs uppercase">
        <tr>
          <th class="px-4 py-3 text-left font-semibold">Engineer</th>
          <th class="px-4 py-3 text-left font-semibold">ID</th>
          <th class="px-4 py-3 text-left font-semibold">Primary Ward</th>
          <th class="px-4 py-3 text-left font-semibold">Active Tickets</th>
          <th class="px-4 py-3 text-left font-semibold">Today</th>
          <th class="px-4 py-3 text-left font-semibold">Status</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-orange-100 bg-white">
        <tr>
          <td class="px-4 py-3 font-semibold text-slate-900 flex items-center gap-2">
            <span class="inline-flex w-7 h-7 rounded-full bg-slate-100 items-center justify-center text-xs font-bold">RS</span>
            Rajesh Sharma
          </td>
          <td class="px-4 py-3 text-xs font-mono text-slate-500">ENG-1022</td>
          <td class="px-4 py-3">Ward 4 & 5</td>
          <td class="px-4 py-3">3</td>
          <td class="px-4 py-3 text-slate-500">On-site visit • 2 tasks</td>
          <td class="px-4 py-3">
            <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-[11px] font-bold bg-green-50 text-green-700">
              <span class="w-1.5 h-1.5 rounded-full bg-green-500"></span> Online
            </span>
          </td>
        </tr>
        <tr>
          <td class="px-4 py-3 font-semibold text-slate-900 flex items-center gap-2">
            <span class="inline-flex w-7 h-7 rounded-full bg-slate-100 items-center justify-center text-xs font-bold">MV</span>
            Meena Verma
          </td>
          <td class="px-4 py-3 text-xs font-mono text-slate-500">ENG-1045</td>
          <td class="px-4 py-3">Ward 7 & 8</td>
          <td class="px-4 py-3">4</td>
          <td class="px-4 py-3 text-slate-500">Morning shift • 1 closed</td>
          <td class="px-4 py-3">
            <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-[11px] font-bold bg-orange-50 text-orange-700">
              <span class="w-1.5 h-1.5 rounded-full bg-orange-500"></span> Busy
            </span>
          </td>
        </tr>
        <tr>
          <td class="px-4 py-3 font-semibold text-slate-900 flex items-center gap-2">
            <span class="inline-flex w-7 h-7 rounded-full bg-slate-100 items-center justify-center text-xs font-bold">SK</span>
            Suresh Kumar
          </td>
          <td class="px-4 py-3 text-xs font-mono text-slate-500">ENG-0991</td>
          <td class="px-4 py-3">Ward 1 & 2</td>
          <td class="px-4 py-3">1</td>
          <td class="px-4 py-3 text-slate-500">On call</td>
          <td class="px-4 py-3">
            <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-[11px] font-bold bg-slate-100 text-slate-700">
              <span class="w-1.5 h-1.5 rounded-full bg-slate-400"></span> Offline
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


          <!-- Ward Map -->
          <div id="admin-view-wardmap" class="hidden">
  <div class="flex items-center justify-between mb-4">
    <div>
      <h2 class="text-2xl font-bold text-slate-900">Ward Map</h2>
      <p class="text-slate-500 text-sm">Ticket density across wards (demo view).</p>
    </div>
    <button class="bg-white border border-slate-200 px-4 py-2 rounded-lg text-sm font-bold text-slate-700 hover:bg-slate-50 flex items-center gap-2">
      <span class="material-symbols-rounded text-base" aria-hidden="true">download</span>
      Download GeoJSON
    </button>
  </div>

  <div class="grid lg:grid-cols-4 gap-6">
    <div class="lg:col-span-3 bg-white p-4 rounded-xl border border-slate-200 shadow-lg overflow-hidden">
      <div id="wardMapContainer" class="h-96 rounded-lg bg-slate-100 relative">
        <div class="absolute inset-0 bg-gradient-to-br from-blue-100 to-teal-100 flex items-center justify-center">
          <div class="text-center">
            <span class="material-symbols-rounded text-4xl text-slate-400 mb-2 block" aria-hidden="true">map</span>
            <p class="text-sm text-slate-500">Interactive Ward Map Loading...</p>
          </div>
        </div>
      </div>
      <div class="mt-3 grid grid-cols-3 gap-2 text-xs">
        <div class="flex items-center gap-2 p-2 bg-red-50 rounded">
          <span class="w-2 h-2 bg-red-500 rounded-full"></span>
          <span>High (20+)</span>
        </div>
        <div class="flex items-center gap-2 p-2 bg-orange-50 rounded">
          <span class="w-2 h-2 bg-orange-500 rounded-full"></span>
          <span>Medium (10-19)</span>
        </div>
        <div class="flex items-center gap-2 p-2 bg-green-50 rounded">
          <span class="w-2 h-2 bg-green-500 rounded-full"></span>
          <span>Low (&lt;10)</span>
        </div>
      </div>
    </div>
    
    <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border-2 border-green-200 shadow-lg">
      <h3 class="font-bold text-slate-900 mb-4 text-lg">Tickets by Ward</h3>
      <div class="space-y-3">
        <div class="flex justify-between items-center bg-white p-3 rounded-lg border border-red-200 hover:shadow-md transition">
          <div class="flex items-center gap-2">
            <span class="w-3 h-3 bg-red-500 rounded-full"></span>
            <span class="font-semibold text-slate-800">Ward 4</span>
          </div>
          <span class="font-bold text-red-600 text-lg">32</span>
        </div>
        
        <div class="flex justify-between items-center bg-white p-3 rounded-lg border border-orange-200 hover:shadow-md transition">
          <div class="flex items-center gap-2">
            <span class="w-3 h-3 bg-orange-500 rounded-full"></span>
            <span class="font-semibold text-slate-800">Ward 7</span>
          </div>
          <span class="font-bold text-orange-600 text-lg">24</span>
        </div>
        
        <div class="flex justify-between items-center bg-white p-3 rounded-lg border border-yellow-200 hover:shadow-md transition">
          <div class="flex items-center gap-2">
            <span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
            <span class="font-semibold text-slate-800">Ward 12</span>
          </div>
          <span class="font-bold text-yellow-600 text-lg">18</span>
        </div>
        
        <div class="flex justify-between items-center bg-white p-3 rounded-lg border border-green-200 hover:shadow-md transition">
          <div class="flex items-center gap-2">
            <span class="w-3 h-3 bg-green-500 rounded-full"></span>
            <span class="font-semibold text-slate-800">Ward 2</span>
          </div>
          <span class="font-bold text-green-600 text-lg">12</span>
        </div>
        
        <div class="flex justify-between items-center bg-white p-3 rounded-lg border border-slate-200 hover:shadow-md transition">
          <div class="flex items-center gap-2">
            <span class="w-3 h-3 bg-slate-400 rounded-full"></span>
            <span class="font-semibold text-slate-800">Others</span>
          </div>
          <span class="font-bold text-slate-600 text-lg">59</span>
        </div>
      </div>
      <p class="text-xs text-slate-500 mt-4 italic">Data above is sample to show how ward-wise summary will look.</p>
    </div>
  </div>
</div>


          <!-- Analytics -->
     <!-- Analytics -->
<div id="admin-view-analytics" class="hidden">
  <div class="flex items-center justify-between mb-6">
    <div>
      <h2 class="text-2xl font-bold text-slate-900">Analytics</h2>
      <p class="text-slate-500 text-sm">
        Deeper insights into grievances and performance.
      </p>
    </div>
    <div>
      <button
        class="bg-white border border-slate-200 px-4 py-2 rounded-lg text-sm font-bold text-slate-700 hover:bg-slate-50 flex items-center gap-2">
        <span class="material-symbols-rounded text-base" aria-hidden="true">
          settings_input_component
        </span>
        Configure KPIs
      </button>
    </div>
  </div>

  <!-- Charts and Data Layout -->
  <div class="grid lg:grid-cols-4 gap-4 mb-6">
    <!-- Left: Small Chart Cards -->
    <div class="lg:col-span-3">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- KPI Overview Chart Card -->
        <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
          <h4 class="font-bold text-sm text-slate-800 mb-3">KPI Trends</h4>
          <canvas id="adminAnalyticsChart" height="140"></canvas>
          <p class="text-[10px] text-slate-400 mt-2">Weekly performance</p>
        </div>

        <!-- Status Distribution Chart Card -->
        <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
          <h4 class="font-bold text-sm text-slate-800 mb-3">Status Distribution</h4>
          <canvas id="statusDistributionChart" height="140"></canvas>
          <p class="text-[10px] text-slate-400 mt-2">By complaint state</p>
        </div>

        <!-- Resolution Timeline Chart Card -->
        <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm md:col-span-2">
          <h4 class="font-bold text-sm text-slate-800 mb-3">Resolution Timeline</h4>
          <canvas id="resolutionTimelineChart" height="100"></canvas>
          <p class="text-[10px] text-slate-400 mt-2">Complaints resolved by day</p>
        </div>
      </div>
    </div>

    <!-- Right: Raw Data Section (Sticky) -->
    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm h-fit sticky top-20">
      <h4 class="font-bold text-sm text-slate-800 mb-3 flex items-center gap-2">
        <span class="material-symbols-rounded text-base text-green-600" aria-hidden="true">data_usage</span>
        Raw Data
      </h4>
      
      <div class="space-y-3">
        <!-- SLA Compliance -->
        <div class="pb-3 border-b border-slate-200">
          <p class="text-xs font-bold text-green-700 uppercase tracking-wide">SLA</p>
          <p class="text-2xl font-bold text-green-800 mt-1">92%</p>
          <div class="mt-1.5 bg-green-100 rounded-full h-1.5">
            <div class="bg-green-600 h-1.5 rounded-full" style="width: 92%"></div>
          </div>
        </div>

        <!-- Repeat Complaints -->
        <div class="pb-3 border-b border-slate-200">
          <p class="text-xs font-bold text-orange-700 uppercase tracking-wide">Repeat</p>
          <p class="text-2xl font-bold text-orange-800 mt-1">7%</p>
          <div class="mt-1.5 bg-orange-100 rounded-full h-1.5">
            <div class="bg-orange-600 h-1.5 rounded-full" style="width: 7%"></div>
          </div>
        </div>

        <!-- Avg First Response -->
        <div class="pb-3 border-b border-slate-200">
          <p class="text-xs font-bold text-blue-700 uppercase tracking-wide">Response</p>
          <p class="text-2xl font-bold text-blue-800 mt-1">1.2h</p>
          <p class="text-[10px] text-blue-600 mt-1">Target: &lt; 2h ✓</p>
        </div>

        <!-- Citizen Rating -->
        <div class="pb-3 border-b border-slate-200">
          <p class="text-xs font-bold text-purple-700 uppercase tracking-wide">Rating</p>
          <p class="text-2xl font-bold text-purple-800 mt-1">4.8/5</p>
          <div class="text-sm mt-1">★★★★★</div>
        </div>

        <!-- Summary Stats -->
        <div class="pt-3 mt-3 border-t border-slate-200">
          <p class="text-xs font-bold text-slate-700 uppercase tracking-wide mb-2">Summary</p>
          <div class="space-y-1.5 text-xs">
            <div class="flex justify-between">
              <span class="text-slate-600">Total:</span>
              <span class="font-bold">2,487</span>
            </div>
            <div class="flex justify-between">
              <span class="text-slate-600">Resolved:</span>
              <span class="font-bold text-green-700">2,287</span>
            </div>
            <div class="flex justify-between">
              <span class="text-slate-600">Pending:</span>
              <span class="font-bold text-orange-700">147</span>
            </div>
            <div class="flex justify-between">
              <span class="text-slate-600">Escalated:</span>
              <span class="font-bold text-red-700">53</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom cards: Backlog + Top Categories (unchanged) -->
  <div class="grid md:grid-cols-2 gap-6">
    <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
      <h3 class="font-bold text-slate-800 mb-4">Backlog by Aging</h3>
      <ul class="space-y-3 text-sm">
        <li class="flex items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-green-500"></span>
            <span>0–24 hours</span>
          </div>
          <span class="font-bold text-slate-900">118 tickets</span>
        </li>
        <li class="flex items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-yellow-400"></span>
            <span>1–3 days</span>
          </div>
          <span class="font-bold text-slate-900">72 tickets</span>
        </li>
        <li class="flex items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-orange-500"></span>
            <span>3–7 days</span>
          </div>
          <span class="font-bold text-slate-900">39 tickets</span>
        </li>
        <li class="flex items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-red-500"></span>
            <span>&gt; 7 days</span>
          </div>
          <span class="font-bold text-slate-900">16 tickets</span>
        </li>
      </ul>
    </div>

    <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
      <h3 class="font-bold text-slate-800 mb-4">Top Categories by Volume</h3>
      <div class="space-y-4 text-sm">
        <div>
          <div class="flex justify-between mb-1">
            <span>Water</span>
            <span class="font-bold text-slate-900">40</span>
          </div>
          <div class="w-full h-2 rounded-full bg-slate-100">
            <div class="h-2 rounded-full bg-blue-500" style="width:40%"></div>
          </div>
          <p class="text-xs text-slate-500 mt-1">45 complaints</p>
        </div>

        <div>
          <div class="flex justify-between mb-1">
            <span>Roads</span>
            <span class="font-bold text-slate-900">35</span>
          </div>
          <div class="w-full h-2 rounded-full bg-slate-100">
            <div class="h-2 rounded-full bg-slate-700" style="width:35%"></div>
          </div>
          <p class="text-xs text-slate-500 mt-1">215 complaints</p>
        </div>

        <div>
          <div class="flex justify-between mb-1">
            <span>Electric</span>
            <span class="font-bold text-slate-900">15</span>
          </div>
          <div class="w-full h-2 rounded-full bg-slate-100">
            <div class="h-2 rounded-full bg-yellow-400" style="width:15%"></div>
          </div>
          <p class="text-xs text-slate-500 mt-1">92 complaints</p>
        </div>

        <div>
          <div class="flex justify-between mb-1">
            <span>Waste</span>
            <span class="font-bold text-slate-900">10</span>
          </div>
          <div class="w-full h-2 rounded-full bg-slate-100">
            <div class="h-2 rounded-full bg-red-500" style="width:10%"></div>
          </div>
          <p class="text-xs text-slate-500 mt-1">61 complaints</p>
        </div>
      </div>
    </div>
  </div>
</div>

          <!-- Reports -->
          <div id="admin-view-reports" class="hidden">
            <div class="flex items-center justify-between mb-6">
              <div>
                <h2 class="text-2xl font-bold text-slate-900">Reports</h2>
                <p class="text-slate-500 text-sm">Download periodic summaries for review and audits.</p>
              </div>
              <button class="bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-slate-800 flex items-center gap-2">
                <span class="material-symbols-rounded text-base" aria-hidden="true">add_chart</span>
                Create Custom Report
              </button>
            </div>

            <!-- Key Metrics Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
              <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                <p class="text-xs font-bold text-slate-600 uppercase">Total Reports</p>
                <p class="text-2xl font-bold text-slate-900 mt-2">24</p>
                <p class="text-xs text-slate-500 mt-1">This year</p>
              </div>
              <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                <p class="text-xs font-bold text-green-700 uppercase">Completed</p>
                <p class="text-2xl font-bold text-green-700 mt-2">22</p>
                <p class="text-xs text-slate-500 mt-1">On schedule</p>
              </div>
              <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                <p class="text-xs font-bold text-orange-700 uppercase">Pending</p>
                <p class="text-2xl font-bold text-orange-700 mt-2">2</p>
                <p class="text-xs text-slate-500 mt-1">In progress</p>
              </div>
              <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                <p class="text-xs font-bold text-blue-700 uppercase">Downloads</p>
                <p class="text-2xl font-bold text-blue-700 mt-2">156</p>
                <p class="text-xs text-slate-500 mt-1">This month</p>
              </div>
            </div>

            <!-- Charts Row -->
            <div class="grid lg:grid-cols-2 gap-4 mb-6">
              <!-- Report Type Distribution -->
              <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                <h4 class="font-bold text-sm text-slate-800 mb-3">Report Types Generated</h4>
                <canvas id="reportTypeChart" height="120"></canvas>
              </div>

              <!-- Monthly Report Trend -->
              <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                <h4 class="font-bold text-sm text-slate-800 mb-3">Monthly Trend</h4>
                <canvas id="reportTrendChart" height="120"></canvas>
              </div>
            </div>

            <!-- Report Cards -->
            <div class="mb-6">
              <h3 class="font-bold text-slate-900 text-lg mb-4">Available Reports</h3>
              <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl border border-green-200 shadow-sm p-4 hover:shadow-md transition">
                  <div>
                    <p class="text-xs font-bold text-green-700 uppercase">Monthly</p>
                    <h3 class="font-bold text-slate-900 text-sm mt-1">District Performance Summary</h3>
                    <p class="text-xs text-slate-600 mt-2">Overview of all tickets, resolution rates, and top wards for the last month.</p>
                  </div>
                  <button class="mt-3 w-full bg-green-700 text-white py-2 rounded-lg text-xs font-bold hover:bg-green-800 flex items-center justify-center gap-1">
                    <span class="material-symbols-rounded text-sm">download</span>
                    Download PDF
                  </button>
                </div>

                <div class="bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl border border-orange-200 shadow-sm p-4 hover:shadow-md transition">
                  <div>
                    <p class="text-xs font-bold text-orange-700 uppercase">Weekly</p>
                    <h3 class="font-bold text-slate-900 text-sm mt-1">Escalation & SLA Breach Report</h3>
                    <p class="text-xs text-slate-600 mt-2">Details of all escalated tickets and SLA violations for internal review.</p>
                  </div>
                  <button class="mt-3 w-full bg-orange-700 text-white py-2 rounded-lg text-xs font-bold hover:bg-orange-800 flex items-center justify-center gap-1">
                    <span class="material-symbols-rounded text-sm">download</span>
                    Download Excel
                  </button>
                </div>

                <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl border border-blue-200 shadow-sm p-4 hover:shadow-md transition">
                  <div>
                    <p class="text-xs font-bold text-blue-700 uppercase">Quarterly</p>
                    <h3 class="font-bold text-slate-900 text-sm mt-1">Budget Utilisation & Impact</h3>
                    <p class="text-xs text-slate-600 mt-2">How funds were used across wards and categories with outcome metrics.</p>
                  </div>
                  <button class="mt-3 w-full bg-blue-700 text-white py-2 rounded-lg text-xs font-bold hover:bg-blue-800 flex items-center justify-center gap-1">
                    <span class="material-symbols-rounded text-sm">download</span>
                    Download PPT
                  </button>
                </div>
              </div>
            </div>

            <!-- Additional Reports Section -->
            <div class="bg-gradient-to-br from-slate-50 to-slate-100 p-5 rounded-lg border border-slate-200">
              <h4 class="font-bold text-slate-900 mb-3 flex items-center gap-2">
                <span class="material-symbols-rounded text-lg text-slate-700">description</span>
                Custom & Archived Reports
              </h4>
              <div class="space-y-2">
                <div class="flex justify-between items-center p-3 bg-white rounded border border-slate-200 hover:bg-slate-50 transition">
                  <div>
                    <p class="text-sm font-semibold text-slate-900">Q3 2025 Performance Review</p>
                    <p class="text-xs text-slate-500">Generated on Sep 30, 2025</p>
                  </div>
                  <button class="text-blue-600 hover:text-blue-800 text-sm font-bold flex items-center gap-1">
                    <span class="material-symbols-rounded text-base">download</span>
                  </button>
                </div>
                <div class="flex justify-between items-center p-3 bg-white rounded border border-slate-200 hover:bg-slate-50 transition">
                  <div>
                    <p class="text-sm font-semibold text-slate-900">H1 2025 SLA Compliance Analysis</p>
                    <p class="text-xs text-slate-500">Generated on Jun 30, 2025</p>
                  </div>
                  <button class="text-blue-600 hover:text-blue-800 text-sm font-bold flex items-center gap-1">
                    <span class="material-symbols-rounded text-base">download</span>
                  </button>
                </div>
              </div>
            </div>
          </div>

      </div>
    </section>

    <!-- ENGINEER DASHBOARD -->
    <section id="dash-engineer" class="page-enter hidden">
  <div class="min-h-screen bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 relative overflow-hidden">
    <div class="absolute top-20 right-20 w-96 h-96 bg-orange-300 rounded-full blur-3xl opacity-20"></div>
    <div class="absolute bottom-20 left-20 w-96 h-96 bg-yellow-300 rounded-full blur-3xl opacity-20"></div>
    
    <div class="relative z-10 max-w-5xl mx-auto px-6 py-10">
      <div class="flex justify-between items-end mb-8">
        <div>
          <span class="text-xs font-bold text-orange-600 bg-orange-100 px-3 py-1 rounded-full uppercase">Field Engineer Mode</span>
          <h2 class="text-3xl font-bold text-slate-900 mt-2">My Task List</h2>
        </div>
        <div class="text-right">
          <p class="text-sm font-bold text-slate-500">Engineer <span class="text-slate-900">Rajesh Sharma</span></p>
          <p class="text-xs text-slate-400">ID ENG-1022</p>
        </div>
      </div>

      <div class="space-y-4">
        <div id="engTask1Card" class="bg-white rounded-2xl border-2 border-red-200 shadow-lg hover:shadow-2xl transition-all overflow-hidden">
          <div class="bg-gradient-to-r from-red-50 to-rose-50 p-6 border-b-2 border-red-100">
            <div class="flex justify-between items-start mb-4">
              <div class="flex items-center gap-4">
                <div class="bg-gradient-to-br from-red-500 to-rose-600 p-4 rounded-2xl text-white shadow-lg">
                  <span class="material-symbols-rounded text-3xl" aria-hidden="true">warning</span>
                </div>
                <div>
                  <h3 class="font-bold text-xl text-slate-900">Fix Open Manhole</h3>
                  <p class="text-sm text-slate-600 mt-1">Location: <span id="engTask1Location" class="font-semibold">Near Govt School, Sector 4</span></p>
                </div>
              </div>
              <span id="engTask1Priority" data-state="pending" class="bg-red-100 text-red-700 text-xs font-bold px-4 py-2 rounded-full shadow-sm border border-red-300">Critical</span>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 bg-white p-4 rounded-xl border border-red-100 shadow-sm">
              <div>
                <p class="text-xs font-bold text-slate-400 uppercase">Deadline</p>
                <p id="engTask1Deadline" class="text-sm font-bold text-red-600 mt-1">Today, 5:00 PM</p>
              </div>
              <div>
                <p class="text-xs font-bold text-slate-400 uppercase">Contact</p>
                <p class="text-sm font-bold text-slate-800 mt-1">+91 98765 43210</p>
              </div>
            </div>
          </div>

          <div class="p-6">
            <div class="flex gap-3 mb-4">
              <button 
                id="engTask1UpdateBtn"
                class="flex-1 bg-gradient-to-r from-slate-900 to-slate-800 text-white px-6 py-3 rounded-xl text-sm font-bold shadow-lg hover:shadow-xl hover:scale-105 transition-all flex items-center justify-center gap-2" 
                onclick="openResolutionModal()"
              >
                <span class="material-symbols-rounded text-base" aria-hidden="true">task_alt</span>
                Update Status
              </button>
              <button 
                class="px-6 py-3 rounded-xl text-sm font-bold text-slate-600 border-2 border-slate-300 hover:bg-slate-50 transition-all flex items-center gap-2" 
                onclick="viewEngineerTaskOnMap()"
              >
                <span class="material-symbols-rounded text-base" aria-hidden="true">map</span>
                <span class="hidden sm:inline">View on Map</span>
              </button>
            </div>

            <div id="engTask1Resolution" class="mt-4 hidden bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-4 shadow-sm">
              <div class="flex items-center gap-2 mb-2">
                <span class="material-symbols-rounded text-green-600 text-lg" aria-hidden="true">check_circle</span>
                <p class="text-xs font-bold text-green-700 uppercase">Resolution Note</p>
              </div>
              <p id="engTask1ResolutionText" class="text-sm text-green-900"></p>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-2xl border-2 border-green-200 shadow-lg hover:shadow-xl transition-all overflow-hidden opacity-90">
          <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 border-b-2 border-green-100">
            <div class="flex justify-between items-start mb-4">
              <div class="flex items-center gap-4">
                <div class="bg-gradient-to-br from-blue-500 to-cyan-600 p-4 rounded-2xl text-white shadow-lg">
                  <span class="material-symbols-rounded text-3xl" aria-hidden="true">water_drop</span>
                </div>
                <div>
                  <h3 class="font-bold text-xl text-slate-900">Water Leakage Inspection</h3>
                  <p class="text-sm text-slate-600 mt-1">Location: <span class="font-semibold">Market Road, Ward 2</span></p>
                </div>
              </div>
              <span class="bg-green-100 text-green-700 text-xs font-bold px-4 py-2 rounded-full shadow-sm border border-green-300 flex items-center gap-1">
                <span class="material-symbols-rounded text-sm" aria-hidden="true">check</span>
                Completed
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="max-w-2xl mx-auto px-6 pb-16 mt-12">
      <div class="bg-gradient-to-r from-green-900 to-emerald-900 rounded-3xl p-8 text-white relative overflow-hidden shadow-2xl">
        <div class="absolute inset-0 opacity-10">
          <div class="absolute top-0 right-0 w-48 h-48 bg-yellow-400 rounded-full blur-3xl"></div>
          <div class="absolute bottom-0 left-0 w-48 h-48 bg-green-400 rounded-full blur-3xl"></div>
        </div>
        <div class="relative z-10">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
              <span class="material-symbols-rounded text-2xl" aria-hidden="true">support_agent</span>
            </div>
            <h3 class="text-xl font-bold">Need Help?</h3>
          </div>
          <p class="text-green-100 mb-4">Contact the District Control Room for assistance with ticket assignment, equipment, or urgent issues.</p>
          <button class="bg-white text-green-700 px-6 py-3 rounded-xl font-bold hover:bg-green-50 transition shadow-lg flex items-center gap-2">
            <span class="material-symbols-rounded text-base" aria-hidden="true">call</span>
            Call Support
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

    <!-- CITIZEN DASHBOARD -->
<!-- CITIZEN DASHBOARD -->
<section id="dash-citizen" class="page-enter hidden relative overflow-hidden">
  
  <!-- Background with Nature Theme -->
  <div class="absolute inset-0 bg-gradient-to-br from-lime-50 via-green-50 to-yellow-50">
    <div class="absolute top-20 right-20 w-96 h-96 bg-green-200 rounded-full blur-3xl opacity-30"></div>
    <div class="absolute bottom-20 left-20 w-96 h-96 bg-yellow-200 rounded-full blur-3xl opacity-30"></div>
  </div>

  <div class="relative z-10 max-w-6xl mx-auto px-6 py-10">
    
    <!-- Header -->
    <div class="flex justify-between items-center mb-8">
      <div>
        <span class="text-xs font-bold text-green-700 bg-green-100 px-3 py-1 rounded-full uppercase">Citizen Dashboard</span>
        <h2 class="text-3xl font-extrabold text-slate-900 mt-2">My Dashboard</h2>
      </div>
      <button 
        onclick="showSection('grievance')" 
        class="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:from-green-700 hover:to-emerald-700 transition flex items-center gap-2"
      >
        <span class="material-symbols-rounded" aria-hidden="true">add_circle</span>
        New Complaint
      </button>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
      
      <!-- LEFT COLUMN - Profile & Overview -->
      <div class="md:col-span-1 space-y-6">
        
        <!-- Profile Card -->
        <div class="bg-white rounded-3xl shadow-lg border-2 border-green-100 p-8 text-center relative overflow-hidden">
          <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-200 to-yellow-200 rounded-full blur-3xl opacity-30"></div>
          
          <div class="relative z-10">
            <!-- Avatar -->
            <div class="w-24 h-24 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl font-extrabold text-green-700 border-4 border-white shadow-lg uppercase">
              PK
            </div>
            
            <!-- Name & Details -->
            <h3 class="text-xl font-bold text-slate-900">Pradeep Kalsaria</h3>
            <p class="text-sm text-slate-500 mt-1">Active Citizen • +91 96533 00677</p>
            
            <!-- Badges -->
            <div class="flex justify-center gap-2 mt-4">
              <div class="bg-green-100 text-green-700 px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 border border-green-200">
                <span class="material-symbols-rounded text-sm" aria-hidden="true">verified</span>
                Verified
              </div>
              <div class="bg-orange-100 text-orange-700 px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 border border-orange-200">
                <span class="material-symbols-rounded text-sm" aria-hidden="true">emoji_events</span>
                Top Reporter
              </div>
            </div>
          </div>
        </div>

        <!-- Overview Card -->
        <div class="bg-white rounded-2xl shadow-lg border-2 border-yellow-100 p-6">
          <div class="flex items-center gap-2 mb-4">
            <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
              <span class="material-symbols-rounded text-yellow-700 text-lg" aria-hidden="true">analytics</span>
            </div>
            <h4 class="font-bold text-slate-800">Overview</h4>
          </div>
          
          <div class="space-y-4">
            <!-- Total Filed -->
            <div class="flex justify-between items-center p-3 bg-gradient-to-r from-slate-50 to-slate-100 rounded-xl">
              <div class="flex items-center gap-2">
                <span class="material-symbols-rounded text-slate-600" aria-hidden="true">description</span>
                <span class="text-sm text-slate-600 font-semibold">Total Filed</span>
              </div>
              <span class="font-bold text-2xl text-slate-900">12</span>
            </div>
            
            <!-- Resolved -->
            <div class="flex justify-between items-center p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100">
              <div class="flex items-center gap-2">
                <span class="material-symbols-rounded text-green-600" aria-hidden="true">check_circle</span>
                <span class="text-sm text-green-700 font-semibold">Resolved</span>
              </div>
              <span class="font-bold text-2xl text-green-600">8</span>
            </div>
            
            <!-- Pending -->
            <div class="flex justify-between items-center p-3 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl border border-orange-100">
              <div class="flex items-center gap-2">
                <span class="material-symbols-rounded text-orange-600" aria-hidden="true">pending</span>
                <span class="text-sm text-orange-700 font-semibold">Pending</span>
              </div>
              <span class="font-bold text-2xl text-orange-600">4</span>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT COLUMN - Recent Activity -->
      <div class="md:col-span-2 space-y-4">
        <div class="flex items-center gap-2 mb-4">
          <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
            <span class="material-symbols-rounded text-green-700 text-lg" aria-hidden="true">history</span>
          </div>
          <h4 class="font-bold text-slate-800 text-lg">Recent Activity</h4>
        </div>

        <!-- Activity Card 1 - In Progress -->
        <div class="bg-white rounded-2xl shadow-lg border-l-4 border-orange-500 p-6 hover:shadow-xl transition cursor-pointer group" onclick="showSection('track')">
          <div class="flex justify-between items-start mb-3">
            <div class="flex items-center gap-3">
              <div class="w-12 h-12 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-xl flex items-center justify-center group-hover:scale-110 transition">
                <span class="material-symbols-rounded text-orange-600 text-2xl" aria-hidden="true">water_drop</span>
              </div>
              <div>
                <h4 class="font-bold text-lg text-slate-900 group-hover:text-green-700 transition">Water Contamination</h4>
                <p class="text-sm text-slate-500">Reported on 12 Dec • Ward 4 • Ticket #G-9921</p>
              </div>
            </div>
            <span class="bg-gradient-to-r from-orange-100 to-yellow-100 text-orange-700 px-3 py-1.5 rounded-lg text-xs font-bold border border-orange-200">
              In Progress
            </span>
          </div>
          
          <div class="flex gap-4 mt-4 pt-4 border-t border-slate-100">
            <button class="text-xs font-bold text-slate-600 hover:text-green-700 flex items-center gap-1 transition">
              <span class="material-symbols-rounded text-base" aria-hidden="true">visibility</span>
              View Details
            </button>
            <button class="text-xs font-bold text-slate-600 hover:text-green-700 flex items-center gap-1 transition">
              <span class="material-symbols-rounded text-base" aria-hidden="true">chat</span>
              Comments (2)
            </button>
          </div>
        </div>

        <!-- Activity Card 2 - Resolved -->
        <div class="bg-white rounded-2xl shadow-lg border-l-4 border-green-500 p-6 hover:shadow-xl transition group opacity-95">
          <div class="flex justify-between items-start mb-3">
            <div class="flex items-center gap-3">
              <div class="w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-xl flex items-center justify-center group-hover:scale-110 transition">
                <span class="material-symbols-rounded text-green-600 text-2xl" aria-hidden="true">lightbulb</span>
              </div>
              <div>
                <h4 class="font-bold text-lg text-slate-900">Street Light Repair</h4>
                <p class="text-sm text-slate-500">Reported on 01 Dec • Ward 12 • Ticket #G-8820</p>
              </div>
            </div>
            <span class="bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 px-3 py-1.5 rounded-lg text-xs font-bold border border-green-200 flex items-center gap-1">
              <span class="material-symbols-rounded text-sm" aria-hidden="true">check</span>
              Resolved
            </span>
          </div>
        </div>

        <!-- Activity Card 3 - Pending -->
        <div class="bg-white rounded-2xl shadow-lg border-l-4 border-yellow-400 p-6 hover:shadow-xl transition group">
          <div class="flex justify-between items-start mb-3">
            <div class="flex items-center gap-3">
              <div class="w-12 h-12 bg-gradient-to-br from-yellow-100 to-orange-100 rounded-xl flex items-center justify-center group-hover:scale-110 transition">
                <span class="material-symbols-rounded text-yellow-600 text-2xl" aria-hidden="true">delete</span>
              </div>
              <div>
                <h4 class="font-bold text-lg text-slate-900">Garbage Not Collected</h4>
                <p class="text-sm text-slate-500">Reported on 09 Dec • Ward 7 • Ticket #G-9910</p>
              </div>
            </div>
            <span class="bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-700 px-3 py-1.5 rounded-lg text-xs font-bold border border-yellow-200">
              Pending
            </span>
          </div>
        </div>

        <!-- Quick Stats Banner -->
        <div class="bg-gradient-to-r from-green-600 via-emerald-600 to-green-700 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden">
          <div class="absolute top-0 right-0 w-32 h-32 bg-white rounded-full blur-3xl opacity-10"></div>
          <div class="relative z-10 grid grid-cols-3 gap-4 text-center">
            <div>
              <p class="text-3xl font-extrabold">92%</p>
              <p class="text-xs text-green-100 mt-1 uppercase font-semibold">Success Rate</p>
            </div>
            <div>
              <p class="text-3xl font-extrabold">3.5d</p>
              <p class="text-xs text-green-100 mt-1 uppercase font-semibold">Avg Resolution</p>
            </div>
            <div>
              <p class="text-3xl font-extrabold">4.8★</p>
              <p class="text-xs text-green-100 mt-1 uppercase font-semibold">Your Rating</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


    <!-- GRIEVANCE FORM -->
  <!-- GRIEVANCE FORM -->
<section id="grievance" class="page-enter hidden">
  
  <!-- Hero Header with Nature Theme -->
  <div class="relative bg-gradient-to-br from-lime-50 via-green-50 to-emerald-50 py-12 overflow-hidden">
    <div class="absolute inset-0 opacity-20">
      <div class="absolute top-0 left-20 w-72 h-72 bg-green-400 rounded-full blur-3xl"></div>
      <div class="absolute bottom-0 right-20 w-72 h-72 bg-yellow-300 rounded-full blur-3xl"></div>
    </div>
    <div class="max-w-3xl mx-auto px-6 text-center relative z-10">
      <span class="bg-green-100 text-green-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase">Report an Issue</span>
      <h1 class="text-4xl font-extrabold text-slate-900 mt-4">File New Grievance</h1>
      <p class="text-slate-600 mt-2 max-w-xl mx-auto">Help us serve you better. Report civic issues with photos and location for faster resolution.</p>
    </div>
  </div>

  <div class="max-w-3xl mx-auto px-6 py-10 -mt-8">
    <div class="bg-white rounded-3xl shadow-2xl border-2 border-green-100 overflow-hidden">
      
      <!-- Form Header -->
      <div class="bg-gradient-to-r from-green-50 to-yellow-50 p-6 border-b-2 border-green-100 flex justify-between items-center">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg">
            <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">report</span>
          </div>
          <div>
            <h2 class="font-bold text-xl text-slate-800">New Complaint Form</h2>
            <p class="text-xs text-slate-500">Fields marked with * are required</p>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
          <span class="text-xs font-bold text-slate-500">AI Active</span>
        </div>
      </div>
      
      <div class="p-8">
        <form onsubmit="event.preventDefault(); submitGrievance()">

          <!-- SECTION 1: PERSONAL DETAILS -->
          <div class="mb-8 pb-8 border-b-2 border-dashed border-green-100">
            <div class="flex items-center gap-2 mb-6">
              <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                <span class="material-symbols-rounded text-green-700 text-lg" aria-hidden="true">person</span>
              </div>
              <h3 class="text-lg font-bold text-slate-800">1. Your Information</h3>
            </div>
            
            <div class="grid sm:grid-cols-2 gap-4">
              <!-- Full Name -->
              <div>
                <label for="userName" class="block text-xs font-bold text-slate-500 uppercase mb-2">Full Name *</label>
                <div class="relative">
                  <span class="material-symbols-rounded absolute left-3 top-3 text-slate-400 text-lg" aria-hidden="true">badge</span>
                  <input 
                    type="text" 
                    id="userName" 
                    class="w-full pl-10 pr-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl outline-none focus:border-green-500 transition font-medium" 
                    placeholder="Enter your full name" 
                    required 
                  />
                </div>
              </div>

              <!-- Phone Number -->
              <div>
                <label for="userPhone" class="block text-xs font-bold text-slate-500 uppercase mb-2">Phone Number *</label>
                <div class="relative">
                  <span class="material-symbols-rounded absolute left-3 top-3 text-slate-400 text-lg" aria-hidden="true">call</span>
                  <input 
                    type="tel" 
                    id="userPhone" 
                    class="w-full pl-10 pr-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl outline-none focus:border-green-500 transition font-medium" 
                    placeholder="+91 98765 43210" 
                    required 
                  />
                </div>
              </div>
            </div>

            <!-- Email (Optional) -->
            <div class="mt-4">
              <label for="userEmail" class="block text-xs font-bold text-slate-500 uppercase mb-2">Email Address (Optional)</label>
              <div class="relative">
                <span class="material-symbols-rounded absolute left-3 top-3 text-slate-400 text-lg" aria-hidden="true">mail</span>
                <input 
                  type="email" 
                  id="userEmail" 
                  class="w-full pl-10 pr-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl outline-none focus:border-green-500 transition font-medium" 
                  placeholder="your.email@example.com" 
                />
              </div>
              <p class="text-xs text-slate-400 mt-1 ml-1">We'll send updates to your email if provided</p>
            </div>
          </div>

          <!-- SECTION 2: LOCATION -->
          <div class="mb-8 pb-8 border-b-2 border-dashed border-yellow-100">
            <div class="flex items-center gap-2 mb-6">
              <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
                <span class="material-symbols-rounded text-yellow-700 text-lg" aria-hidden="true">location_on</span>
              </div>
              <h3 class="text-lg font-bold text-slate-800">2. Location Details</h3>
            </div>

            <!-- Live Location Button -->
            <div class="mb-4">
              <button 
                type="button" 
                onclick="shareLocation()" 
                class="w-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white px-6 py-4 rounded-xl font-bold shadow-lg hover:from-orange-600 hover:to-yellow-600 transition flex items-center justify-center gap-2"
              >
                <span class="material-symbols-rounded text-xl" aria-hidden="true">my_location</span>
                Share Live Location
              </button>
              <p class="text-xs text-slate-500 mt-2 ml-1">Click to auto-detect your current location</p>
            </div>

            <!-- Location Display -->
            <div id="locationDisplay" class="hidden bg-green-50 border-2 border-green-200 rounded-xl p-4 mb-4">
              <div class="flex items-start gap-3">
                <span class="material-symbols-rounded text-green-600 text-2xl" aria-hidden="true">check_circle</span>
                <div class="flex-1">
                  <p class="text-xs font-bold text-green-700 uppercase">Location Captured</p>
                  <p id="locationText" class="text-sm text-green-900 mt-1 font-medium">Fetching your location...</p>
                  <p id="locationCoords" class="text-xs text-green-600 mt-1 font-mono"></p>
                </div>
              </div>
            </div>

            <!-- Manual Address -->
            <div>
              <label for="userAddress" class="block text-xs font-bold text-slate-500 uppercase mb-2">Address / Landmark *</label>
              <div class="relative">
                <span class="material-symbols-rounded absolute left-3 top-3 text-slate-400 text-lg" aria-hidden="true">home</span>
                <input 
                  type="text" 
                  id="userAddress" 
                  class="w-full pl-10 pr-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl outline-none focus:border-green-500 transition font-medium" 
                  placeholder="Near Govt School, Sector 4, Main Road" 
                  required 
                />
              </div>
            </div>
          </div>

          <!-- SECTION 3: CATEGORY -->
          <div class="mb-8 pb-8 border-b-2 border-dashed border-orange-100">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center">
                  <span class="material-symbols-rounded text-orange-700 text-lg" aria-hidden="true">category</span>
                </div>
                <h3 class="text-lg font-bold text-slate-800">3. Select Category *</h3>
              </div>
              <span id="selectedCategoryLabel" class="text-xs font-bold text-slate-500"></span>
            </div>
            
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
              <!-- Water -->
              <div 
                class="border-2 border-slate-200 rounded-2xl p-5 text-center hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition group" 
                onclick="selectCat(this, 'Water')"
              >
                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-2 group-hover:scale-110 transition">
                  <span class="material-symbols-rounded text-3xl text-blue-600" aria-hidden="true">water_drop</span>
                </div>
                <p class="text-sm font-bold text-slate-700">Water</p>
              </div>

              <!-- Waste -->
              <div 
                class="border-2 border-slate-200 rounded-2xl p-5 text-center hover:border-green-500 hover:bg-green-50 cursor-pointer transition group" 
                onclick="selectCat(this, 'Waste')"
              >
                <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-2 group-hover:scale-110 transition">
                  <span class="material-symbols-rounded text-3xl text-green-600" aria-hidden="true">delete</span>
                </div>
                <p class="text-sm font-bold text-slate-700">Waste</p>
              </div>

              <!-- Roads -->
              <div 
                class="border-2 border-slate-200 rounded-2xl p-5 text-center hover:border-slate-600 hover:bg-slate-50 cursor-pointer transition group" 
                onclick="selectCat(this, 'Roads')"
              >
                <div class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-2 group-hover:scale-110 transition">
                  <span class="material-symbols-rounded text-3xl text-slate-700" aria-hidden="true">road</span>
                </div>
                <p class="text-sm font-bold text-slate-700">Roads</p>
              </div>

              <!-- Electric -->
              <div 
                class="border-2 border-slate-200 rounded-2xl p-5 text-center hover:border-yellow-500 hover:bg-yellow-50 cursor-pointer transition group" 
                onclick="selectCat(this, 'Electric')"
              >
                <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mx-auto mb-2 group-hover:scale-110 transition">
                  <span class="material-symbols-rounded text-3xl text-yellow-600" aria-hidden="true">bolt</span>
                </div>
                <p class="text-sm font-bold text-slate-700">Electric</p>
              </div>
            </div>
          </div>

          <!-- SECTION 4: DESCRIPTION -->
          <div class="mb-8 pb-8 border-b-2 border-dashed border-green-100">
            <div class="flex justify-between items-center mb-4">
              <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                  <span class="material-symbols-rounded text-green-700 text-lg" aria-hidden="true">description</span>
                </div>
                <h3 class="text-lg font-bold text-slate-800">4. Describe Issue *</h3>
              </div>
              <button 
                type="button" 
                onclick="toggleVoice()" 
                class="text-xs font-bold text-green-700 bg-green-50 px-3 py-1.5 rounded-lg flex items-center gap-1 hover:bg-green-100 transition"
              >
                <span class="material-symbols-rounded text-sm" aria-hidden="true">mic</span>
                Use Voice
              </button>
            </div>
            
            <div class="relative">
              <textarea 
                id="descArea" 
                class="w-full h-40 p-5 bg-slate-50 border-2 border-slate-200 rounded-2xl focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none resize-none transition" 
                placeholder="Describe the problem, location, and details in at least 20 characters..." 
                required
              ></textarea>
              
              <!-- Voice Overlay -->
              <div id="voiceOverlay" class="absolute inset-0 bg-white/95 backdrop-blur rounded-2xl flex flex-col items-center justify-center hidden z-10">
                <div class="flex gap-1 h-7 items-end">
                  <div class="w-1.5 bg-blue-500 rounded-full animate-pulse" style="animation-duration:0.6s"></div>
                  <div class="w-1.5 bg-red-500 rounded-full animate-pulse" style="animation-duration:0.7s"></div>
                  <div class="w-1.5 bg-yellow-500 rounded-full animate-pulse" style="animation-duration:0.8s"></div>
                  <div class="w-1.5 bg-green-500 rounded-full animate-pulse" style="animation-duration:0.5s"></div>
                </div>
                <p class="text-sm font-bold text-slate-600 mt-4 animate-pulse">Listening...</p>
                <button 
                  type="button" 
                  onclick="toggleVoice()" 
                  class="mt-4 text-xs font-bold text-red-500 hover:underline"
                >
                  Stop
                </button>
              </div>
            </div>
          </div>

          <!-- SECTION 5: EVIDENCE -->
          <div class="mb-8">
            <div class="flex items-center gap-2 mb-4">
              <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                <span class="material-symbols-rounded text-purple-700 text-lg" aria-hidden="true">photo_camera</span>
              </div>
              <h3 class="text-lg font-bold text-slate-800">5. Upload Evidence</h3>
            </div>
            
            <div class="border-2 border-dashed border-slate-300 rounded-2xl h-40 flex flex-col items-center justify-center text-slate-400 hover:bg-purple-50 hover:border-purple-500 cursor-pointer transition group">
              <span class="material-symbols-rounded text-5xl text-purple-400 group-hover:scale-110 transition" aria-hidden="true">add_a_photo</span>
              <span class="text-sm font-bold mt-3 text-slate-600">Click to Upload Photo</span>
              <span class="text-xs text-slate-400 mt-1">JPG, PNG up to 5MB</span>
            </div>
          </div>

          <!-- Submit Buttons -->
          <div class="flex gap-4">
            <button 
              type="button" 
              onclick="showSection('dash-citizen')" 
              class="flex-1 py-4 rounded-xl font-bold text-slate-500 border-2 border-slate-200 hover:bg-slate-100 transition"
            >
              Cancel
            </button>
            <button 
              type="submit" 
              class="flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 rounded-xl font-bold shadow-lg hover:from-green-700 hover:to-emerald-700 transition flex items-center justify-center gap-2"
            >
              <span class="material-symbols-rounded" aria-hidden="true">send</span>
              Submit Complaint
            </button>
          </div>

        </form>
      </div>
    </div>

    <!-- Help Section -->
    <div class="mt-8 bg-gradient-to-r from-slate-50 to-green-50 rounded-2xl p-6 border-2 border-green-100">
      <div class="flex items-start gap-4">
        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center shrink-0">
          <span class="material-symbols-rounded text-green-700" aria-hidden="true">info</span>
        </div>
        <div>
          <h4 class="font-bold text-slate-900 mb-2">Need Help?</h4>
          <p class="text-sm text-slate-600">After submission, you'll receive a unique Ticket ID via SMS. Use it to track your complaint status in real-time.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
// LOCATION SHARING FUNCTION
function shareLocation() {
  const display = document.getElementById('locationDisplay');
  const textEl = document.getElementById('locationText');
  const coordsEl = document.getElementById('locationCoords');
  
  if (!navigator.geolocation) {
    alert('Geolocation is not supported by your browser');
    return;
  }
  
  display.classList.remove('hidden');
  textEl.textContent = 'Fetching your location...';
  coordsEl.textContent = '';
  
  navigator.geolocation.getCurrentPosition(
    (position) => {
      const lat = position.coords.latitude.toFixed(6);
      const lon = position.coords.longitude.toFixed(6);
      
      textEl.textContent = `Location captured successfully! You can also enter a nearby landmark in the address field.`;
      coordsEl.textContent = `Coordinates: ${lat}, ${lon}`;
      
      // Store in hidden fields or use for form submission
      console.log('Location captured:', { lat, lon });
    },
    (error) => {
      textEl.textContent = 'Unable to fetch location. Please enter manually.';
      coordsEl.textContent = 'Error: ' + error.message;
      display.classList.add('bg-red-50', 'border-red-200');
    }
  );
}
</script>


    <!-- TRACK -->
<!-- TRACK -->
<section id="track" class="page-enter hidden">
  
  <!-- Hero with Nature Gradient -->
  <div class="relative bg-gradient-to-br from-lime-50 via-yellow-50 to-orange-50 py-16 overflow-hidden">
    <div class="absolute inset-0 opacity-20">
      <div class="absolute top-10 left-10 w-64 h-64 bg-green-400 rounded-full blur-3xl"></div>
      <div class="absolute bottom-10 right-10 w-64 h-64 bg-orange-300 rounded-full blur-3xl"></div>
    </div>
    <div class="max-w-2xl mx-auto px-6 text-center relative z-10">
      <span class="bg-green-100 text-green-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase">Track</span>
      <h1 class="text-4xl font-extrabold text-slate-900 mt-4 mb-3">Track Grievance</h1>
      <p class="text-slate-600 max-w-xl mx-auto">
        Enter the ID sent to your mobile via SMS. Get real-time updates on your complaint status, engineer assignments, and resolution progress.
      </p>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="max-w-2xl mt-6 mx-auto px-6 -mt-8 mb-12">
    <div class="grid grid-cols-3 gap-4">
      <div class=" p-4 rounded-2xl shadow-lg border border-green-200">
        <div class="flex items-center gap-2 mb-1">
          <span class="material-symbols-rounded text-green-600 text-lg" aria-hidden="true">schedule</span>
          <p class="text-xs font-bold text-slate-500 uppercase">Avg Time</p>
        </div>
        <p class="text-2xl font-extrabold text-green-600">3.5d</p>
      </div>
      <div class="bg-white p-4 rounded-2xl shadow-lg border border-yellow-200">
        <div class="flex items-center gap-2 mb-1">
          <span class="material-symbols-rounded text-yellow-600 text-lg" aria-hidden="true">pending_actions</span>
          <p class="text-xs font-bold text-slate-500 uppercase">Pending</p>
        </div>
        <p class="text-2xl font-extrabold text-yellow-600">124</p>
      </div>
      <div class="bg-white p-4 rounded-2xl shadow-lg border border-orange-200">
        <div class="flex items-center gap-2 mb-1">
          <span class="material-symbols-rounded text-orange-600 text-lg" aria-hidden="true">verified</span>
          <p class="text-xs font-bold text-slate-500 uppercase">Today</p>
        </div>
        <p class="text-2xl font-extrabold text-orange-600">42</p>
      </div>
    </div>
  </div>

  <!-- Search Section -->
  <div class="max-w-2xl mx-auto px-6 mb-12">
    <div class="bg-white p-8 rounded-3xl shadow-xl border-2 border-green-100">
      <div class="flex items-center gap-3 mb-4">
        <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg">
          <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">search</span>
        </div>
        <div>
          <h3 class="font-bold text-slate-900">Search Your Ticket</h3>
          <p class="text-xs text-slate-500">Enter your unique complaint ID</p>
        </div>
      </div>
      
      <div class="bg-gradient-to-r from-green-50 to-yellow-50 p-3 rounded-2xl shadow-inner border border-green-100 flex gap-2 mb-2">
        <input 
          type="text" 
          id="trackIdInput" 
          class="flex-1 p-4 bg-white rounded-xl outline-none font-bold text-slate-800 border-2 border-transparent focus:border-green-500 transition shadow-sm" 
          placeholder="Ex: G-2025-9921" 
        />
        <button 
          onclick="showTimeline()" 
          class="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-8 rounded-xl font-bold hover:from-green-700 hover:to-emerald-700 transition shadow-lg hover:shadow-xl flex items-center gap-2"
        >
          <span class="material-symbols-rounded" aria-hidden="true">search</span>
          <span class="hidden sm:inline">Search</span>
        </button>
      </div>
      <p id="trackError" class="text-sm text-red-500 mt-2 hidden">Please enter a valid Ticket ID (e.g., G-2025-9921).</p>
    </div>
  </div>

  <!-- Timeline Result -->
  <div id="timelineResult" class="hidden max-w-2xl mx-auto px-6 pb-16">
    <div class="bg-white p-8 rounded-3xl shadow-xl border-2 border-green-100">
      <div class="flex justify-between items-center mb-8 border-b-2 border-gradient-to-r from-green-100 to-yellow-100 pb-4">
        <div>
          <div class="text-xs font-bold text-slate-400 uppercase">Ticket ID</div>
          <div class="text-2xl font-bold text-slate-900" id="trackedTicketId">G-2025-9921</div>
        </div>
        <span class="bg-gradient-to-r from-orange-100 to-yellow-100 text-orange-700 px-4 py-2 rounded-xl text-xs font-extrabold shadow-sm border border-orange-200">IN PROGRESS</span>
      </div>

      <!-- Timeline Steps -->
      <div class="space-y-0 pl-2">
        <!-- Step 1: Filed -->
        <div class="relative pl-10 pb-8">
          <div class="absolute left-0 top-1 w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white border-4 border-white shadow-lg z-10">
            <span class="material-symbols-rounded text-lg" aria-hidden="true">check</span>
          </div>
          <div class="absolute left-5 top-12 w-0.5 h-full bg-gradient-to-b from-green-300 to-yellow-300"></div>
          <h4 class="font-bold text-slate-900">Complaint Filed</h4>
          <p class="text-sm text-slate-500">12 Dec, 09:00 AM</p>
        </div>

        <!-- Step 2: Assigned -->
        <div class="relative pl-10 pb-8">
          <div class="absolute left-0 top-1 w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center text-white border-4 border-white shadow-lg z-10">
            <span class="material-symbols-rounded text-lg" aria-hidden="true">engineering</span>
          </div>
          <div class="absolute left-5 top-12 w-0.5 h-full bg-gradient-to-b from-yellow-300 to-orange-300"></div>
          <h4 class="font-bold text-slate-900">Assigned to Engineer</h4>
          <p class="text-sm text-slate-500">12 Dec, 02:30 PM</p>
          <div class="mt-2 bg-gradient-to-r from-blue-50 to-cyan-50 p-3 rounded-xl border border-blue-100 text-sm text-blue-800">
            <div class="flex items-center gap-2">
              <span class="material-symbols-rounded text-base" aria-hidden="true">person</span>
              <span class="font-semibold">Engineer Rajesh Sharma</span>
            </div>
            <p class="text-xs mt-1">Officer is inspecting the site and will update shortly.</p>
          </div>
        </div>

        <!-- Step 3: Pending -->
        <div class="relative pl-10">
          <div class="absolute left-0 top-1 w-10 h-10 bg-gradient-to-br from-orange-300 to-yellow-400 rounded-full flex items-center justify-center text-white border-4 border-white z-10 animate-pulse">
            <span class="material-symbols-rounded text-lg" aria-hidden="true">hourglass_empty</span>
          </div>
          <h4 class="font-bold text-orange-600">Resolution Pending</h4>
          <p class="text-sm text-slate-400">Estimated: 15 Dec</p>
          <div class="mt-3 bg-gradient-to-r from-orange-50 to-yellow-50 p-3 rounded-xl border border-orange-200">
            <div class="flex items-center gap-2 mb-2">
              <span class="material-symbols-rounded text-orange-600 text-base" aria-hidden="true">info</span>
              <span class="text-xs font-bold text-orange-700 uppercase">Live Status</span>
            </div>
            <p class="text-xs text-slate-600">Engineer is working on-site. Photos and completion notes will be uploaded after work is done.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Help Section -->
  <div class="max-w-2xl mx-auto px-6 pb-16">
    <div class="bg-gradient-to-r from-green-900 to-emerald-900 rounded-3xl p-8 text-white relative overflow-hidden">
      <div class="absolute inset-0 opacity-10">
        <div class="absolute top-0 right-0 w-48 h-48 bg-yellow-400 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 left-0 w-48 h-48 bg-green-400 rounded-full blur-3xl"></div>
      </div>
      <div class="relative z-10">
        <div class="flex items-center gap-3 mb-4">
          <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
            <span class="material-symbols-rounded text-2xl" aria-hidden="true">help</span>
          </div>
          <h3 class="text-xl font-extrabold">Need Help?</h3>
        </div>
        <p class="text-green-100 mb-6">Can't find your ticket ID or have questions about the tracking process?</p>
        <div class="grid sm:grid-cols-2 gap-3">
          <button class="bg-white/20 backdrop-blur-sm hover:bg-white/30 border border-white/30 px-4 py-3 rounded-xl font-bold text-sm transition flex items-center gap-2">
            <span class="material-symbols-rounded text-base" aria-hidden="true">sms</span>
            Check SMS
          </button>
          <button class="bg-white text-green-800 hover:bg-green-50 px-4 py-3 rounded-xl font-bold text-sm transition flex items-center gap-2">
            <span class="material-symbols-rounded text-base" aria-hidden="true">support_agent</span>
            Contact Support
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- FAQs -->
  <div class="max-w-2xl mx-auto px-6 pb-16">
    <div class="text-center mb-8">
      <span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-xs font-bold uppercase">FAQs</span>
      <h2 class="text-2xl font-extrabold text-slate-900 mt-3">Common Questions</h2>
    </div>
    <div class="space-y-4">
      <div class="bg-white p-5 rounded-2xl shadow-sm border border-green-100 hover:border-green-300 transition">
        <div class="flex items-start gap-3">
          <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center shrink-0">
            <span class="material-symbols-rounded text-green-700 text-base" aria-hidden="true">help</span>
          </div>
          <div>
            <h4 class="font-bold text-slate-900 mb-1">Where do I find my Ticket ID?</h4>
            <p class="text-sm text-slate-600">Your unique ticket ID is sent to your registered mobile number via SMS immediately after filing a complaint. It starts with 'G-' followed by year and number.</p>
          </div>
        </div>
      </div>

      <div class="bg-white p-5 rounded-2xl shadow-sm border border-yellow-100 hover:border-yellow-300 transition">
        <div class="flex items-start gap-3">
          <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center shrink-0">
            <span class="material-symbols-rounded text-yellow-700 text-base" aria-hidden="true">schedule</span>
          </div>
          <div>
            <h4 class="font-bold text-slate-900 mb-1">How long does resolution take?</h4>
            <p class="text-sm text-slate-600">Most complaints are resolved within 7 days. Average resolution time is 3.5 days. Critical issues get priority attention.</p>
          </div>
        </div>
      </div>

      <div class="bg-white p-5 rounded-2xl shadow-sm border border-orange-100 hover:border-orange-300 transition">
        <div class="flex items-start gap-3">
          <div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center shrink-0">
            <span class="material-symbols-rounded text-orange-700 text-base" aria-hidden="true">notifications</span>
          </div>
          <div>
            <h4 class="font-bold text-slate-900 mb-1">Will I get updates?</h4>
            <p class="text-sm text-slate-600">Yes! You'll receive SMS notifications when your complaint is assigned, when the engineer visits, and when it's resolved.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

</section>


    <!-- COMMUNITY -->
    <!-- COMMUNITY -->
<section id="community" class="page-enter hidden">
  
  <!-- Hero Header -->
  <div class="bg-gradient-to-br from-orange-50 to-amber-50 py-12">
    <div class="max-w-5xl mx-auto px-6 text-center">
      <span class="bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Neighborhood Watch</span>
      <h1 class="text-4xl font-extrabold text-slate-900 mt-4">Nearby Issues</h1>
      <p class="text-slate-600 mt-3 max-w-2xl mx-auto">
        Don't file duplicate complaints. Upvote existing ones to prioritize them. Community support makes issues get resolved faster.
      </p>
    </div>
  </div>

  <!-- Stats Bar -->
  <div class="max-w-5xl mx-auto px-6 -mt-6 mb-8">
    <div class="bg-white rounded-2xl shadow-lg border border-slate-200 p-6">
      <div class="grid grid-cols-3 gap-6 text-center">
        <div>
          <p class="text-2xl font-extrabold text-orange-600">18</p>
          <p class="text-xs font-bold text-slate-500 uppercase mt-1">Active Nearby</p>
        </div>
        <div class="border-l border-r border-slate-200">
          <p class="text-2xl font-extrabold text-green-600">42</p>
          <p class="text-xs font-bold text-slate-500 uppercase mt-1">Resolved Today</p>
        </div>
        <div>
          <p class="text-2xl font-extrabold text-slate-900">1.2 km</p>
          <p class="text-xs font-bold text-slate-500 uppercase mt-1">Search Radius</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Filter Tabs -->
  <div class="max-w-5xl mx-auto px-6 mb-6">
    <div class="flex gap-2 overflow-x-auto pb-2">
      <button class="bg-slate-900 text-white px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap">All Issues</button>
      <button class="bg-white text-slate-600 px-4 py-2 rounded-full text-sm font-bold hover:bg-slate-50 border border-slate-200 whitespace-nowrap">High Priority</button>
      <button class="bg-white text-slate-600 px-4 py-2 rounded-full text-sm font-bold hover:bg-slate-50 border border-slate-200 whitespace-nowrap">Water</button>
      <button class="bg-white text-slate-600 px-4 py-2 rounded-full text-sm font-bold hover:bg-slate-50 border border-slate-200 whitespace-nowrap">Roads</button>
      <button class="bg-white text-slate-600 px-4 py-2 rounded-full text-sm font-bold hover:bg-slate-50 border border-slate-200 whitespace-nowrap">Electric</button>
    </div>
  </div>

  <!-- Issue Cards -->
  <div class="max-w-5xl mx-auto px-6 pb-16">
    <div class="grid md:grid-cols-2 gap-6">
      
      <!-- Issue Card 1 - High Risk -->
      <div class="bg-white p-6 rounded-2xl shadow-sm border-2 border-red-200 hover:shadow-lg transition">
        <div class="flex justify-between items-start mb-4">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
              <span class="material-symbols-rounded text-red-600" aria-hidden="true">warning</span>
            </div>
            <div>
              <h4 class="font-bold text-slate-900">Open Manhole</h4>
              <p class="text-xs text-slate-500">Near Primary School, Ward 2</p>
            </div>
          </div>
          <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-bold">High Risk</span>
        </div>
        <p class="text-sm text-slate-600 mb-4">Dangerous open drain causing risk to children. Needs immediate cover.</p>
        <div class="flex items-center justify-between border-t pt-4">
          <button class="flex items-center gap-2 bg-red-50 hover:bg-red-100 text-red-700 px-4 py-2 rounded-full transition font-bold text-sm">
            <span class="material-symbols-rounded text-base" aria-hidden="true">thumb_up</span>
            <span>42 Upvotes</span>
          </button>
          <p class="text-xs text-slate-400 font-semibold">Filed 2 hours ago</p>
        </div>
      </div>

      <!-- Issue Card 2 - Water -->
      <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-lg transition">
        <div class="flex justify-between items-start mb-4">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
              <span class="material-symbols-rounded text-blue-600" aria-hidden="true">water_drop</span>
            </div>
            <div>
              <h4 class="font-bold text-slate-900">No Water Supply</h4>
              <p class="text-xs text-slate-500">Block C, Sector 5</p>
            </div>
          </div>
        </div>
        <p class="text-sm text-slate-600 mb-4">Water supply has been disrupted for the last 24 hours.</p>
        <div class="flex items-center justify-between border-t pt-4">
          <button class="flex items-center gap-2 bg-blue-50 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-full transition font-bold text-sm">
            <span class="material-symbols-rounded text-base" aria-hidden="true">thumb_up</span>
            <span>15 Upvotes</span>
          </button>
          <p class="text-xs text-slate-400 font-semibold">Filed 5 hours ago</p>
        </div>
      </div>

      <!-- Issue Card 3 - Streetlight -->
      <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-lg transition">
        <div class="flex justify-between items-start mb-4">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
              <span class="material-symbols-rounded text-yellow-600" aria-hidden="true">lightbulb</span>
            </div>
            <div>
              <h4 class="font-bold text-slate-900">Streetlight Broken</h4>
              <p class="text-xs text-slate-500">Main Road, Ward 7</p>
            </div>
          </div>
        </div>
        <p class="text-sm text-slate-600 mb-4">Multiple streetlights not working. Dark patches on main road at night.</p>
        <div class="flex items-center justify-between border-t pt-4">
          <button class="flex items-center gap-2 bg-yellow-50 hover:bg-yellow-100 text-yellow-700 px-4 py-2 rounded-full transition font-bold text-sm">
            <span class="material-symbols-rounded text-base" aria-hidden="true">thumb_up</span>
            <span>28 Upvotes</span>
          </button>
          <p class="text-xs text-slate-400 font-semibold">Filed yesterday</p>
        </div>
      </div>

      <!-- Issue Card 4 - Garbage -->
      <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-lg transition">
        <div class="flex justify-between items-start mb-4">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
              <span class="material-symbols-rounded text-green-600" aria-hidden="true">delete</span>
            </div>
            <div>
              <h4 class="font-bold text-slate-900">Garbage Not Collected</h4>
              <p class="text-xs text-slate-500">Lane 3, Ward 8</p>
            </div>
          </div>
        </div>
        <p class="text-sm text-slate-600 mb-4">Waste collection vehicle hasn't come for 3 days. Overflowing bins.</p>
        <div class="flex items-center justify-between border-t pt-4">
          <button class="flex items-center gap-2 bg-green-50 hover:bg-green-100 text-green-700 px-4 py-2 rounded-full transition font-bold text-sm">
            <span class="material-symbols-rounded text-base" aria-hidden="true">thumb_up</span>
            <span>19 Upvotes</span>
          </button>
          <p class="text-xs text-slate-400 font-semibold">Filed 1 day ago</p>
        </div>
      </div>

    </div>

    <!-- Load More -->
    <div class="text-center mt-8">
      <button class="bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 transition shadow-lg">
        Load More Issues
      </button>
    </div>
  </div>

  <!-- Community Guidelines -->
  <div class="bg-slate-900 py-12">
    <div class="max-w-5xl mx-auto px-6">
      <div class="text-center mb-8">
        <span class="bg-white/20 text-white px-3 py-1 rounded-full text-xs font-bold uppercase">Guidelines</span>
        <h3 class="text-2xl font-extrabold text-white mt-3">How to Use Neighborhood Watch</h3>
      </div>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 text-center">
          <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">search</span>
          </div>
          <h4 class="font-bold text-white mb-2">Search First</h4>
          <p class="text-sm text-slate-300">Before filing a new complaint, check if someone already reported the same issue nearby.</p>
        </div>
        <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 text-center">
          <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">thumb_up</span>
          </div>
          <h4 class="font-bold text-white mb-2">Upvote Instead</h4>
          <p class="text-sm text-slate-300">If you find a matching issue, upvote it. More upvotes = higher priority for authorities.</p>
        </div>
        <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 text-center">
          <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">groups</span>
          </div>
          <h4 class="font-bold text-white mb-2">Build Pressure</h4>
          <p class="text-sm text-slate-300">Community support speeds up resolution. Share with neighbors to gather more upvotes.</p>
        </div>
      </div>
    </div>
  </div>

</section>


    <!-- IMPACT -->
    <!-- IMPACT / TRANSPARENCY -->
<section id="impact" class="page-enter hidden">
  
  <!-- Hero Header -->
  <div class="bg-gradient-to-br mb-8 p-4 from-green-600 via-emerald-600 to-green-700 py-16 relative overflow-hidden">
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 right-1/4 w-96 h-96 bg-white rounded-full blur-3xl"></div>
    </div>
    <div class="max-w-6xl mx-auto px-6 relative z-10">
      <span class="bg-white/20 text-white px-4 py-1.5 rounded-full text-xs font-bold uppercase backdrop-blur-sm">Public Dashboard</span>
      <h1 class="text-4xl md:text-5xl font-extrabold text-white mt-4 mb-3">Public Transparency Report</h1>
      <p class="text-lg text-green-50 max-w-2xl">
        Real-time data on grievance resolution, budget utilization, and government accountability. Every citizen has the right to know how their complaints are being handled.
      </p>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="max-w-6xl  mx-auto px-6 mt-8 mb-12">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-200 hover:shadow-xl transition">
        <p class="text-xs font-bold text-slate-400 uppercase">Total Budget Used</p>
        <p class="text-3xl font-extrabold text-slate-900 mt-2">₹4.2L</p>
        <p class="text-xs text-green-600 font-semibold mt-1">↑ 12% from last month</p>
      </div>
      
      <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-200 hover:shadow-xl transition">
        <p class="text-xs font-bold text-slate-400 uppercase">Avg Resolution</p>
        <p class="text-3xl font-extrabold text-green-600 mt-2">3.5 Days</p>
        <p class="text-xs text-green-600 font-semibold mt-1">↓ 0.8 days faster</p>
      </div>
      
      <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-200 hover:shadow-xl transition">
        <p class="text-xs font-bold text-slate-400 uppercase">Active Officers</p>
        <p class="text-3xl font-extrabold text-slate-900 mt-2">24</p>
        <p class="text-xs text-slate-500 font-semibold mt-1">Across 12 wards</p>
      </div>
      
      <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-200 hover:shadow-xl transition">
        <p class="text-xs font-bold text-slate-400 uppercase">Satisfaction</p>
        <p class="text-3xl font-extrabold text-orange-500 mt-2">4.8/5</p>
        <p class="text-xs text-green-600 font-semibold mt-1">+0.3 from last quarter</p>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="max-w-6xl mx-auto px-6 mb-12">
    <div class="grid md:grid-cols-2 gap-8">
      
      <!-- Category Breakdown -->
      <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-bold text-xl text-slate-800">Complaints by Category</h3>
          <span class="text-xs font-bold text-slate-400 uppercase">Last 30 Days</span>
        </div>
        <div class="space-y-4">
          <div>
            <div class="flex justify-between text-xs font-bold mb-2">
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-blue-500"></span>
                <span class="text-slate-700">Water</span>
              </div>
              <span class="text-slate-900">40%</span>
            </div>
            <div class="w-full bg-slate-100 rounded-full h-3">
              <div class="bg-blue-500 h-3 rounded-full" style="width:40%"></div>
            </div>
            <p class="text-xs text-slate-500 mt-1">245 complaints</p>
          </div>

          <div>
            <div class="flex justify-between text-xs font-bold mb-2">
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-slate-700"></span>
                <span class="text-slate-700">Roads</span>
              </div>
              <span class="text-slate-900">35%</span>
            </div>
            <div class="w-full bg-slate-100 rounded-full h-3">
              <div class="bg-slate-700 h-3 rounded-full" style="width:35%"></div>
            </div>
            <p class="text-xs text-slate-500 mt-1">215 complaints</p>
          </div>

          <div>
            <div class="flex justify-between text-xs font-bold mb-2">
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-yellow-400"></span>
                <span class="text-slate-700">Electric</span>
              </div>
              <span class="text-slate-900">15%</span>
            </div>
            <div class="w-full bg-slate-100 rounded-full h-3">
              <div class="bg-yellow-400 h-3 rounded-full" style="width:15%"></div>
            </div>
            <p class="text-xs text-slate-500 mt-1">92 complaints</p>
          </div>

          <div>
            <div class="flex justify-between text-xs font-bold mb-2">
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-red-500"></span>
                <span class="text-slate-700">Waste</span>
              </div>
              <span class="text-slate-900">10%</span>
            </div>
            <div class="w-full bg-slate-100 rounded-full h-3">
              <div class="bg-red-500 h-3 rounded-full" style="width:10%"></div>
            </div>
            <p class="text-xs text-slate-500 mt-1">61 complaints</p>
          </div>
        </div>
      </div>

      <!-- Resolution Rate -->
      <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200 flex flex-col justify-center items-center text-center">
        <div class="relative w-40 h-40 mb-4">
          <svg class="transform -rotate-90 w-40 h-40">
            <circle cx="80" cy="80" r="70" stroke="#e2e8f0" stroke-width="12" fill="none" />
            <circle cx="80" cy="80" r="70" stroke="#22c55e" stroke-width="12" fill="none"
                    stroke-dasharray="439.6" stroke-dashoffset="52.75" stroke-linecap="round" />
          </svg>
          <div class="absolute inset-0 flex items-center justify-center">
            <span class="text-4xl font-extrabold text-green-600">88%</span>
          </div>
        </div>
        <h4 class="font-bold text-xl text-slate-800">Resolution Rate</h4>
        <p class="text-sm text-slate-500 mt-1">Highest in District</p>
        <div class="grid grid-cols-2 gap-4 mt-6 w-full">
          <div class="bg-green-50 p-3 rounded-xl">
            <p class="text-2xl font-bold text-green-700">540</p>
            <p class="text-xs text-slate-600 font-semibold">Resolved</p>
          </div>
          <div class="bg-orange-50 p-3 rounded-xl">
            <p class="text-2xl font-bold text-orange-600">74</p>
            <p class="text-xs text-slate-600 font-semibold">Pending</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Public Escalations Section -->
  <div class="bg-gradient-to-br from-red-50 to-orange-50 py-16">
    <div class="max-w-6xl mx-auto px-6">
      <div class="flex items-center justify-between mb-8">
        <div>
          <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Public Pressure</span>
          <h2 class="text-3xl font-extrabold text-slate-900 mt-3">Issues Beyond 7 Days</h2>
          <p class="text-slate-600 mt-2">Complaints that breached the deadline are now public. Citizens can upvote to prioritize urgent issues.</p>
        </div>
        <button class="hidden md:flex items-center gap-2 bg-red-600 text-white px-5 py-3 rounded-xl font-bold hover:bg-red-700 transition shadow-lg">
          <span class="material-symbols-rounded" aria-hidden="true">campaign</span>
          View All
        </button>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        <!-- Escalated Issue 1 -->
        <div class="bg-white p-6 rounded-2xl shadow-sm border-2 border-red-200 hover:shadow-lg transition">
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center gap-3">
              <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                <span class="material-symbols-rounded text-red-600" aria-hidden="true">warning</span>
              </div>
              <div>
                <h4 class="font-bold text-slate-900">Pipeline Burst on Main Road</h4>
                <p class="text-xs text-slate-500 mt-1">Ward 4 • Reported 9 days ago</p>
              </div>
            </div>
            <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-bold">OVERDUE</span>
          </div>
          <p class="text-sm text-slate-600 mb-4">Major water pipeline burst causing waterlogging and traffic disruption on the main road near market area.</p>
          <div class="flex items-center justify-between border-t pt-4">
            <div class="flex items-center gap-2">
              <button class="flex items-center gap-1.5 bg-red-50 hover:bg-red-100 text-red-700 px-4 py-2 rounded-full transition font-bold text-sm">
                <span class="material-symbols-rounded text-base" aria-hidden="true">thumb_up</span>
                <span>127 Upvotes</span>
              </button>
            </div>
            <p class="text-xs text-slate-400 font-semibold">Assigned: Rajesh Sharma</p>
          </div>
        </div>

        <!-- Escalated Issue 2 -->
        <div class="bg-white p-6 rounded-2xl shadow-sm border-2 border-orange-200 hover:shadow-lg transition">
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center gap-3">
              <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                <span class="material-symbols-rounded text-orange-600" aria-hidden="true">lightbulb</span>
              </div>
              <div>
                <h4 class="font-bold text-slate-900">Streetlight Not Working</h4>
                <p class="text-xs text-slate-500 mt-1">Ward 9 • Reported 8 days ago</p>
              </div>
            </div>
            <span class="bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold">DELAYED</span>
          </div>
          <p class="text-sm text-slate-600 mb-4">Multiple streetlights not working on the main lane. Residents concerned about safety during night hours.</p>
          <div class="flex items-center justify-between border-t pt-4">
            <div class="flex items-center gap-2">
              <button class="flex items-center gap-1.5 bg-orange-50 hover:bg-orange-100 text-orange-700 px-4 py-2 rounded-full transition font-bold text-sm">
                <span class="material-symbols-rounded text-base" aria-hidden="true">thumb_up</span>
                <span>89 Upvotes</span>
              </button>
            </div>
            <p class="text-xs text-slate-400 font-semibold">Assigned: Meena Verma</p>
          </div>
        </div>
      </div>

      <div class="mt-6 bg-red-600 text-white p-4 rounded-2xl flex items-center gap-3">
        <span class="material-symbols-rounded text-3xl" aria-hidden="true">info</span>
        <p class="text-sm font-semibold">
          <strong>Why Public Escalation Matters:</strong> After 7 days without resolution, complaints become visible to all citizens. This transparency creates accountability pressure on authorities to take immediate action.
        </p>
      </div>
    </div>
  </div>

  <!-- Budget Breakdown -->
  <div class="max-w-6xl mx-auto px-6 py-16">
    <div class="text-center mb-10">
      <span class="bg-slate-200 text-slate-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Financial Transparency</span>
      <h2 class="text-3xl font-extrabold text-slate-900 mt-3">Budget Utilization</h2>
      <p class="text-slate-600 mt-2">Detailed breakdown of how public funds are being spent on grievance resolution.</p>
    </div>

    <div class="grid md:grid-cols-3 gap-6 mb-8">
      <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-6 rounded-2xl border border-blue-200">
        <div class="flex items-center justify-between mb-3">
          <h4 class="font-bold text-slate-800">Water Infrastructure</h4>
          <span class="material-symbols-rounded text-blue-600" aria-hidden="true">water_drop</span>
        </div>
        <p class="text-3xl font-extrabold text-blue-600 mb-2">₹1.8L</p>
        <p class="text-xs text-slate-600 font-semibold">42% of total budget</p>
        <div class="mt-4 pt-4 border-t border-blue-200">
          <p class="text-xs text-slate-600"><strong>127</strong> pipe repairs, <strong>18</strong> valve replacements</p>
        </div>
      </div>

      <div class="bg-gradient-to-br from-slate-50 to-slate-100 p-6 rounded-2xl border border-slate-300">
        <div class="flex items-center justify-between mb-3">
          <h4 class="font-bold text-slate-800">Road Maintenance</h4>
          <span class="material-symbols-rounded text-slate-700" aria-hidden="true">route</span>
        </div>
        <p class="text-3xl font-extrabold text-slate-700 mb-2">₹1.5L</p>
        <p class="text-xs text-slate-600 font-semibold">36% of total budget</p>
        <div class="mt-4 pt-4 border-t border-slate-300">
          <p class="text-xs text-slate-600"><strong>89</strong> potholes filled, <strong>12</strong> road repairs</p>
        </div>
      </div>

      <div class="bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-2xl border border-yellow-200">
        <div class="flex items-center justify-between mb-3">
          <h4 class="font-bold text-slate-800">Electricity & Others</h4>
          <span class="material-symbols-rounded text-yellow-600" aria-hidden="true">bolt</span>
        </div>
        <p class="text-3xl font-extrabold text-yellow-600 mb-2">₹0.9L</p>
        <p class="text-xs text-slate-600 font-semibold">22% of total budget</p>
        <div class="mt-4 pt-4 border-t border-yellow-200">
          <p class="text-xs text-slate-600"><strong>54</strong> streetlights fixed, <strong>23</strong> misc</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Performance Metrics -->
  <div class="bg-white py-16">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-10">
        <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Performance</span>
        <h2 class="text-3xl font-extrabold text-slate-900 mt-3">Key Metrics & Accountability</h2>
      </div>

      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-2xl border border-green-200 text-center">
          <div class="w-14 h-14 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">schedule</span>
          </div>
          <p class="text-3xl font-extrabold text-green-600">92%</p>
          <p class="text-sm font-bold text-slate-700 mt-1">SLA Compliance</p>
          <p class="text-xs text-slate-500 mt-1">Resolved within 7 days</p>
        </div>

        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-6 rounded-2xl border border-blue-200 text-center">
          <div class="w-14 h-14 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">timer</span>
          </div>
          <p class="text-3xl font-extrabold text-blue-600">1.2h</p>
          <p class="text-sm font-bold text-slate-700 mt-1">First Response</p>
          <p class="text-xs text-slate-500 mt-1">Avg time to assignment</p>
        </div>

        <div class="bg-gradient-to-br from-orange-50 to-amber-50 p-6 rounded-2xl border border-orange-200 text-center">
          <div class="w-14 h-14 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">refresh</span>
          </div>
          <p class="text-3xl font-extrabold text-orange-600">7</p>
          <p class="text-sm font-bold text-slate-700 mt-1">Repeat Issues</p>
          <p class="text-xs text-slate-500 mt-1">Re-opened complaints</p>
        </div>

        <div class="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-2xl border border-purple-200 text-center">
          <div class="w-14 h-14 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="material-symbols-rounded text-white text-2xl" aria-hidden="true">star</span>
          </div>
          <p class="text-3xl font-extrabold text-purple-600">4.8/5</p>
          <p class="text-sm font-bold text-slate-700 mt-1">Citizen Rating</p>
          <p class="text-xs text-slate-500 mt-1">Based on 342 feedbacks</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Download Reports CTA -->
  <div class="max-w-6xl mx-auto px-6 pb-16">
    <div class="bg-gradient-to-r from-slate-900 to-slate-800 rounded-3xl p-8 md:p-12 text-center relative overflow-hidden">
      <div class="absolute inset-0 opacity-10">
        <div class="absolute top-0 left-1/4 w-64 h-64 bg-green-500 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 right-1/4 w-64 h-64 bg-orange-500 rounded-full blur-3xl"></div>
      </div>
      <div class="relative z-10">
        <span class="material-symbols-rounded text-6xl text-white mb-4 inline-block" aria-hidden="true">summarize</span>
        <h3 class="text-3xl font-extrabold text-white mb-3">Need Detailed Reports?</h3>
        <p class="text-slate-300 mb-6 max-w-2xl mx-auto">
          Download monthly, quarterly, or annual transparency reports with complete data on budget utilization, resolution rates, and officer performance.
        </p>
        <div class="flex flex-wrap gap-4 justify-center">
          <button class="bg-white text-slate-900 px-6 py-3 rounded-xl font-bold hover:bg-slate-100 transition flex items-center gap-2">
            <span class="material-symbols-rounded" aria-hidden="true">download</span>
            Download PDF Report
          </button>
          <button class="bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition flex items-center gap-2">
            <span class="material-symbols-rounded" aria-hidden="true">table_chart</span>
            Download Excel Data
          </button>
        </div>
      </div>
    </div>
  </div>

</section>


    <!-- PROFILE (optional) -->
    <section id="profile" class="page-enter hidden">
      <div class="max-w-xl mx-auto px-6 py-10">
        <div class="bg-white rounded-3xl shadow-lg border border-slate-200 overflow-hidden">
          <div class="bg-slate-900 h-32"></div>
          <div class="px-8 pb-8 -mt-12 text-center">
            <div class="w-24 h-24 bg-white rounded-full mx-auto p-1">
              <div class="w-full h-full bg-green-100 rounded-full flex items-center justify-center text-2xl font-bold text-green-700 uppercase">PK</div>
            </div>
            <h2 class="text-xl font-bold text-slate-900 mt-2">Pradeep Kalsaria</h2>
            <p class="text-sm text-slate-500">Citizen ID: 9982-1122</p>

            <div class="mt-8 space-y-2 text-left">
              <button class="w-full p-4 rounded-xl bg-slate-50 hover:bg-slate-100 font-bold text-sm text-slate-700 flex justify-between">
                Edit Profile <span class="material-symbols-rounded" aria-hidden="true">chevron_right</span>
              </button>
              <button class="w-full p-4 rounded-xl bg-slate-50 hover:bg-slate-100 font-bold text-sm text-slate-700 flex justify-between">
                Language Settings <span class="material-symbols-rounded" aria-hidden="true">chevron_right</span>
              </button>
              <button onclick="logout()" class="w-full p-4 rounded-xl bg-red-50 hover:bg-red-100 font-bold text-sm text-red-600 flex justify-between">
                Logout <span class="material-symbols-rounded" aria-hidden="true">logout</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ADMIN SETTINGS SECTION -->
    <section id="admin-settings" class="page-enter hidden">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 py-12">

        <!-- Back Button -->
        <button onclick="showSection('dash-admin'); switchAdminView('overview')" class="mb-6 inline-flex items-center gap-2 bg-slate-100 text-green-600 hover:bg-slate-200 px-4 py-2 rounded-lg font-semibold transition">
          <span class="material-symbols-rounded text-lg">arrow_back</span>
          Back to Dashboard
        </button>

        <!-- Page Header -->
        <div class="mb-8">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
              <span class="material-symbols-rounded text-2xl text-green-700">settings</span>
            </div>
            <div>
              <h1 class="text-3xl font-bold text-slate-900">Admin Settings</h1>
              <p class="text-slate-500 text-sm mt-1">Manage your district configuration, preferences, and system settings</p>
            </div>
          </div>
        </div>

        <!-- Settings Navigation Tabs -->
        <div class="border-b border-slate-200 mb-8 overflow-x-auto">
          <div class="flex gap-8">
            <button onclick="switchAdminTab('general')" class="settings-tab active">
              <span class="material-symbols-rounded text-lg">settings</span>
              General Settings
            </button>
            <button onclick="switchAdminTab('notifications')" class="settings-tab">
              <span class="material-symbols-rounded text-lg">notifications</span>
              Notifications
            </button>
            <button onclick="switchAdminTab('escalation')" class="settings-tab">
              <span class="material-symbols-rounded text-lg">schedule</span>
              Escalation Policy
            </button>
            <button onclick="switchAdminTab('users')" class="settings-tab">
              <span class="material-symbols-rounded text-lg">people</span>
              User Management
            </button>
            <button onclick="switchAdminTab('reports')" class="settings-tab">
              <span class="material-symbols-rounded text-lg">assessment</span>
              Reports
            </button>
          </div>
        </div>

        <!-- GENERAL SETTINGS TAB -->
        <div id="general-admin-tab" class="admin-settings-content">
          <div class="grid gap-6">
            
            <!-- District Information -->
            <div class="settings-card">
              <div class="flex items-center gap-3 mb-6 pb-6 border-b border-slate-200">
                <span class="material-symbols-rounded text-2xl text-green-600">location_city</span>
                <h3 class="text-lg font-bold text-slate-900">District Information</h3>
              </div>
              
              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-semibold text-slate-900 mb-2">District Name</label>
                  <input type="text" class="input-field" value="Ujjain District" />
                </div>
                <div>
                  <label class="block text-sm font-semibold text-slate-900 mb-2">State</label>
                  <input type="text" class="input-field" value="Madhya Pradesh" />
                </div>
                <div>
                  <label class="block text-sm font-semibold text-slate-900 mb-2">Contact Email</label>
                  <input type="email" class="input-field" value="admin@ujjain.gov.in" />
                </div>
                <div>
                  <label class="block text-sm font-semibold text-slate-900 mb-2">Contact Phone</label>
                  <input type="tel" class="input-field" value="+91-7343-2123456" />
                </div>
              </div>

              <div class="flex gap-3 mt-6 pt-6 border-t border-slate-200">
                <button class="btn-primary">
                  <span class="material-symbols-rounded">check</span> Save Changes
                </button>
                <button class="btn-secondary">
                  <span class="material-symbols-rounded">refresh</span> Reset
                </button>
              </div>
            </div>

            <!-- System Configuration -->
            <div class="settings-card">
              <div class="flex items-center gap-3 mb-6 pb-6 border-b border-slate-200">
                <span class="material-symbols-rounded text-2xl text-blue-600">tune</span>
                <h3 class="text-lg font-bold text-slate-900">System Configuration</h3>
              </div>

              <div class="space-y-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="font-semibold text-slate-900">Enable Public Transparency</p>
                    <p class="text-xs text-slate-500 mt-1">Automatically publish unresolved tickets after 7 days</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="border-t border-slate-100 pt-4">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="font-semibold text-slate-900">Enable Auto Assignment</p>
                      <p class="text-xs text-slate-500 mt-1">Automatically assign tickets to engineers based on capacity</p>
                    </div>
                    <label class="toggle-switch">
                      <input type="checkbox" checked />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>

                <div class="border-t border-slate-100 pt-4">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="font-semibold text-slate-900">Enable Email Notifications</p>
                      <p class="text-xs text-slate-500 mt-1">Send email updates to engineers and citizens</p>
                    </div>
                    <label class="toggle-switch">
                      <input type="checkbox" checked />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>

              <div class="mt-6 pt-6 border-t border-slate-200">
                <button class="btn-primary">
                  <span class="material-symbols-rounded">check</span> Apply Changes
                </button>
              </div>
            </div>

            <!-- Escalation & SLA Settings -->
            <div class="settings-card">
              <div class="flex items-center gap-3 mb-6 pb-6 border-b border-slate-200">
                <span class="material-symbols-rounded text-2xl text-orange-600">schedule</span>
                <h3 class="text-lg font-bold text-slate-900">Escalation & SLA Settings</h3>
              </div>

              <div class="grid md:grid-cols-3 gap-6">
                <div>
                  <label class="block text-sm font-semibold text-slate-900 mb-2">Escalation Days</label>
                  <input type="number" class="input-field" value="7" />
                  <p class="text-xs text-slate-500 mt-1">Days before public escalation</p>
                </div>
                <div>
                  <label class="block text-sm font-semibold text-slate-900 mb-2">Critical Priority Hours</label>
                  <input type="number" class="input-field" value="24" />
                  <p class="text-xs text-slate-500 mt-1">Max hours to resolve critical issues</p>
                </div>
                <div>
                  <label class="block text-sm font-semibold text-slate-900 mb-2">High Priority Hours</label>
                  <input type="number" class="input-field" value="48" />
                  <p class="text-xs text-slate-500 mt-1">Max hours to resolve high issues</p>
                </div>
              </div>

              <div class="mt-6 pt-6 border-t border-slate-200">
                <button class="btn-primary">
                  <span class="material-symbols-rounded">check</span> Update SLA
                </button>
              </div>
            </div>

          </div>
        </div>

        <!-- NOTIFICATIONS TAB -->
        <div id="notifications-admin-tab" class="admin-settings-content hidden">
          <div class="grid gap-6">
            
            <div class="settings-card">
              <div class="flex items-center gap-3 mb-6 pb-6 border-b border-slate-200">
                <span class="material-symbols-rounded text-2xl text-purple-600">notifications_active</span>
                <h3 class="text-lg font-bold text-slate-900">Notification Preferences</h3>
              </div>

              <div class="space-y-5">
                <div class="bg-slate-50 p-4 rounded-lg">
                  <h4 class="font-semibold text-slate-900 mb-3">New Complaint Notifications</h4>
                  <div class="space-y-3">
                    <div class="flex items-center justify-between">
                      <span class="text-sm text-slate-600">Send to Admin</span>
                      <label class="toggle-switch"><input type="checkbox" checked /><span class="toggle-slider"></span></label>
                    </div>
                    <div class="flex items-center justify-between">
                      <span class="text-sm text-slate-600">Send to Assigned Engineer</span>
                      <label class="toggle-switch"><input type="checkbox" checked /><span class="toggle-slider"></span></label>
                    </div>
                    <div class="flex items-center justify-between">
                      <span class="text-sm text-slate-600">Send to Citizen</span>
                      <label class="toggle-switch"><input type="checkbox" checked /><span class="toggle-slider"></span></label>
                    </div>
                  </div>
                </div>

                <div class="bg-slate-50 p-4 rounded-lg">
                  <h4 class="font-semibold text-slate-900 mb-3">Status Update Notifications</h4>
                  <div class="space-y-3">
                    <div class="flex items-center justify-between">
                      <span class="text-sm text-slate-600">Notify on Assignment</span>
                      <label class="toggle-switch"><input type="checkbox" checked /><span class="toggle-slider"></span></label>
                    </div>
                    <div class="flex items-center justify-between">
                      <span class="text-sm text-slate-600">Notify on In Progress</span>
                      <label class="toggle-switch"><input type="checkbox" checked /><span class="toggle-slider"></span></label>
                    </div>
                    <div class="flex items-center justify-between">
                      <span class="text-sm text-slate-600">Notify on Resolution</span>
                      <label class="toggle-switch"><input type="checkbox" checked /><span class="toggle-slider"></span></label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mt-6 pt-6 border-t border-slate-200">
                <button class="btn-primary">
                  <span class="material-symbols-rounded">check</span> Save Preferences
                </button>
              </div>
            </div>

          </div>
        </div>

        <!-- ESCALATION POLICY TAB -->
        <div id="escalation-admin-tab" class="admin-settings-content hidden">
          <div class="grid gap-6">
            
            <div class="settings-card">
              <div class="flex items-center gap-3 mb-6 pb-6 border-b border-slate-200">
                <span class="material-symbols-rounded text-2xl text-red-600">priority_high</span>
                <h3 class="text-lg font-bold text-slate-900">Escalation Policy Configuration</h3>
              </div>

              <div class="space-y-6">
                <div class="border border-slate-200 rounded-lg p-4 bg-gradient-to-r from-red-50 to-transparent">
                  <div class="flex items-start gap-4">
                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0">
                      <span class="material-symbols-rounded text-red-600">error</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="font-bold text-slate-900">Day 7: Public Escalation</h4>
                      <p class="text-sm text-slate-600 mt-1">Unresolved tickets automatically published publicly</p>
                      <div class="mt-3 flex items-center gap-2">
                        <span class="text-xs font-semibold text-slate-700">Status:</span>
                        <span class="badge badge-success">Active</span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="border border-slate-200 rounded-lg p-4 bg-gradient-to-r from-orange-50 to-transparent">
                  <div class="flex items-start gap-4">
                    <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0">
                      <span class="material-symbols-rounded text-orange-600">warning</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="font-bold text-slate-900">Day 3: Admin Alert</h4>
                      <p class="text-sm text-slate-600 mt-1">Send warning to district admin if ticket not assigned</p>
                      <div class="mt-3 flex items-center gap-2">
                        <span class="text-xs font-semibold text-slate-700">Status:</span>
                        <span class="badge badge-success">Active</span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="border border-slate-200 rounded-lg p-4 bg-gradient-to-r from-blue-50 to-transparent">
                  <div class="flex items-start gap-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                      <span class="material-symbols-rounded text-blue-600">info</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="font-bold text-slate-900">Day 1: Initial Assignment</h4>
                      <p class="text-sm text-slate-600 mt-1">Complaint assigned to appropriate engineer for action</p>
                      <div class="mt-3 flex items-center gap-2">
                        <span class="text-xs font-semibold text-slate-700">Status:</span>
                        <span class="badge badge-success">Active</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mt-6 pt-6 border-t border-slate-200">
                <button class="btn-secondary">
                  <span class="material-symbols-rounded">edit</span> Customize Escalation Rules
                </button>
              </div>
            </div>

          </div>
        </div>

        <!-- USER MANAGEMENT TAB -->
        <div id="users-admin-tab" class="admin-settings-content hidden">
          <div class="grid gap-6">
            
            <div class="settings-card">
              <div class="flex items-center justify-between mb-6 pb-6 border-b border-slate-200">
                <div class="flex items-center gap-3">
                  <span class="material-symbols-rounded text-2xl text-blue-600">people</span>
                  <h3 class="text-lg font-bold text-slate-900">User Management</h3>
                </div>
                <button class="btn-primary">
                  <span class="material-symbols-rounded">add</span> Add User
                </button>
              </div>

              <div class="overflow-x-auto">
                <table class="w-full text-sm">
                  <thead>
                    <tr class="border-b border-slate-200">
                      <th class="text-left py-3 px-4 font-semibold text-slate-900">User</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-900">Role</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-900">Email</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-900">Status</th>
                      <th class="text-center py-3 px-4 font-semibold text-slate-900">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="border-b border-slate-100 hover:bg-slate-50">
                      <td class="py-3 px-4">
                        <div class="flex items-center gap-2">
                          <div class="w-8 h-8 rounded-full bg-green-200 flex items-center justify-center text-xs font-bold text-green-700">PK</div>
                          <span class="font-semibold text-slate-900">Pradeep Kalsaria</span>
                        </div>
                      </td>
                      <td class="py-3 px-4">
                        <span class="badge badge-success">District Admin</span>
                      </td>
                      <td class="py-3 px-4 text-slate-600">pradeep@ujjain.gov.in</td>
                      <td class="py-3 px-4">
                        <span class="badge badge-success">Active</span>
                      </td>
                      <td class="py-3 px-4 text-center">
                        <button class="text-blue-600 hover:text-blue-700 font-semibold">Edit</button>
                      </td>
                    </tr>
                    <tr class="border-b border-slate-100 hover:bg-slate-50">
                      <td class="py-3 px-4">
                        <div class="flex items-center gap-2">
                          <div class="w-8 h-8 rounded-full bg-blue-200 flex items-center justify-center text-xs font-bold text-blue-700">RJ</div>
                          <span class="font-semibold text-slate-900">Rajesh Jadhav</span>
                        </div>
                      </td>
                      <td class="py-3 px-4">
                        <span class="badge" style="background: #dbeafe; color: #1e40af;">Engineer</span>
                      </td>
                      <td class="py-3 px-4 text-slate-600">rajesh@ujjain.gov.in</td>
                      <td class="py-3 px-4">
                        <span class="badge badge-success">Active</span>
                      </td>
                      <td class="py-3 px-4 text-center">
                        <button class="text-blue-600 hover:text-blue-700 font-semibold">Edit</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div>
        </div>

        <!-- REPORTS TAB -->
        <div id="reports-admin-tab" class="admin-settings-content hidden">
          <div class="grid gap-6">
            
            <div class="settings-card">
              <div class="flex items-center gap-3 mb-6 pb-6 border-b border-slate-200">
                <span class="material-symbols-rounded text-2xl text-cyan-600">assessment</span>
                <h3 class="text-lg font-bold text-slate-900">Reports & Analytics</h3>
              </div>

              <div class="grid md:grid-cols-2 gap-4">
                <div class="border border-slate-200 rounded-lg p-4 hover:shadow-md transition cursor-pointer">
                  <div class="flex items-start gap-3">
                    <span class="material-symbols-rounded text-2xl text-green-600">trending_up</span>
                    <div>
                      <h4 class="font-bold text-slate-900">Monthly Performance Report</h4>
                      <p class="text-xs text-slate-500 mt-1">Ticket resolution metrics and trends</p>
                      <button class="text-green-600 font-semibold text-sm mt-3 hover:text-green-700">Download PDF</button>
                    </div>
                  </div>
                </div>

                <div class="border border-slate-200 rounded-lg p-4 hover:shadow-md transition cursor-pointer">
                  <div class="flex items-start gap-3">
                    <span class="material-symbols-rounded text-2xl text-blue-600">bar_chart</span>
                    <div>
                      <h4 class="font-bold text-slate-900">Ward-wise Analytics</h4>
                      <p class="text-xs text-slate-500 mt-1">Performance by ward and category</p>
                      <button class="text-blue-600 font-semibold text-sm mt-3 hover:text-blue-700">View Report</button>
                    </div>
                  </div>
                </div>

                <div class="border border-slate-200 rounded-lg p-4 hover:shadow-md transition cursor-pointer">
                  <div class="flex items-start gap-3">
                    <span class="material-symbols-rounded text-2xl text-orange-600">person_check</span>
                    <div>
                      <h4 class="font-bold text-slate-900">Engineer Performance</h4>
                      <p class="text-xs text-slate-500 mt-1">Individual engineer metrics and efficiency</p>
                      <button class="text-orange-600 font-semibold text-sm mt-3 hover:text-orange-700">View Details</button>
                    </div>
                  </div>
                </div>

                <div class="border border-slate-200 rounded-lg p-4 hover:shadow-md transition cursor-pointer">
                  <div class="flex items-start gap-3">
                    <span class="material-symbols-rounded text-2xl text-red-600">warning</span>
                    <div>
                      <h4 class="font-bold text-slate-900">Escalation Report</h4>
                      <p class="text-xs text-slate-500 mt-1">Publicly escalated and overdue tickets</p>
                      <button class="text-red-600 font-semibold text-sm mt-3 hover:text-red-700">View Report</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </section>

    <!-- NOTIFICATIONS SECTION -->
    <section id="notifications" class="page-enter hidden">
      <div class="max-w-5xl mx-auto px-6 py-12">
        <div class="mb-8">
          <h1 class="text-3xl font-bold text-slate-900">Notifications</h1>
          <p class="text-slate-500 mt-2">Stay updated with all your ticket and system notifications</p>
        </div>

        <div class="grid gap-6">
          <!-- Notification 1 -->
          <div class="bg-white border border-green-200 rounded-lg p-6 hover:shadow-md transition flex items-start gap-4">
            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0">
              <span class="material-symbols-rounded text-2xl text-green-600">check_circle</span>
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-slate-900">Ticket Resolved</h3>
              <p class="text-sm text-slate-600 mt-1">Your complaint G-2025-1045 has been resolved successfully</p>
              <p class="text-xs text-slate-400 mt-2">2 hours ago</p>
            </div>
            <button class="text-blue-600 font-semibold text-sm hover:text-blue-700">View</button>
          </div>

          <!-- Notification 2 -->
          <div class="bg-white border border-orange-200 rounded-lg p-6 hover:shadow-md transition flex items-start gap-4">
            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0">
              <span class="material-symbols-rounded text-2xl text-orange-600">assignment</span>
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-slate-900">Assignment Update</h3>
              <p class="text-sm text-slate-600 mt-1">Ticket G-2025-1044 has been assigned to Engineer Rajesh Jadhav</p>
              <p class="text-xs text-slate-400 mt-2">5 hours ago</p>
            </div>
            <button class="text-blue-600 font-semibold text-sm hover:text-blue-700">View</button>
          </div>

          <!-- Notification 3 -->
          <div class="bg-white border border-blue-200 rounded-lg p-6 hover:shadow-md transition flex items-start gap-4">
            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
              <span class="material-symbols-rounded text-2xl text-blue-600">info</span>
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-slate-900">Status Update</h3>
              <p class="text-sm text-slate-600 mt-1">Your ticket G-2025-1043 is now in progress. Work started today.</p>
              <p class="text-xs text-slate-400 mt-2">1 day ago</p>
            </div>
            <button class="text-blue-600 font-semibold text-sm hover:text-blue-700">View</button>
          </div>

          <!-- Notification 4 -->
          <div class="bg-white border border-red-200 rounded-lg p-6 hover:shadow-md transition flex items-start gap-4">
            <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0">
              <span class="material-symbols-rounded text-2xl text-red-600">warning</span>
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-slate-900">Escalation Alert</h3>
              <p class="text-sm text-slate-600 mt-1">Ticket G-2025-1040 is approaching public escalation (1 day remaining)</p>
              <p class="text-xs text-slate-400 mt-2">3 days ago</p>
            </div>
            <button class="text-blue-600 font-semibold text-sm hover:text-blue-700">View</button>
          </div>
        </div>
      </div>
    </section>

    <!-- KNOWLEDGE BASE / FAQ SECTION -->
    <section id="knowledge-base" class="page-enter hidden">
      <div class="max-w-5xl mx-auto px-6 py-12">
        <div class="mb-8">
          <h1 class="text-3xl font-bold text-slate-900">Help & FAQ</h1>
          <p class="text-slate-500 mt-2">Find answers to common questions about GRAMS</p>
        </div>

        <!-- FAQ Items -->
        <div class="grid gap-4">
          <!-- FAQ 1 -->
          <div class="bg-white border border-slate-200 rounded-lg overflow-hidden hover:shadow-md transition">
            <button onclick="this.parentElement.nextElementSibling.classList.toggle('hidden')" class="w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50">
              <h3 class="font-bold text-slate-900">How do I file a complaint?</h3>
              <span class="material-symbols-rounded text-slate-600">expand_more</span>
            </button>
            <div class="hidden px-6 pb-4 text-slate-600 text-sm border-t border-slate-100">
              <p>To file a complaint, follow these steps:</p>
              <ol class="list-decimal ml-5 mt-2 space-y-1">
                <li>Click "New Complaint" button in the navbar</li>
                <li>Select the category and ward of your issue</li>
                <li>Provide detailed description and upload photos</li>
                <li>Submit and you'll receive a ticket number</li>
              </ol>
            </div>
          </div>

          <!-- FAQ 2 -->
          <div class="bg-white border border-slate-200 rounded-lg overflow-hidden hover:shadow-md transition">
            <button onclick="this.parentElement.nextElementSibling.classList.toggle('hidden')" class="w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50">
              <h3 class="font-bold text-slate-900">What is the 7-day escalation rule?</h3>
              <span class="material-symbols-rounded text-slate-600">expand_more</span>
            </button>
            <div class="hidden px-6 pb-4 text-slate-600 text-sm border-t border-slate-100">
              <p>If a complaint is not resolved within 7 days, it automatically becomes public. This means:</p>
              <ul class="list-disc ml-5 mt-2 space-y-1">
                <li>The ticket appears on the public transparency page</li>
                <li>All residents can see unresolved issues in their ward</li>
                <li>This creates accountability pressure on authorities</li>
              </ul>
            </div>
          </div>

          <!-- FAQ 3 -->
          <div class="bg-white border border-slate-200 rounded-lg overflow-hidden hover:shadow-md transition">
            <button onclick="this.parentElement.nextElementSibling.classList.toggle('hidden')" class="w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50">
              <h3 class="font-bold text-slate-900">How can I track my complaint?</h3>
              <span class="material-symbols-rounded text-slate-600">expand_more</span>
            </button>
            <div class="hidden px-6 pb-4 text-slate-600 text-sm border-t border-slate-100">
              <p>You can track your complaint by:</p>
              <ul class="list-disc ml-5 mt-2 space-y-1">
                <li>Visiting the "Track Ticket" page</li>
                <li>Entering your ticket number (e.g., G-2025-1001)</li>
                <li>View real-time status updates and assigned engineer details</li>
                <li>See estimated resolution date</li>
              </ul>
            </div>
          </div>

          <!-- FAQ 4 -->
          <div class="bg-white border border-slate-200 rounded-lg overflow-hidden hover:shadow-md transition">
            <button onclick="this.parentElement.nextElementSibling.classList.toggle('hidden')" class="w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50">
              <h3 class="font-bold text-slate-900">What are the different complaint categories?</h3>
              <span class="material-symbols-rounded text-slate-600">expand_more</span>
            </button>
            <div class="hidden px-6 pb-4 text-slate-600 text-sm border-t border-slate-100">
              <p>GRAMS handles various categories:</p>
              <ul class="list-disc ml-5 mt-2 space-y-1">
                <li><strong>Water Supply:</strong> Pipeline breaks, leaks, low pressure</li>
                <li><strong>Road Damage:</strong> Potholes, cracks, flooding</li>
                <li><strong>Street Lights:</strong> Non-functional or damaged lights</li>
                <li><strong>Waste Management:</strong> Garbage collection, dumping</li>
                <li><strong>Other:</strong> Any other civic issue</li>
              </ul>
            </div>
          </div>

          <!-- FAQ 5 -->
          <div class="bg-white border border-slate-200 rounded-lg overflow-hidden hover:shadow-md transition">
            <button onclick="this.parentElement.nextElementSibling.classList.toggle('hidden')" class="w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50">
              <h3 class="font-bold text-slate-900">Can I update or cancel my complaint?</h3>
              <span class="material-symbols-rounded text-slate-600">expand_more</span>
            </button>
            <div class="hidden px-6 pb-4 text-slate-600 text-sm border-t border-slate-100">
              <p>You can manage your complaint based on its status:</p>
              <ul class="list-disc ml-5 mt-2 space-y-1">
                <li>Update details before assignment</li>
                <li>Add photos or comments during progress</li>
                <li>Mark as resolved if issue is already fixed</li>
                <li>Cannot cancel after assignment to engineer</li>
              </ul>
            </div>
          </div>

          <!-- FAQ 6 -->
          <div class="bg-white border border-slate-200 rounded-lg overflow-hidden hover:shadow-md transition">
            <button onclick="this.parentElement.nextElementSibling.classList.toggle('hidden')" class="w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50">
              <h3 class="font-bold text-slate-900">Who can I contact for support?</h3>
              <span class="material-symbols-rounded text-slate-600">expand_more</span>
            </button>
            <div class="hidden px-6 pb-4 text-slate-600 text-sm border-t border-slate-100">
              <p>For assistance, contact:</p>
              <ul class="list-disc ml-5 mt-2 space-y-1">
                <li><strong>Email:</strong> support@grams.gov.in</li>
                <li><strong>Phone:</strong> +91-7343-2123456 (9 AM - 6 PM)</li>
                <li><strong>WhatsApp:</strong> +91-9876-543210</li>
                <li><strong>Office:</strong> District Control Room, Ujjain</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- USER PROFILE & ACCOUNT MANAGEMENT -->
    <section id="profile" class="page-enter hidden">
      <div class="max-w-5xl mx-auto px-6 py-12">
        <h1 class="text-3xl font-bold text-slate-900 mb-8">My Profile & Account</h1>

        <div class="grid md:grid-cols-3 gap-8">
          <!-- Sidebar: Avatar & Basic Info -->
          <div>
            <div class="bg-white rounded-lg p-6 text-center sticky top-24">
              <div class="w-24 h-24 rounded-full bg-gradient-to-br from-green-200 to-emerald-200 flex items-center justify-center text-4xl font-bold text-green-800 mx-auto mb-4">
                PK
              </div>
              <h2 class="font-bold text-lg text-slate-900">Pradeep Kalsaria</h2>
              <p class="text-xs text-green-700 uppercase font-semibold mt-1">District Admin</p>
              <button class="mt-4 w-full bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700 transition flex items-center justify-center gap-2">
                <span class="material-symbols-rounded text-base">photo_camera</span>
                Change Avatar
              </button>
            </div>
          </div>

          <!-- Main Content: Profile Details -->
          <div class="md:col-span-2 space-y-6">
            <!-- Personal Information -->
            <div class="bg-white rounded-lg p-6">
              <h3 class="font-bold text-lg text-slate-900 mb-4 flex items-center gap-2">
                <span class="material-symbols-rounded text-green-600">person</span>
                Personal Information
              </h3>
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-xs font-semibold text-slate-600 uppercase">Full Name</label>
                  <input type="text" class="input-field mt-1" value="Pradeep Kalsaria" />
                </div>
                <div>
                  <label class="text-xs font-semibold text-slate-600 uppercase">Email</label>
                  <input type="email" class="input-field mt-1" value="pradeep@ujjain.gov.in" />
                </div>
                <div>
                  <label class="text-xs font-semibold text-slate-600 uppercase">Phone</label>
                  <input type="tel" class="input-field mt-1" value="+91-7343-2123456" />
                </div>
                <div>
                  <label class="text-xs font-semibold text-slate-600 uppercase">Department</label>
                  <input type="text" class="input-field mt-1" value="District Administration" disabled />
                </div>
              </div>
              <button class="mt-4 btn-primary"><span class="material-symbols-rounded">check</span> Save Changes</button>
            </div>

            <!-- Change Password -->
            <div class="bg-white rounded-lg p-6">
              <h3 class="font-bold text-lg text-slate-900 mb-4 flex items-center gap-2">
                <span class="material-symbols-rounded text-orange-600">lock</span>
                Security
              </h3>
              <div class="space-y-4">
                <div>
                  <label class="text-xs font-semibold text-slate-600 uppercase">Current Password</label>
                  <input type="password" class="input-field mt-1" placeholder="••••••••" />
                </div>
                <div>
                  <label class="text-xs font-semibold text-slate-600 uppercase">New Password</label>
                  <input type="password" class="input-field mt-1" placeholder="••••••••" />
                </div>
                <div>
                  <label class="text-xs font-semibold text-slate-600 uppercase">Confirm Password</label>
                  <input type="password" class="input-field mt-1" placeholder="••••••••" />
                </div>
              </div>
              <button class="mt-4 btn-primary"><span class="material-symbols-rounded">check</span> Update Password</button>
            </div>

            <!-- Preferences -->
            <div class="bg-white rounded-lg p-6">
              <h3 class="font-bold text-lg text-slate-900 mb-4 flex items-center gap-2">
                <span class="material-symbols-rounded text-blue-600">tune</span>
                Preferences
              </h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between">
                  <span class="text-sm font-semibold text-slate-900">Email Notifications</span>
                  <label class="toggle-switch"><input type="checkbox" checked /><span class="toggle-slider"></span></label>
                </div>
                <div class="flex items-center justify-between border-t pt-4">
                  <span class="text-sm font-semibold text-slate-900">SMS Alerts</span>
                  <label class="toggle-switch"><input type="checkbox" /><span class="toggle-slider"></span></label>
                </div>
                <div class="flex items-center justify-between border-t pt-4">
                  <span class="text-sm font-semibold text-slate-900">Weekly Report</span>
                  <label class="toggle-switch"><input type="checkbox" checked /><span class="toggle-slider"></span></label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PERFORMANCE DASHBOARD -->
    <section id="performance-dashboard" class="page-enter hidden">
      <div class="max-w-7xl mx-auto px-6 py-12">
        <h1 class="text-3xl font-bold text-slate-900 mb-8">Performance Metrics</h1>

        <!-- Overall Stats -->
        <div class="grid md:grid-cols-4 gap-4 mb-8">
          <div class="bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-xs text-green-700 uppercase font-semibold">Avg Resolution Time</p>
                <p class="text-3xl font-bold text-green-900 mt-2">2.5 days</p>
              </div>
              <span class="material-symbols-rounded text-4xl text-green-300">trending_down</span>
            </div>
          </div>

          <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-xs text-blue-700 uppercase font-semibold">Resolution Rate</p>
                <p class="text-3xl font-bold text-blue-900 mt-2">94.5%</p>
              </div>
              <span class="material-symbols-rounded text-4xl text-blue-300">check_circle</span>
            </div>
          </div>

          <div class="bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-xs text-orange-700 uppercase font-semibold">Active Tickets</p>
                <p class="text-3xl font-bold text-orange-900 mt-2">145</p>
              </div>
              <span class="material-symbols-rounded text-4xl text-orange-300">assignment</span>
            </div>
          </div>

          <div class="bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-xs text-purple-700 uppercase font-semibold">Total Resolved</p>
                <p class="text-3xl font-bold text-purple-900 mt-2">2,345</p>
              </div>
              <span class="material-symbols-rounded text-4xl text-purple-300">celebration</span>
            </div>
          </div>
        </div>

        <!-- Engineer Performance Table -->
        <div class="bg-white rounded-lg border border-slate-200 p-6 mb-8">
          <h2 class="font-bold text-lg text-slate-900 mb-4">Top Performing Engineers</h2>
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b border-slate-200">
                  <th class="text-left py-3 px-4 font-semibold text-slate-900">Engineer</th>
                  <th class="text-center py-3 px-4 font-semibold text-slate-900">Tickets Resolved</th>
                  <th class="text-center py-3 px-4 font-semibold text-slate-900">Avg Time</th>
                  <th class="text-center py-3 px-4 font-semibold text-slate-900">Satisfaction</th>
                  <th class="text-center py-3 px-4 font-semibold text-slate-900">Status</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-b border-slate-100 hover:bg-slate-50">
                  <td class="py-3 px-4">Rajesh Jadhav</td>
                  <td class="py-3 px-4 text-center text-green-600 font-semibold">287</td>
                  <td class="py-3 px-4 text-center">2.1 days</td>
                  <td class="py-3 px-4 text-center"><span class="text-yellow-500">★★★★★</span></td>
                  <td class="py-3 px-4 text-center"><span class="status-online"></span> Active</td>
                </tr>
                <tr class="border-b border-slate-100 hover:bg-slate-50">
                  <td class="py-3 px-4">Meera Singh</td>
                  <td class="py-3 px-4 text-center text-green-600 font-semibold">265</td>
                  <td class="py-3 px-4 text-center">2.3 days</td>
                  <td class="py-3 px-4 text-center"><span class="text-yellow-500">★★★★☆</span></td>
                  <td class="py-3 px-4 text-center"><span class="status-online"></span> Active</td>
                </tr>
                <tr class="border-b border-slate-100 hover:bg-slate-50">
                  <td class="py-3 px-4">Arun Kumar</td>
                  <td class="py-3 px-4 text-center text-green-600 font-semibold">234</td>
                  <td class="py-3 px-4 text-center">2.8 days</td>
                  <td class="py-3 px-4 text-center"><span class="text-yellow-500">★★★★☆</span></td>
                  <td class="py-3 px-4 text-center"><span class="status-offline"></span> On Leave</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- SYSTEM STATUS PAGE -->
    <section id="system-status" class="page-enter hidden">
      <div class="max-w-5xl mx-auto px-6 py-12">
        <h1 class="text-3xl font-bold text-slate-900 mb-8">System Status</h1>

        <!-- Overall Status -->
        <div class="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6 mb-8">
          <div class="flex items-center gap-4">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center">
              <span class="material-symbols-rounded text-4xl text-green-600">check_circle</span>
            </div>
            <div>
              <h2 class="text-2xl font-bold text-green-900">All Systems Operational</h2>
              <p class="text-green-700 text-sm mt-1">Last incident: 45 days ago • Uptime: 99.8%</p>
            </div>
          </div>
        </div>

        <!-- Service Status -->
        <div class="grid md:grid-cols-2 gap-6 mb-8">
          <div class="bg-white border border-slate-200 rounded-lg p-6">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-slate-900">Web Portal</h3>
              <span class="status-online"></span>
            </div>
            <p class="text-sm text-slate-600 mb-2">Response Time: <span class="font-semibold">142ms</span></p>
            <div class="w-full bg-slate-200 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width: 98%"></div></div>
          </div>

          <div class="bg-white border border-slate-200 rounded-lg p-6">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-slate-900">Database</h3>
              <span class="status-online"></span>
            </div>
            <p class="text-sm text-slate-600 mb-2">Query Time: <span class="font-semibold">85ms</span></p>
            <div class="w-full bg-slate-200 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width: 99%"></div></div>
          </div>

          <div class="bg-white border border-slate-200 rounded-lg p-6">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-slate-900">Email Service</h3>
              <span class="status-online"></span>
            </div>
            <p class="text-sm text-slate-600 mb-2">Delivery Rate: <span class="font-semibold">99.5%</span></p>
            <div class="w-full bg-slate-200 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width: 99.5%"></div></div>
          </div>

          <div class="bg-white border border-yellow-200 rounded-lg p-6 bg-yellow-50">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-bold text-slate-900">SMS Gateway</h3>
              <span style="color: #ff9933;" class="material-symbols-rounded">warning</span>
            </div>
            <p class="text-sm text-slate-600 mb-2">Delivery Rate: <span class="font-semibold">92%</span></p>
            <div class="w-full bg-slate-200 rounded-full h-2"><div class="bg-yellow-500 h-2 rounded-full" style="width: 92%"></div></div>
          </div>
        </div>

        <!-- Scheduled Maintenance -->
        <div class="bg-white border border-slate-200 rounded-lg p-6">
          <h3 class="font-bold text-lg text-slate-900 mb-4">Upcoming Maintenance</h3>
          <div class="space-y-3">
            <div class="flex items-start gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg">
              <span class="material-symbols-rounded text-blue-600 flex-shrink-0">schedule</span>
              <div>
                <p class="font-semibold text-slate-900">Database Optimization</p>
                <p class="text-xs text-slate-600">Scheduled: December 25, 2025 • 2:00 AM - 4:00 AM IST</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- AUDIT LOGS -->
    <section id="audit-logs" class="page-enter hidden">
      <div class="max-w-5xl mx-auto px-6 py-12">
        <h1 class="text-3xl font-bold text-slate-900 mb-8">Audit Logs</h1>

        <div class="mb-6">
          <input type="text" class="input-field" placeholder="Search audit logs..." />
        </div>

        <div class="space-y-3">
          <div class="audit-item">
            <div class="flex items-start justify-between">
              <div>
                <p class="font-semibold text-slate-900">Ticket G-2025-1050 assigned to Rajesh Jadhav</p>
                <p class="text-xs text-slate-600 mt-1">By: Pradeep Kalsaria (Admin) • 10 minutes ago</p>
              </div>
              <span class="text-xs font-semibold text-green-700 uppercase">CREATE</span>
            </div>
          </div>

          <div class="audit-item">
            <div class="flex items-start justify-between">
              <div>
                <p class="font-semibold text-slate-900">Admin settings modified - Escalation days changed from 7 to 5</p>
                <p class="text-xs text-slate-600 mt-1">By: Pradeep Kalsaria (Admin) • 2 hours ago</p>
              </div>
              <span class="text-xs font-semibold text-blue-700 uppercase">MODIFY</span>
            </div>
          </div>

          <div class="audit-item warning">
            <div class="flex items-start justify-between">
              <div>
                <p class="font-semibold text-slate-900">Failed login attempt - User: admin@example.com</p>
                <p class="text-xs text-slate-600 mt-1">Failed attempt from IP: 192.168.1.100 • 1 day ago</p>
              </div>
              <span class="text-xs font-semibold text-orange-700 uppercase">WARNING</span>
            </div>
          </div>

          <div class="audit-item">
            <div class="flex items-start justify-between">
              <div>
                <p class="font-semibold text-slate-900">User 'Meera Singh' role changed from Engineer to Senior Engineer</p>
                <p class="text-xs text-slate-600 mt-1">By: Pradeep Kalsaria (Admin) • 3 days ago</p>
              </div>
              <span class="text-xs font-semibold text-green-700 uppercase">MODIFY</span>
            </div>
          </div>

          <div class="audit-item error">
            <div class="flex items-start justify-between">
              <div>
                <p class="font-semibold text-slate-900">Database backup failed - Disk space critical</p>
                <p class="text-xs text-slate-600 mt-1">System Alert • 5 days ago</p>
              </div>
              <span class="text-xs font-semibold text-red-700 uppercase">ERROR</span>
            </div>
          </div>

          <div class="audit-item">
            <div class="flex items-start justify-between">
              <div>
                <p class="font-semibold text-slate-900">Report exported - Monthly Performance Report</p>
                <p class="text-xs text-slate-600 mt-1">By: Pradeep Kalsaria (Admin) • 1 week ago</p>
              </div>
              <span class="text-xs font-semibold text-green-700 uppercase">EXPORT</span>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer class="bg-slate-900 text-slate-400 py-10 mt-20 text-sm">
    <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-white font-bold text-lg mb-2">GRAMS</h3>
        <p>Team Nexus TechSol</p>
      </div>
      <div>
        <h4 class="text-white font-bold mb-2">Quick Links</h4>
        <ul class="space-y-1">
          <li><button onclick="showSection('landing')" class="hover:text-white">Home</button></li>
          <li><button onclick="showSection('track')" class="hover:text-white">Track Status</button></li>
          <li><button onclick="showSection('login')" class="hover:text-white">Admin Login</button></li>
        </ul>
      </div>
      <div>
        <h4 class="text-white font-bold mb-2">Legal</h4>
        <ul class="space-y-1">
          <li><a href="#" class="hover:text-white">Privacy Policy</a></li>
          <li><a href="#" class="hover:text-white">Terms of Use</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <!-- SETTINGS MODAL -->
  <div id="settingsModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
      <div class="flex justify-between items-center mb-4">
        <h3 class="font-bold text-lg text-slate-900">Admin Settings</h3>
        <button onclick="toggleSettings()" class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center">
          <span class="material-symbols-rounded text-base" aria-hidden="true">close</span>
        </button>
      </div>
      <p class="text-sm text-slate-500 mb-4">This is a demo settings panel. In production you can manage notification preferences, role permissions, and district configuration here.</p>
      <button onclick="toggleSettings()" class="w-full bg-slate-900 text-white py-2.5 rounded-lg font-bold hover:bg-slate-800 transition">Close</button>
    </div>
  </div>

  <!-- ENGINEER RESOLUTION MODAL -->
  <!-- ENGINEER RESOLUTION MODAL -->
<div id="resolutionModal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 hidden">
  <div class="bg-white rounded-3xl shadow-2xl max-w-lg w-full mx-4 border-2 border-slate-200">
    <div class="bg-gradient-to-r from-green-600 to-emerald-600 p-6 rounded-t-3xl">
      <div class="flex justify-between items-center">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
            <span class="material-symbols-rounded text-white text-xl" aria-hidden="true">task_alt</span>
          </div>
          <h3 class="text-xl font-bold text-white">Close Task: Fix Open Manhole</h3>
        </div>
        <button onclick="closeResolutionModal()" class="w-8 h-8 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center transition">
          <span class="material-symbols-rounded text-white text-base" aria-hidden="true">close</span>
        </button>
      </div>
    </div>

    <form onsubmit="submitResolution(event)" class="p-6 space-y-5">
      <div>
        <label class="block text-xs font-bold text-slate-600 uppercase mb-2">1. Upload Photo Proof</label>
        <div class="relative">
          <input 
            type="file" 
            id="resolutionPhoto" 
            accept="image/*" 
            class="w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 transition cursor-pointer"
            required
          />
        </div>
        <p class="text-xs text-slate-400 mt-2">Upload at least one clear photo showing the fixed issue.</p>
      </div>

      <div>
        <label for="resolutionNote" class="block text-xs font-bold text-slate-600 uppercase mb-2">2. Explain the Problem & Fix</label>
        <textarea 
          id="resolutionNote" 
          rows="4" 
          class="w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition resize-none" 
          placeholder="Briefly describe what was wrong and what work you did to resolve it..."
          required
        ></textarea>
      </div>

      <div class="flex gap-3 pt-2">
        <button 
          type="button" 
          onclick="closeResolutionModal()" 
          class="flex-1 px-6 py-3 rounded-xl text-sm font-bold text-slate-600 border-2 border-slate-300 hover:bg-slate-50 transition"
        >
          Cancel
        </button>
        <button 
          type="submit" 
          class="flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-3 rounded-xl text-sm font-bold shadow-lg hover:shadow-xl hover:from-green-700 hover:to-emerald-700 transition flex items-center justify-center gap-2"
        >
          <span class="material-symbols-rounded text-base" aria-hidden="true">check_circle</span>
          Submit & Mark Completed
        </button>
      </div>
    </form>
  </div>
</div>


  <!-- TICKET DETAILS DRAWER -->
  <div id="ticketDrawer" class="hidden fixed inset-0 bg-black/40 flex items-end md:items-center justify-center z-50">
    <div class="bg-white rounded-t-2xl md:rounded-2xl shadow-2xl max-w-2xl w-full p-6">
      <div class="flex justify-between items-center mb-4">
        <div>
          <p class="text-xs font-bold text-slate-400 uppercase">Ticket</p>
          <h3 id="drawerTitle" class="font-bold text-lg text-slate-900">Ticket Title</h3>
        </div>
        <button onclick="closeTicketDrawer()" class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center">
          <span class="material-symbols-rounded text-base" aria-hidden="true">close</span>
        </button>
      </div>

      <div class="flex flex-wrap items-center justify-between text-xs text-slate-500 border-b border-slate-200 pb-3 mb-4 gap-2">
        <span id="drawerTicketId" class="font-mono text-[11px] bg-slate-100 px-2 py-1 rounded">#ID</span>
        <span id="drawerStatus" class="inline-flex items-center px-2 py-1 rounded-full text-[11px] font-bold bg-slate-100 text-slate-700">Status</span>
        <span id="drawerCategoryWard" class="text-[11px]">Category • Ward</span>
        <span id="drawerAssignee" class="text-[11px]">Assigned To</span>
        <span id="drawerCreated" class="text-[11px]">Created</span>
      </div>

      <div class="mb-4">
        <p class="text-xs font-bold text-slate-500 uppercase mb-1">Summary</p>
        <p id="drawerSummary" class="text-sm text-slate-700">Ticket summary goes here.</p>
      </div>

      <div id="drawerResolutionBlock" class="mb-1 hidden">
        <p class="text-xs font-bold text-green-700 uppercase mb-1">Engineer Resolution Note</p>
        <p id="drawerResolution" class="text-sm text-green-900"></p>
      </div>

      <p class="text-[11px] text-slate-400 mt-2">This is demo data only. In a real system these details will come from the backend.</p>
    </div>
  </div>

  <script>
    // GENERAL NAVIGATION
    function showSection(id) {
      document.querySelectorAll('main section').forEach(el => el.classList.add('hidden'));
      const section = document.getElementById(id);
      if (section) section.classList.remove('hidden');

      // top nav active
      document.querySelectorAll('.top-nav-link').forEach(link => {
        if (link.dataset.section === id) {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });

      window.scrollTo(0, 0);
    }

    // LOGIN TABS
    function switchLoginTab(role) {
      document.querySelectorAll('.login-tab').forEach(el => el.classList.remove('active'));
      document.getElementById('tab-' + role).classList.add('active');
      document.querySelectorAll('.login-form').forEach(el => el.classList.add('hidden'));
      document.getElementById('form-' + role).classList.remove('hidden');
    }

    // AUTH HANDLER (MOCK)
    function handleAuth(role) {
      const form = document.getElementById('form-' + role);
      const btn = form ? form.querySelector('button[type="submit"]') : null;
      if (!btn) return;
      const originalText = btn.innerText;
      btn.innerText = 'Authenticating...';

      setTimeout(() => {
        btn.innerText = originalText;
        if (role === 'admin') {
          showSection('dash-admin');
          updateNavBar('District Admin', 'Signed in');
          switchAdminView('overview');
          initChart();
        } else if (role === 'engineer') {
          showSection('dash-engineer');
          updateNavBar('Rajesh Sharma', 'Engineer');
        } else {
          showSection('dash-citizen');
          updateNavBar('Pradeep Kalsaria', 'Citizen');
          confetti({ particleCount: 80, spread: 70, origin: { y: 0.6 } });
        }
      }, 900);
    }

    function updateNavBar(name, subtitle) {
  const loginBtn = document.getElementById('loginBtn');
  const logoutBtn = document.getElementById('logoutBtn');
  const profile = document.getElementById('userProfile');
  const nameSpan = document.getElementById('userNameDisplay');
  const roleSpan = document.getElementById('userRoleDisplay');

  if (loginBtn) loginBtn.classList.add('hidden');
  if (logoutBtn) logoutBtn.classList.remove('hidden');
  if (profile) {
    profile.classList.remove('hidden');
    profile.classList.add('md:flex');
  }
  if (nameSpan) nameSpan.innerText = name || 'User';
  if (roleSpan) roleSpan.innerText = subtitle || 'Signed in';
}


    function logout() {
      location.reload();
    }

    // VOICE MOCK
    function toggleVoice() {
      const overlay = document.getElementById('voiceOverlay');
      const textarea = document.getElementById('descArea');
      if (overlay.classList.contains('hidden')) {
        overlay.classList.remove('hidden');
        setTimeout(() => {
          overlay.classList.add('hidden');
          if (!textarea.value) {
            textarea.value = "The main road in Sector 4 has developed a large pothole due to yesterday's rain. It is causing traffic jams.";
          }
        }, 3000);
      } else {
        overlay.classList.add('hidden');
      }
    }

    // GRIEVANCE SUBMIT
    function submitGrievance() {
      const desc = document.getElementById('descArea');
      if (!desc.value || desc.value.trim().length < 20) {
        alert('Please enter a brief description of the issue (at least 20 characters).');
        return;
      }

      confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 },
        colors: ['#138808', '#FF9933', '#FFFFFF']
      });
      setTimeout(() => {
        alert('Grievance Submitted Successfully! (Demo)');
        showSection('dash-citizen');
      }, 1200);
    }

    // TRACK TIMELINE
    function showTimeline() {
      const input = document.getElementById('trackIdInput');
      const error = document.getElementById('trackError');
      const timeline = document.getElementById('timelineResult');
      const idValue = input.value.trim();

      const isValid = /^G-\d{4}-\d{4}$/i.test(idValue);

      if (isValid) {
        error.classList.add('hidden');
        document.getElementById('trackedTicketId').innerText = '#' + idValue.toUpperCase();
        timeline.classList.remove('hidden');
      } else {
        error.classList.remove('hidden');
        timeline.classList.add('hidden');
      }
    }

    // CATEGORY SELECT
    function selectCat(el, categoryName) {
      const siblings = el.parentElement.children;
      for (let i = 0; i < siblings.length; i++) {
        siblings[i].classList.remove('border-green-500', 'bg-green-50');
      }
      el.classList.add('border-green-500', 'bg-green-50');
      const label = document.getElementById('selectedCategoryLabel');
      label.textContent = 'Selected: ' + categoryName;
    }

    // ADMIN CHART
    function initChart() {
      const ctx = document.getElementById('adminChart');
      if (!ctx) return;
      if (window._adminChart) {
        window._adminChart.destroy();
      }
      window._adminChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
          datasets: [
            {
              label: 'New Tickets',
              data: [50, 60, 55, 70, 65, 80, 75],
              borderColor: '#0f766e',
              backgroundColor: 'rgba(15,118,110,0.15)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'Resolved',
              data: [30, 40, 35, 50, 55, 60, 65],
              borderColor: '#22c55e',
              backgroundColor: 'rgba(34,197,94,0.15)',
              tension: 0.4,
              fill: true
            }
          ]
        },
        options: {
          plugins: { legend: { display: true } },
          scales: {
            x: { grid: { display: false } },
            y: { beginAtZero: true }
          }
        }
      });
    }

    // ANALYTICS CHARTS
    function initAnalyticsCharts() {
      // KPI Overview Chart
      const analyticsCtx = document.getElementById('adminAnalyticsChart');
      if (analyticsCtx) {
        if (window._analyticsChart) {
          window._analyticsChart.destroy();
        }
        window._analyticsChart = new Chart(analyticsCtx, {
          type: 'bar',
          data: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
            datasets: [
              {
                label: 'SLA Compliance %',
                data: [85, 88, 90, 92],
                backgroundColor: '#22c55e',
                borderColor: '#16a34a',
                borderWidth: 2
              },
              {
                label: 'Repeat Complaints %',
                data: [12, 9, 8, 7],
                backgroundColor: '#f97316',
                borderColor: '#ea580c',
                borderWidth: 2
              }
            ]
          },
          options: {
            plugins: { legend: { display: true, position: 'top' } },
            scales: {
              x: { grid: { display: false } },
              y: { beginAtZero: true, max: 100 }
            }
          }
        });
      }

      // Status Distribution Chart
      const statusCtx = document.getElementById('statusDistributionChart');
      if (statusCtx) {
        if (window._statusChart) {
          window._statusChart.destroy();
        }
        window._statusChart = new Chart(statusCtx, {
          type: 'doughnut',
          data: {
            labels: ['Resolved', 'Pending', 'Escalated', 'Reopened'],
            datasets: [{
              data: [2287, 147, 53, 0],
              backgroundColor: ['#22c55e', '#f59e0b', '#ef4444', '#6b7280'],
              borderColor: '#fff',
              borderWidth: 2
            }]
          },
          options: {
            plugins: { legend: { position: 'bottom' } },
            responsive: true,
            maintainAspectRatio: true
          }
        });
      }

      // Resolution Timeline Chart
      const timelineCtx = document.getElementById('resolutionTimelineChart');
      if (timelineCtx) {
        if (window._timelineChart) {
          window._timelineChart.destroy();
        }
        window._timelineChart = new Chart(timelineCtx, {
          type: 'line',
          data: {
            labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7+'],
            datasets: [{
              label: 'Complaints Resolved by Day',
              data: [450, 380, 290, 210, 140, 85, 52],
              borderColor: '#0f766e',
              backgroundColor: 'rgba(15,118,110,0.1)',
              tension: 0.4,
              fill: true,
              pointBackgroundColor: '#0f766e',
              pointBorderColor: '#fff',
              pointBorderWidth: 2
            }]
          },
          options: {
            plugins: { legend: { display: true } },
            scales: {
              x: { grid: { display: false } },
              y: { beginAtZero: true }
            }
          }
        });
      }
    }

    // REPORTS CHARTS
    function initReportsCharts() {
      // Report Type Distribution Chart
      const reportTypeCtx = document.getElementById('reportTypeChart');
      if (reportTypeCtx) {
        if (window._reportTypeChart) {
          window._reportTypeChart.destroy();
        }
        window._reportTypeChart = new Chart(reportTypeCtx, {
          type: 'doughnut',
          data: {
            labels: ['Monthly', 'Weekly', 'Quarterly', 'Custom'],
            datasets: [{
              data: [8, 10, 4, 2],
              backgroundColor: ['#22c55e', '#f97316', '#3b82f6', '#a855f7'],
              borderColor: '#fff',
              borderWidth: 2
            }]
          },
          options: {
            plugins: { legend: { position: 'bottom', labels: { boxWidth: 12, font: { size: 11 } } } },
            responsive: true,
            maintainAspectRatio: true
          }
        });
      }

      // Monthly Report Trend Chart
      const reportTrendCtx = document.getElementById('reportTrendChart');
      if (reportTrendCtx) {
        if (window._reportTrendChart) {
          window._reportTrendChart.destroy();
        }
        window._reportTrendChart = new Chart(reportTrendCtx, {
          type: 'line',
          data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            datasets: [{
              label: 'Reports Generated',
              data: [2, 3, 2, 3, 2, 2, 3, 2, 2, 3, 2, 2],
              borderColor: '#0f766e',
              backgroundColor: 'rgba(15,118,110,0.1)',
              tension: 0.4,
              fill: true,
              pointBackgroundColor: '#0f766e',
              pointBorderColor: '#fff',
              pointBorderWidth: 2,
              pointRadius: 3
            }]
          },
          options: {
            plugins: { legend: { display: false } },
            scales: {
              x: { grid: { display: false } },
              y: { beginAtZero: true }
            }
          }
        });
      }
    }

    // WARD MAP
    function initWardMap() {
      const mapContainer = document.getElementById('wardMapContainer');
      if (!mapContainer || window._wardMap) return;

      // Create map centered on a sample location
      window._wardMap = L.map('wardMapContainer').setView([28.6139, 77.2090], 12);

      // Add OpenStreetMap tiles
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors',
        maxZoom: 19
      }).addTo(window._wardMap);

      // Sample ward data with ticket counts
      const wards = [
        { name: 'Ward 1', lat: 28.6200, lng: 77.2100, tickets: 18, color: '#22c55e' },
        { name: 'Ward 2', lat: 28.6150, lng: 77.2150, tickets: 12, color: '#22c55e' },
        { name: 'Ward 3', lat: 28.6100, lng: 77.2000, tickets: 8, color: '#22c55e' },
        { name: 'Ward 4', lat: 28.6050, lng: 77.2200, tickets: 32, color: '#ef4444' },
        { name: 'Ward 5', lat: 28.6250, lng: 77.2050, tickets: 25, color: '#f97316' },
        { name: 'Ward 7', lat: 28.6000, lng: 77.2100, tickets: 24, color: '#f97316' },
        { name: 'Ward 12', lat: 28.6175, lng: 77.1950, tickets: 18, color: '#22c55e' }
      ];

      // Add circles for each ward
      wards.forEach(ward => {
        const radius = 500 + (ward.tickets * 100);
        const popup = `<div class="text-xs font-bold"><strong>${ward.name}</strong><br>Tickets: ${ward.tickets}</div>`;
        
        L.circleMarker([ward.lat, ward.lng], {
          radius: Math.sqrt(ward.tickets) * 2 + 5,
          fillColor: ward.color,
          color: ward.color,
          weight: 2,
          opacity: 1,
          fillOpacity: 0.7
        })
        .bindPopup(popup)
        .addTo(window._wardMap);

        // Add marker with label
        L.marker([ward.lat, ward.lng], {
          icon: L.divIcon({
            className: 'text-xs font-bold text-center',
            html: `<div style="background: white; border: 2px solid ${ward.color}; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 11px;">${ward.tickets}</div>`,
            iconSize: [32, 32]
          })
        })
        .bindPopup(popup)
        .addTo(window._wardMap);
      });

      // Fit bounds to show all markers
      window._wardMap.invalidateSize();
    }

    // ADMIN VIEWS
    function switchAdminView(view, el) {
      const views = ['overview','alltickets','escalations','engineers','wardmap','analytics','reports'];
      views.forEach(v => {
        const div = document.getElementById('admin-view-' + v);
        if (div) div.classList.add('hidden');
      });
      const activeView = document.getElementById('admin-view-' + view);
      if (activeView) activeView.classList.remove('hidden');

      if (el) {
        document.querySelectorAll('#dash-admin .nav-link').forEach(btn => btn.classList.remove('active'));
        el.classList.add('active');
      }

      if (view === 'overview') initChart();
      if (view === 'analytics') {
        setTimeout(() => initAnalyticsCharts(), 100);
      }
      if (view === 'wardmap') {
        setTimeout(() => initWardMap(), 100);
      }
      if (view === 'reports') {
        setTimeout(() => initReportsCharts(), 100);
      }
    }

    // TICKET FILTER
    function filterTickets() {
      const search = document.getElementById('ticketSearch')?.value.toLowerCase() || '';
      const status = document.getElementById('ticketStatusFilter')?.value || 'all';
      const rows = document.querySelectorAll('#ticketTableBody tr');

      rows.forEach(row => {
        const rowStatus = row.getAttribute('data-status');
        const text = row.innerText.toLowerCase();
        const matchesStatus = (status === 'all') || (rowStatus === status);
        const matchesSearch = !search || text.includes(search);
        if (matchesStatus && matchesSearch) {
          row.classList.remove('hidden');
        } else {
          row.classList.add('hidden');
        }
      });
    }

    // SETTINGS MODAL
    function toggleSettings() {
      const modal = document.getElementById('settingsModal');
      modal.classList.toggle('hidden');
    }

    // ENGINEER FLOW
    function openResolutionModal() {
      const badge = document.getElementById('engTask1Priority');
      if (badge.dataset.state === 'done') return;
      document.getElementById('resolutionModal').classList.remove('hidden');
    }

    function closeResolutionModal() {
      document.getElementById('resolutionModal').classList.add('hidden');
    }

    function submitResolution(event) {
      event.preventDefault();
      const photoInput = document.getElementById('resolutionPhoto');
      const noteInput = document.getElementById('resolutionNote');

      if (!photoInput.files || photoInput.files.length === 0) {
        alert('Please upload at least one photo as proof.');
        return;
      }

      const note = noteInput.value.trim();
      if (note.length < 20) {
        alert('Please provide a short explanation of the problem and fix (at least 20 characters).');
        return;
      }

      markTaskComplete(note);

      photoInput.value = '';
      noteInput.value = '';
      closeResolutionModal();
    }

    function markTaskComplete(note) {
      // Store globally so drawer can read it
      window._engResolutionNote = note;

      // Update Engineer card
      const badge = document.getElementById('engTask1Priority');
      const deadline = document.getElementById('engTask1Deadline');
      const card = document.getElementById('engTask1Card');
      const button = document.getElementById('engTask1UpdateBtn');
      const resolutionBox = document.getElementById('engTask1Resolution');
      const resolutionText = document.getElementById('engTask1ResolutionText');

      badge.dataset.state = 'done';
      badge.className = 'bg-green-50 text-green-700 text-xs font-bold px-3 py-1 rounded-full';
      badge.textContent = 'Completed';
      deadline.className = 'text-sm font-bold text-green-700';
      button.textContent = 'Completed';
      button.disabled = true;
      button.classList.add('opacity-70', 'cursor-not-allowed');
      card.classList.add('opacity-90');
      resolutionText.textContent = note;
      resolutionBox.classList.remove('hidden');

      // Update All Tickets row G-2025-1001
      const row = document.getElementById('ticket-row-1001');
      if (row) {
        row.setAttribute('data-status', 'Resolved');
        row.dataset.resolution = note;
        const statusCell = row.querySelector('[data-cell="status"]');
        if (statusCell) {
          statusCell.innerHTML = '<span class="inline-flex items-center px-2 py-1 rounded-full text-[11px] font-bold bg-green-50 text-green-600">Resolved</span>';
        }
      }

      // Update Escalation card
      const escStatus = document.getElementById('escalation1Status');
      const escNext = document.getElementById('escalation1NextAction');
      const escBadgeNote = document.getElementById('escalation1BadgeNote');
      const escRes = document.getElementById('escalation1Resolution');

      if (escStatus) escStatus.textContent = 'Work completed, awaiting verification';
      if (escNext) escNext.textContent = 'Verify site & close escalation';
      if (escBadgeNote) escBadgeNote.textContent = 'Engineer marked completed';
      if (escRes) {
        escRes.textContent = 'Engineer note: ' + note;
        escRes.classList.remove('hidden');
      }
    }

    function viewEngineerTaskOnMap() {
      const locSpan = document.getElementById('engTask1Location');
      const locationText = locSpan ? locSpan.textContent : 'Near Govt School, Sector 4';
      const url = 'https://www.google.com/maps/search/?api=1&query=' + encodeURIComponent(locationText);
      window.open(url, '_blank');
    }

    // TICKET DRAWER
    function openTicketDrawer(row) {
      const drawer = document.getElementById('ticketDrawer');
      if (!drawer || !row) return;

      const id = row.dataset.id || '';
      const title = row.dataset.title || '';
      const cat = row.dataset.category || '';
      const ward = row.dataset.ward || '';
      const assignee = row.dataset.assignee || '';
      const created = row.dataset.created || '';
      const summary = row.dataset.summary || '';
      let resolution = row.dataset.resolution || '';

      // If this is the pipeline ticket and engineer note exists, prefer that
      if (id === 'G-2025-1001' && window._engResolutionNote) {
        resolution = window._engResolutionNote;
      }

      const status = row.getAttribute('data-status') || 'Open';

      document.getElementById('drawerTitle').innerText = title;
      document.getElementById('drawerTicketId').innerText = '#' + id;
      document.getElementById('drawerCategoryWard').innerText = cat + ' • ' + ward;
      document.getElementById('drawerAssignee').innerText = 'Assigned: ' + assignee;
      document.getElementById('drawerCreated').innerText = created;
      document.getElementById('drawerSummary').innerText = summary;

      const statusChip = document.getElementById('drawerStatus');
      statusChip.className = 'inline-flex items-center px-2 py-1 rounded-full text-[11px] font-bold';
      statusChip.innerText = status;

      if (status === 'Resolved') {
        statusChip.classList.add('bg-green-50','text-green-700');
      } else if (status === 'Escalated') {
        statusChip.classList.add('bg-red-50','text-red-600');
      } else if (status === 'In Progress') {
        statusChip.classList.add('bg-orange-50','text-orange-600');
      } else {
        statusChip.classList.add('bg-slate-100','text-slate-700');
      }

      const resBlock = document.getElementById('drawerResolutionBlock');
      const resText = document.getElementById('drawerResolution');
      if (resolution && resolution.trim().length > 0) {
        resText.textContent = resolution;
        resBlock.classList.remove('hidden');
      } else {
        resText.textContent = '';
        resBlock.classList.add('hidden');
      }

      drawer.classList.remove('hidden');
    }

    function closeTicketDrawer() {
      const drawer = document.getElementById('ticketDrawer');
      if (drawer) drawer.classList.add('hidden');
    }

    // Admin Settings Tab Switching
    function switchAdminTab(tabName) {
      // Hide all tabs
      const allTabs = document.querySelectorAll('.admin-settings-content');
      allTabs.forEach(tab => tab.classList.add('hidden'));

      // Remove active class from all buttons
      const allButtons = document.querySelectorAll('#admin-settings .settings-tab');
      allButtons.forEach(btn => btn.classList.remove('active'));

      // Show selected tab
      const selectedTab = document.getElementById(`${tabName}-admin-tab`);
      if (selectedTab) {
        selectedTab.classList.remove('hidden');
      }

      // Add active class to clicked button
      event.target.closest('.settings-tab').classList.add('active');
    }

    // DARK MODE TOGGLE
    function toggleDarkMode() {
      const htmlElement = document.documentElement;
      const body = document.body;
      
      if (body.classList.contains('dark-mode')) {
        body.classList.remove('dark-mode');
        localStorage.setItem('darkMode', 'off');
      } else {
        body.classList.add('dark-mode');
        localStorage.setItem('darkMode', 'on');
      }
    }

    // Load dark mode preference on page load
    window.addEventListener('DOMContentLoaded', function() {
      const darkModePreference = localStorage.getItem('darkMode');
      if (darkModePreference === 'on') {
        document.body.classList.add('dark-mode');
      }
    });

    // EXPORT REPORT AS PDF
    function exportReportAsPDF() {
      alert('Export feature: In a real application, this would generate and download a PDF report. You can integrate libraries like jsPDF or html2pdf.');
      // Example with html2pdf:
      // const element = document.getElementById('report-content');
      // html2pdf(element);
    }

    // ADVANCED TICKET FILTERS
    function applyTicketFilters() {
      const statusFilter = document.querySelector('.filter-chip.active');
      const searchTerm = document.getElementById('searchInput')?.value || '';
      
      // In production, this would filter the actual ticket data
      const tickets = document.querySelectorAll('[data-ticket-id]');
      tickets.forEach(ticket => {
        const ticketStatus = ticket.getAttribute('data-status');
        const ticketText = ticket.textContent.toLowerCase();
        
        const matchesStatus = !statusFilter || ticketStatus === statusFilter.textContent.trim();
        const matchesSearch = !searchTerm || ticketText.includes(searchTerm.toLowerCase());
        
        ticket.style.display = (matchesStatus && matchesSearch) ? 'block' : 'none';
      });
    }

    function filterByStatus(status, element) {
      // Remove active class from all chips
      document.querySelectorAll('.filter-chip').forEach(chip => {
        chip.classList.remove('active');
      });
      
      // Add active class to clicked chip
      if (element) {
        element.classList.add('active');
      }
      
      applyTicketFilters();
    }

    // COMMUNITY RATING SYSTEM
    function submitRating(ticketId, rating) {
      alert(`Rating submitted: ${rating}/5 stars for ticket ${ticketId}`);
      // In production, this would save to the backend
    }

    // REAL-TIME STATISTICS UPDATE
    function updateRealTimeStats() {
      // Simulate real-time updates
      setInterval(() => {
        const totalTickets = document.querySelector('[data-stat="total"]');
        const resolvedTickets = document.querySelector('[data-stat="resolved"]');
        
        if (totalTickets && resolvedTickets) {
          // Simulate updates
          totalTickets.textContent = Math.floor(1200 + Math.random() * 100);
          resolvedTickets.textContent = Math.floor(840 + Math.random() * 50);
        }
      }, 5000); // Update every 5 seconds
    }

    // MOBILE RESPONSIVE ENHANCEMENTS
    function initMobileMenu() {
      const navLinks = document.querySelectorAll('.top-nav-link');
      if (window.innerWidth <= 768) {
        navLinks.forEach(link => {
          link.classList.add('text-sm');
        });
      }
    }

    window.addEventListener('resize', initMobileMenu);
    window.addEventListener('DOMContentLoaded', initMobileMenu);
  </script>
</body>
</html>
